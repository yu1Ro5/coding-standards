<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenAPI Specification 3.0.3規約 | Future Enterprise Coding Standards</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="フューチャー株式会社が作成するエンタープライズ領域に特化したコーディング規約">
    <meta name="keywords" content="OpenAPI,命名規約,コーディング規約">
    
    <link rel="preload" href="/coding-standards/assets/css/0.styles.cfedf5f7.css" as="style"><link rel="preload" href="/coding-standards/assets/js/app.43ae47b4.js" as="script"><link rel="preload" href="/coding-standards/assets/js/2.549b8794.js" as="script"><link rel="preload" href="/coding-standards/assets/js/1.9e6a74dc.js" as="script"><link rel="preload" href="/coding-standards/assets/js/35.3b7961dd.js" as="script"><link rel="preload" href="/coding-standards/assets/js/19.25b9c7af.js" as="script"><link rel="prefetch" href="/coding-standards/assets/js/10.82ddfb1c.js"><link rel="prefetch" href="/coding-standards/assets/js/11.6d7d333a.js"><link rel="prefetch" href="/coding-standards/assets/js/12.371c59c9.js"><link rel="prefetch" href="/coding-standards/assets/js/13.54cfe61c.js"><link rel="prefetch" href="/coding-standards/assets/js/14.61d7b701.js"><link rel="prefetch" href="/coding-standards/assets/js/15.95348d60.js"><link rel="prefetch" href="/coding-standards/assets/js/16.d22b5283.js"><link rel="prefetch" href="/coding-standards/assets/js/17.7965d2de.js"><link rel="prefetch" href="/coding-standards/assets/js/18.b324cd55.js"><link rel="prefetch" href="/coding-standards/assets/js/20.260217cb.js"><link rel="prefetch" href="/coding-standards/assets/js/21.b0b92173.js"><link rel="prefetch" href="/coding-standards/assets/js/22.a80d90dc.js"><link rel="prefetch" href="/coding-standards/assets/js/23.a442d8ef.js"><link rel="prefetch" href="/coding-standards/assets/js/24.ced06bbf.js"><link rel="prefetch" href="/coding-standards/assets/js/25.9c8f46ce.js"><link rel="prefetch" href="/coding-standards/assets/js/26.31b8f551.js"><link rel="prefetch" href="/coding-standards/assets/js/27.e4297260.js"><link rel="prefetch" href="/coding-standards/assets/js/28.1e97c8a6.js"><link rel="prefetch" href="/coding-standards/assets/js/29.b03a32bc.js"><link rel="prefetch" href="/coding-standards/assets/js/3.e73e5949.js"><link rel="prefetch" href="/coding-standards/assets/js/30.29228a2a.js"><link rel="prefetch" href="/coding-standards/assets/js/31.ed4444e8.js"><link rel="prefetch" href="/coding-standards/assets/js/32.d4b4d1ff.js"><link rel="prefetch" href="/coding-standards/assets/js/33.d1605a15.js"><link rel="prefetch" href="/coding-standards/assets/js/34.3862c893.js"><link rel="prefetch" href="/coding-standards/assets/js/36.3d5014fc.js"><link rel="prefetch" href="/coding-standards/assets/js/37.4dade07c.js"><link rel="prefetch" href="/coding-standards/assets/js/38.a054a2d6.js"><link rel="prefetch" href="/coding-standards/assets/js/39.c2c608a3.js"><link rel="prefetch" href="/coding-standards/assets/js/4.690796cf.js"><link rel="prefetch" href="/coding-standards/assets/js/40.4e3acf01.js"><link rel="prefetch" href="/coding-standards/assets/js/41.53bb6af3.js"><link rel="prefetch" href="/coding-standards/assets/js/42.5b3f0fc9.js"><link rel="prefetch" href="/coding-standards/assets/js/43.22aee325.js"><link rel="prefetch" href="/coding-standards/assets/js/5.1616f7bc.js"><link rel="prefetch" href="/coding-standards/assets/js/6.70b9abe7.js"><link rel="prefetch" href="/coding-standards/assets/js/7.4ef291e5.js"><link rel="prefetch" href="/coding-standards/assets/js/vendors~docsearch.1bff6fe0.js">
    <link rel="stylesheet" href="/coding-standards/assets/css/0.styles.cfedf5f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coding-standards/" class="home-link router-link-active"><img src="/coding-standards/images/logo.svg" alt="Future Enterprise Coding Standards" class="logo"> <span class="site-name can-hide">Future Enterprise Coding Standards</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">
  For Java17
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_11.html" class="nav-link">
  For Java11
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">
  For Java8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SQL" class="dropdown-title"><span class="title">SQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="SQL" class="mobile-dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">
  For Oracle
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（PostgreSQL）.html" class="nav-link">
  For PostgreSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          AWS インフラリソース
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/AWSインフラリソース命名規約.html" class="nav-link">
  AWSインフラ命名規約
</a></li></ul></li><li class="dropdown-item"><h4>
          OpenAPI Specification規約
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/" class="nav-link router-link-active">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" class="nav-link">
  For OAS 2.0（Swagger 2.0）
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About Us" class="dropdown-title"><span class="title">About Us</span> <span class="arrow down"></span></button> <button type="button" aria-label="About Us" class="mobile-dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <!----></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">
  For Java17
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_11.html" class="nav-link">
  For Java11
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">
  For Java8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SQL" class="dropdown-title"><span class="title">SQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="SQL" class="mobile-dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">
  For Oracle
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（PostgreSQL）.html" class="nav-link">
  For PostgreSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          AWS インフラリソース
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/AWSインフラリソース命名規約.html" class="nav-link">
  AWSインフラ命名規約
</a></li></ul></li><li class="dropdown-item"><h4>
          OpenAPI Specification規約
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/" class="nav-link router-link-active">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" class="nav-link">
  For OAS 2.0（Swagger 2.0）
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About Us" class="dropdown-title"><span class="title">About Us</span> <span class="arrow down"></span></button> <button type="button" aria-label="About Us" class="mobile-dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <!----></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/coding-standards/documents/forOpenAPISpecification/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" class="sidebar-link">OpenAPI Specification 2.0規約</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="vuepress-page-title" data-v-f2a2eba4><div class="share-buttons" data-v-f2a2eba4><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" data-url="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_3.0.3.html" data-show-count="false" class="twitter-share-button" data-v-f2a2eba4>
      Tweet
    </a> <div data-href="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_3.0.3.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true" class="fb-like" data-v-f2a2eba4></div> <a href="http://b.hatena.ne.jp/entry/s/future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_3.0.3.html" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加" class="hatena-bookmark-button" data-v-f2a2eba4><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none" data-v-f2a2eba4></a> <div href="https://github.com/future-architect/coding-standards" data-icon="octicon-star" data-show-count="true" aria-label="Star future-architect/coding-standards on GitHub" data-v-f2a2eba4>
      Star
    </div> <a href="https://getpocket.com/save" data-lang="en" data-save-url="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_3.0.3.html" data-pocket-count="horizontal" data-pocket-align="left" class="pocket-btn" data-v-f2a2eba4>Pocket</a></div> <h1 class="vuepress-page-title__title" data-v-f2a2eba4>
    OpenAPI Specification 3.0.3規約
  </h1> <div class="vuepress-page-title__author" data-v-f2a2eba4>
    フューチャー株式会社
  </div></div> <p>本コーディング規約は、世の中のシステム開発プロジェクトのために無償で提供致します。<br>
ただし、掲載内容および利用に際して発生した問題、それに伴う損害については、フューチャー株式会社は一切の責務を負わないものとします。<br>
また、掲載している情報は予告なく変更することがございますので、あらかじめご了承下さい。</p> <h2 id="はじめに"><a href="#はじめに" class="header-anchor">#</a> はじめに</h2> <p>本ドキュメントは <a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.3.md" target="_blank" rel="noopener noreferrer">OpenAPI Specification 3.0.3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>に則った API ドキュメントを記述する際のコーディング規約をまとめている。
旧バージョンである<a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html">OpenAPI Specification 2.0 の規約</a>も存在するため、v2を使用している場合はそちらを参照されたい。</p> <p>本規約は<a href="/coding-standards/documents/forOpenAPISpecification/prerequisite.html">前提条件</a>に基づいて作成されており、ToC向けの LSUDs（Large Set of Unknown Developers）向けの Web API には適合しない場合もあるのでご留意いただきたい。
Web APIの設計自体はこの規約の範囲外であるが、<a href="/coding-standards/documents/forOpenAPISpecification/API_Design.html">API 設計標準</a> にステータスコード等の標準を記載しているため、必要に応じて参考にされたい。</p> <h3 id="ファイルフォーマット"><a href="#ファイルフォーマット" class="header-anchor">#</a> ファイルフォーマット</h3> <p><a href="/coding-standards/documents/forOpenAPISpecification/file_standards.html">ファイルフォーマット規約</a>に従う。</p> <h3 id="openapi-ドキュメントの構成要素"><a href="#openapi-ドキュメントの構成要素" class="header-anchor">#</a> OpenAPI ドキュメントの構成要素</h3> <p>OpenAPI ドキュメントを構成する要素はオブジェクトと呼ばれ、ルートオブジェクトは以下の要素で構成される。<br>
各種規約を理解する上で、これらの要素を大まかに把握しておくことが重要である。<br>
各オブジェクトの詳細については<a href="https://spec.openapis.org/oas/v3.0.3#openapi-object" target="_blank" rel="noopener noreferrer">公式ドキュメント<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を参照されたい。</p> <table><thead><tr><th>フィールド名</th> <th style="text-align:center;">必須</th> <th>説明</th></tr></thead> <tbody><tr><td>openapi</td> <td style="text-align:center;">○</td> <td>OpenAPI ドキュメントが使用する OpenAPI 仕様のバージョン番号</td></tr> <tr><td>info</td> <td style="text-align:center;">○</td> <td>API に関するメタデータ</td></tr> <tr><td>servers</td> <td style="text-align:center;"></td> <td>API サーバへの接続情報</td></tr> <tr><td>paths</td> <td style="text-align:center;">○</td> <td>API の利用可能なパスと操作方法</td></tr> <tr><td>components</td> <td style="text-align:center;"></td> <td>複数の API における共通の定義</td></tr> <tr><td>security</td> <td style="text-align:center;"></td> <td>API 全体で利用可能なセキュリティ（認証）機構</td></tr> <tr><td>tags</td> <td style="text-align:center;"></td> <td>各種 API をグルーピングするためのタグ</td></tr> <tr><td>externalDocs</td> <td style="text-align:center;"></td> <td>追加の外部ドキュメント</td></tr></tbody></table> <h2 id="要素規約"><a href="#要素規約" class="header-anchor">#</a> 要素規約</h2> <p>先述した OpenAPI ドキュメントを構成する要素別に具体的なコーディング規約を記載する。</p> <h3 id="openapi"><a href="#openapi" class="header-anchor">#</a> openapi</h3> <p>OpenAPI ドキュメントが使用する OpenAPI 仕様のセマンティックバージョン番号を記載する。<br>
本規約はバージョン<code>3.0.3</code>を対象としているため、<code>3.0.3</code>とする。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">openapi</span><span class="token punctuation">:</span> <span class="token number">3.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="info"><a href="#info" class="header-anchor">#</a> info</h3> <p><code>info</code>オブジェクトには Web API に関するメタデータを記載する。<br> <code>title</code>, <code>description</code>, <code>version</code> を必須項目とする。</p> <table><thead><tr><th>フィールド名</th> <th style="text-align:center;">必須</th> <th>記載内容</th></tr></thead> <tbody><tr><td>title</td> <td style="text-align:center;">○</td> <td>Web API の総称</td></tr> <tr><td>description</td> <td style="text-align:center;">○</td> <td>Web API の簡単な説明</td></tr> <tr><td>version</td> <td style="text-align:center;">○</td> <td>OpenAPI ドキュメントのバージョン</td></tr> <tr><td>termsOfService</td> <td style="text-align:center;"></td> <td>利用規約の URL</td></tr> <tr><td>contact</td> <td style="text-align:center;"></td> <td>連絡先情報</td></tr> <tr><td>license</td> <td style="text-align:center;"></td> <td>ライセンス情報</td></tr></tbody></table> <h4 id="info-title"><a href="#info-title" class="header-anchor">#</a> info &gt; title</h4> <p>WebAPI の総称を記載する。</p> <ul><li><p>システム名やサービス名 + API のような命名を推奨する。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> X System API
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h4 id="info-description"><a href="#info-description" class="header-anchor">#</a> info &gt; description</h4> <p>Web API が提供する機能の概要・想定する利用者やユースケース・制約などを記載する。</p> <h4 id="info-version"><a href="#info-version" class="header-anchor">#</a> info &gt; version</h4> <p>この API 仕様のドキュメントのバージョンを記載する。アプリケーションのバージョン（git tag やリリースで管理するようなバージョン）とは別である。</p> <ul><li><p><code>major.minor</code> 形式を推奨する。<br> <code>0.1</code>固定で開発を進め、サービスのリリース時に <code>1.0</code> とし、その後の項目やオプション、パスの追加ごとにマイナーバージョンをインクリメントしていく。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">1.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>もし他チームへの API ドキュメントの頻繁な共有が必要であれば、<code>major.minor</code> の代わりに <code>YYYY.MM.DD</code> の日付形式も許容する。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 2023.03.26
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="servers"><a href="#servers" class="header-anchor">#</a> servers</h3> <p>Web API を提供するサーバの情報を記載する。</p> <ul><li><code>url</code>, <code>description</code> を必須項目とする。</li> <li>ステージ（local, develop, staging など）が複数ある場合は各ステージ分の情報を記載する。</li> <li>SSKDs 向けの Web API 開発においては本番環境の URL を不用意に公開したくないケースが多く、記載は避けるべきである。</li></ul> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Localhost Server
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//dev.api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Development Server
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//staging.api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Staging Server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//prod.api.example.com/v1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Production Server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="paths"><a href="#paths" class="header-anchor">#</a> paths</h3> <p>API の利用可能なエンドポイントと操作方法を記載する。</p> <ul><li><p>API ごとに機能IDを定義している場合、<code>paths</code> 配下の各パスは機能 ID の昇順に定義する。</p></li> <li><p>URL パスが複数の単語からなる場合、ケバブケースで表現する。</p></li> <li><p>HTTP メソッドは <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> の順に定義する。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/products</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/products</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>HTTPメソッドの配下に定義されるオペレーションオブジェクトは、下記の項目を必須項目とする。</p> <table><thead><tr><th>フィールド名</th> <th style="text-align:center;">必須</th> <th>記載内容</th></tr></thead> <tbody><tr><td>tags</td> <td style="text-align:center;">○</td> <td>API の論理的なグループ</td></tr> <tr><td>operationId</td> <td style="text-align:center;">○</td> <td>API の利用可能なエンドポイントと操作方法</td></tr> <tr><td>summary</td> <td style="text-align:center;">○</td> <td>API の操作概要</td></tr> <tr><td>description</td> <td style="text-align:center;"></td> <td>API の振る舞いの詳細や注意点を記載する。</td></tr> <tr><td>parameters</td> <td style="text-align:center;"></td> <td>API のリクエストパラメータ</td></tr> <tr><td>requestBody</td> <td style="text-align:center;"></td> <td>API のリクエストボディ</td></tr> <tr><td>response</td> <td style="text-align:center;">○</td> <td>API のレスポンス</td></tr> <tr><td>security</td> <td style="text-align:center;"></td> <td>API のセキュリティ機構</td></tr></tbody></table></li></ul> <h4 id="paths-tags"><a href="#paths-tags" class="header-anchor">#</a> paths &gt; tags</h4> <p>API の論理的なグループを指定する。</p> <ul><li><p>タグオブジェクトとして事前定義したタグの中から選択すること。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> users
      <span class="token punctuation">...</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> users
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token comment"># タグオブジェクトとして定義されていないタグが指定されている</span>
        <span class="token punctuation">-</span> users
      <span class="token punctuation">...</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>1 API につき 1つのタグを指定すること。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> users
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token comment"># 複数のタグが指定されている</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> users
        <span class="token punctuation">-</span> admin
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h4 id="paths-operationid"><a href="#paths-operationid" class="header-anchor">#</a> paths &gt; operationId</h4> <p>API を識別するための一意な文字列を記載する。</p> <ul><li><p>HTTP メソッドとURLパスをアッパーキャメルケースで表現する。<br>
ただしOpenAPI ドキュメントのエディタとして広く使用されるStoplightが提供する<a href="https://docs.stoplight.io/docs/spectral/674b27b261c3c-overview" target="_blank" rel="noopener noreferrer">Linter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>の定義としてケバブケースが標準になっているため、Stoplightを使用する場合はケバブケースで表現しても良い。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> get<span class="token punctuation">-</span>users<span class="token punctuation">-</span>me
      <span class="token punctuation">...</span>
  /products/<span class="token punctuation">{</span>product_id<span class="token punctuation">}</span><span class="token punctuation">:</span>
    <span class="token key atrule">put</span><span class="token punctuation">:</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> put<span class="token punctuation">-</span>products<span class="token punctuation">-</span>product<span class="token punctuation">-</span>id
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> get_users_me
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h4 id="paths-summary"><a href="#paths-summary" class="header-anchor">#</a> paths &gt; summary</h4> <p>API の操作概要を記載する。</p> <ul><li><p>機能 ID や機能名があるのであれば記載する。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users/me</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> API<span class="token punctuation">-</span>001 ユーザアカウント取得 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h4 id="paths-description"><a href="#paths-description" class="header-anchor">#</a> paths &gt; description</h4> <p>APIの振る舞いの詳細や注意点を記載する。<br>
別途参照させるべき設計書があるのであれば、設計書へのリンクを記載しても良い。</p> <h4 id="paths-parameters"><a href="#paths-parameters" class="header-anchor">#</a> paths &gt; parameters</h4> <p>API のリクエストパラメータ（パスパラメータ、クエリパラメータ、ヘッダ）を記載する。</p> <ul><li>HTTP メソッドが <code>GET</code>, <code>DELETE</code> の場合にのみ指定する。</li> <li>パスパラメータはスネークケースで表現する。</li> <li>クエリパラメータはスネークケースで表現する。</li> <li>ヘッダはハイフンを区切り文字とするパスカルケースで表現する。</li></ul> <h4 id="paths-requestbody"><a href="#paths-requestbody" class="header-anchor">#</a> paths &gt; requestBody</h4> <p>API のリクエストボディを記載する。</p> <ul><li>リクエストボディを記載する。<br>
標準仕様の <a href="https://swagger.io/docs/specification/describing-request-body/" target="_blank" rel="noopener noreferrer">describing-request-body<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> の章にも記載がある通り、リクエストボディは <code>POST</code>、<code>PUT</code>、<code>PATCH</code> で使用され、<code>GET</code>、<code>DELETE</code>、<code>HEAD</code> には使用できない。</li> <li>requestBodyの定義は、<code>components/requestBodies</code> で宣言し、<code>$refs</code> で参照する。</li> <li>requestBodyの命名は、<code>Req</code> というプレフィクスと、<code>Body</code> というサフィックスで終える必要がある。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/products</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">operation_id</span><span class="token punctuation">:</span> post<span class="token punctuation">-</span>products
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/requestBodies/ReqPostProductsBody'</span>
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="paths-responses"><a href="#paths-responses" class="header-anchor">#</a> paths &gt; responses</h4> <p>API のレスポンスを記載する。</p> <ul><li>OpenAPI ドキュメントからソースコードを自動生成する際に生成されるのクラスや構造体の命名をコントロールしたい場合などにおいては、スキーマ定義は <code>components</code> オブジェクトとして任意の名称で定義し <code>$ref</code> で参照する。</li> <li>スキーマ定義の名称は、全体で統一された命名ルールを定めること。（例. <code>operation_id</code> をアッパーキャメルケースへ変換の上、プレフィックスに <code>Res</code> を付与）</li> <li><code>schema</code> オブジェクトの <code>type</code> は <code>object</code> を指定する。</li> <li>異常系（<code>4xx</code>, <code>5xx</code>）の HTTP ステータスコードに対応するレスポンス定義は設計者が個別に定義するのではなく、事前に共通的なレスポンスオブジェクトを定義し <code>$ref</code> で参照することが望ましい。
​</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/products</span><span class="token punctuation">:</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">operation_id</span><span class="token punctuation">:</span> post<span class="token punctuation">-</span>products
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/RespPostProducts'</span>
        <span class="token key atrule">'400'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/BadRequest'</span>
        <span class="token key atrule">'401'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/Unauthorized'</span>
        <span class="token key atrule">'403'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/Forbidden'</span>
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/NotFound'</span>
        <span class="token key atrule">'409'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/Conflict'</span>
        <span class="token key atrule">'422'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/UnprocessableEntity'</span>
        <span class="token key atrule">'500'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/InternalServer'</span>
        <span class="token key atrule">'503'</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/responses/ServiceUnavailable'</span>
      <span class="token punctuation">...</span>

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">RespPostProducts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
    <span class="token key atrule">BadRequest</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="paths-security"><a href="#paths-security" class="header-anchor">#</a> paths &gt; security</h4> <p>APIの認証方式を記載する。</p> <ul><li><p>通常はルートレベルの <code>security</code> でAPI共通的な認証方式を設定し、個々のAPIで個別に設定は行わない。</p></li> <li><p>ヘルスチェックのような認証を通す必要がないAPIのみ、上書きで定義する。</p> <p>良い例；</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 認証しない場合のみ個別で定義する</span>
<span class="token key atrule">security</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="components"><a href="#components" class="header-anchor">#</a> components</h3> <p>​
API 定義で利用する共通のデータモデルを定義
​</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">headers</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">examples</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
  <span class="token key atrule">callbacks</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="schemas"><a href="#schemas" class="header-anchor">#</a> schemas</h4> <ul><li><p>API定義共通で利用するスキーマを定義する。</p></li> <li><p>schemasに定義する項目はリソースやエラー等のドメインオブジェクトのみとし、リクエストパラメータやレスポンスパラメータは<code>parameter</code>や<code>requestBodies</code>、<code>responses</code>に記載する。</p> <ul><li><code>paths.requestBodies</code>から直接参照されるリクエストパラメータオブジェクトは<code>requestBodies</code>に定義する。</li> <li><code>paths</code>から直接参照されるレスポンスパラメータは<code>responses</code>に定義する。また400や500などのエラーレスポンスも<code>responses</code>に定義する。</li> <li>HTTPヘッダやCookie、もしくは検索上限やページングのようなHTTPレイヤのパラメータに相当するものは<code>parameter</code>に定義する。</li> <li>レスポンスヘッダーは<code>headers</code>にて定義する。</li> <li>上記いずれにも該当しないuserやidなどのリソース、エラーを示すオブジェクトは<code>schemas</code>に定義する。</li> <li>各APIのリクエストレスポンスオブジェクトは可能な限り、<code>parameter</code>,<code>requestBodies</code>,<code>responses</code>に定義する方針とし、API固有のオブジェクト（所謂<code>ReqXXX</code>、<code>ResXXX</code>等）は<code>schemas</code>には定義しない。</li> <li>ただし、オブジェクトがネストしてしまう場合はAPI固有のオブジェクトであっても<code>schemas</code>に定義する。<br>
※定義するオブジェクトの<code>properties</code>配下に更に<code>type: object</code>が定義されしまう（ネストしてしまう）と生成ツールによってはうまく型が生成されないため。</li></ul></li> <li><p>規約</p> <ul><li>リソース名はアッパーキャメルケースで定義する。</li> <li>リソース名は単数形で定義する。</li> <li><code>type</code> に複数の型定義の指定不可。</li> <li><code>type: null</code>は原則として利用せず、undefinedを利用する。<br> <a href="#%E5%B7%AE%E5%88%86%E6%9B%B4%E6%96%B0-API-%E3%81%AE%E5%A0%B4%E5%90%88">差分更新APIの場合</a>にあるとおり、空更新を行う場合は空文字を利用する。</li> <li><code>allOf</code>、<code>anyOf</code>、<code>oneOf</code> を利用したスキーマ定義は許容しない。</li></ul></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token comment"># リソースを示すオブジェクト</span>
    <span class="token key atrule">Product</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
    <span class="token key atrule">User</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
    <span class="token comment"># エラーを示すオブジェクト</span>
    <span class="token key atrule">ProblemDetailError</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
    <span class="token comment"># リクエストパラメータやレスポンスパラメータはrequestBodies、もしくはresponsesに記載する。</span>
    <span class="token comment"># ReqPostProductsBodyParam:</span>
    <span class="token comment">#   type: object</span>
    <span class="token comment">#   properties:</span>
    <span class="token comment">#     ...</span>
  <span class="token key atrule">parameter</span><span class="token punctuation">:</span>
    <span class="token comment"># HTTPヘッダやCookie、もしくは検索上限やページングのようなHTTPレイヤのパラメータ定義</span>
    <span class="token key atrule">QueryLimit</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
      <span class="token key atrule">in</span><span class="token punctuation">:</span> query
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 検索数上限
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
    <span class="token comment"># 各API定義（paths.requestBody）から参照されるレスポンス定義</span>
    <span class="token key atrule">ReqPostProductsBody</span><span class="token punctuation">:</span>
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">product</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/schemas/Product'</span>
              <span class="token punctuation">...</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token comment"># 各API定義（paths）から参照されるレスポンス定義</span>
    <span class="token key atrule">RespPostProducts</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 商品登録の応答
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">product</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/schemas/Product'</span>
              <span class="token punctuation">...</span>
    <span class="token comment"># 共通で使用するエラーレスポンス定義</span>
    <span class="token key atrule">BadRequest</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 400 Bad Request
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/ProblemDetailError&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h5 id="requestbodies-components"><a href="#requestbodies-components" class="header-anchor">#</a> requestBodies(components)</h5> <ul><li><code>requestBody</code> 直下の <code>required</code> は必須で <code>true</code> を指定する</li> <li>OpenAPI ドキュメントからソースコードを自動生成する際に生成されるのクラスや構造体の命名をコントロールしたい場合などにおいては、スキーマ定義は <code>component</code> オブジェクトとして任意の名称で定義し <code>$ref</code> で参照する。<br>
スキーマ定義の名称は、全体で統一された命名ルールを定めること。（例. <code>operation_id</code> をアッパーキャメルケースへ変換の上、プレフィックスに <code>Req</code> を付与）</li> <li><code>schema</code> オブジェクトの <code>type</code> は <code>object</code> を指定する。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Product</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
  <span class="token key atrule">requestBodies</span><span class="token punctuation">:</span>
    <span class="token key atrule">ReqPostProductsBody</span><span class="token punctuation">:</span>
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/schemas/Product'</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="responses-components"><a href="#responses-components" class="header-anchor">#</a> responses(components)</h5> <p>レスポンスの先頭には複数のエンドポイントで横断的に用いるモデルを定義する。例えば、ステータスコード400~500系のエラーモデルがある。
​</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">ProblemDetailError</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">BadRequest</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 400 Bad Request
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/ProblemDetailError&quot;</span>
    <span class="token key atrule">Unauthorized</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 401 Unauthorized
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/ProblemDetailError&quot;</span>
    <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>​
正常系のレスポンスの例としてはファイルアップロード・ダウンロードなどが該当する。個別のアプリケーション要件でブレが少ないと複数のエンドポイントで用いられる場合に定義する。オブジェクトのスキーマは、schemasに切り出して定義し、コード生成ツールのために型情報を付与させる。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">SignedURL</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">signed_url</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">format</span><span class="token punctuation">:</span> uri
        <span class="token key atrule">expired_at</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">format</span><span class="token punctuation">:</span> date<span class="token punctuation">-</span>time
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token key atrule">BlobUpload</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> BLOB(Binary Large Object) upload using presigned url
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/SignedURL&quot;</span>
    <span class="token key atrule">BlobDownload</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> BLOB(Binary Large Object) download using presigned url
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/SignedURL&quot;</span>
    <span class="token key atrule">ImageBinary</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> An image
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">image/*</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> binary
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>それらの後に、paths登場順にエンドポイント固有のレスポンスを定義する。レスポンスオブジェクトのスキーマは、schemasに切り出して定義する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Product</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> object
      <span class="token key atrule">properties</span><span class="token punctuation">:</span>
        <span class="token key atrule">product_id</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token punctuation">...</span>
  <span class="token key atrule">responses</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">RespPostProducts</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> 商品登録の応答
      <span class="token key atrule">content</span><span class="token punctuation">:</span>
        <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;$ref&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/Product&quot;</span>
          <span class="token key atrule">examples</span><span class="token punctuation">:</span>
            <span class="token key atrule">default</span><span class="token punctuation">:</span>
              <span class="token key atrule">value</span><span class="token punctuation">:</span>
                <span class="token punctuation">...</span>
            <span class="token key atrule">example-1</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'./examples/post-product.example.1.yaml'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h5 id="parameters"><a href="#parameters" class="header-anchor">#</a> parameters</h5> <p>API 共通で利用するパラメータ（パスパラメータ、クエリパラメータ、ヘッダ, Cookie）を記載する。</p> <h6 id="パスパラメータ"><a href="#パスパラメータ" class="header-anchor">#</a> パスパラメータ</h6> <ul><li>API 全体で利用されるパスパラメータが必要なケースが想定されないため、原則定義しない。
特定リソースの操作（例えば更新と削除）を行う際のリソースIDはパスパラメータとして再利用できるが、コンフリクトを避けるため原則共通化は行わない。</li></ul> <h6 id="クエリパラメータ"><a href="#クエリパラメータ" class="header-anchor">#</a> クエリパラメータ</h6> <ul><li>API 全体で利用可能な共通のクエリパラメータを定義する （例: 検索数のlimit, offset）</li> <li>命名は クエリパラメータ名に <code>Query</code> というプレフィクスを付与する形式を推奨する。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">/products</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/parameters/QueryLimit'</span>

<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">QueryLimit</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
    <span class="token key atrule">in</span><span class="token punctuation">:</span> query
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 検索数上限
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h6 id="ヘッダパラメータ"><a href="#ヘッダパラメータ" class="header-anchor">#</a> ヘッダパラメータ</h6> <ul><li>API 全体で利用可能な共通のリクエストヘッダを定義する。</li> <li>命名は ヘッダ名に <code>Header</code> というプレフィクスを付与する形式を推奨する。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">post</span><span class="token punctuation">:</span>
    <span class="token key atrule">/products</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/parameters/HeaderContentType'</span>
<span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">HeaderContentType</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> Content<span class="token punctuation">-</span>Type
      <span class="token key atrule">in</span><span class="token punctuation">:</span> header
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h6 id="cookie-パラメータ"><a href="#cookie-パラメータ" class="header-anchor">#</a> Cookie パラメータ</h6> <ul><li>API 全体で利用可能な共通のCookieパラメータを定義する。（例: CSRF用のトークン）</li> <li>命名は Cookie パラメータ名に <code>Cookie</code> というプレフィクスを付与する形式を推奨する。</li> <li>Cookie 認証を定義する場合は、<code>APIKey</code> を利用すること。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">/products</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/parameters/CookieCSRFToken'</span>
<span class="token punctuation">...</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
    <span class="token key atrule">CookieCSRFToken</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> csrftoken
      <span class="token key atrule">in</span><span class="token punctuation">:</span> cookie
      <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">description</span><span class="token punctuation">:</span> CSRFトークン
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="headers"><a href="#headers" class="header-anchor">#</a> headers</h4> <p>API 共通で利用するレスポンスヘッダを記載する。</p> <ul><li>命名は ヘッダ名からハイフンを除去した形式を推奨する。</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">/products</span><span class="token punctuation">:</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">headers</span><span class="token punctuation">:</span>
            <span class="token key atrule">ContentType</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/headers/ContentType'</span>
<span class="token punctuation">...</span>

<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">headers</span><span class="token punctuation">:</span>
    <span class="token key atrule">ContentType</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> the original media type of the resource
      <span class="token key atrule">schema</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="securityschemes"><a href="#securityschemes" class="header-anchor">#</a> securitySchemes</h4> <p>標準で用いるAPI認証の定義を行う。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># Bearer トークによる認証</span>
<span class="token key atrule">securitySchemes</span><span class="token punctuation">:</span>
    <span class="token key atrule">BearerAuth</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> http
      <span class="token key atrule">scheme</span><span class="token punctuation">:</span> bearer
      <span class="token key atrule">bearerFormat</span><span class="token punctuation">:</span> JWT
      <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'Bearer トークン認証'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="links"><a href="#links" class="header-anchor">#</a> links</h4> <p><a href="https://swagger.io/docs/specification/links/" target="_blank" rel="noopener noreferrer">links<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> は OpenAPI 3.0 の新機能の1つで、あるAPIレスポンスの値を用いて、別のAPIを呼び出す方法を明示できるセクションである。</p> <p>興味深い機能であり、APIのセマンティクスを伝えるのに有用であるが、本規約では記載しないことを推奨とする。</p> <p>理由は下記の通りである。</p> <ul><li>業務システムでは、業務フローを抑えておけば、API操作フローの理解はそこまで難しくないことが多い
<ul><li>逆に、API同士の関係だけを示すだけでは業務モデリング図とのダブルメンテナンスになったり、中途半端になりうる</li></ul></li> <li><a href="https://github.com/swagger-api/swagger-ui/issues/3641" target="_blank" rel="noopener noreferrer">OAS 3.0 Support Backlog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> にあるように、2023/12/15時点ではSwagger-UIが対応していない
<ul><li>linksを書いたと言って、APIドキュメントに影響しない</li></ul></li></ul> <h4 id="callbacks"><a href="#callbacks" class="header-anchor">#</a> callbacks</h4> <p><a href="https://swagger.io/docs/specification/callbacks/" target="_blank" rel="noopener noreferrer">callbacks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> は OpenAPI 3.0 の新機能の1つで、APIサーバ側が指定されたコールバックURLを呼び出すという仕組みである。</p> <p>仕様書には、ECショップで購入のたびにマネージャーに通知を送るといった、何かしらの処理をトリガーにコールバックURLを呼び出す例が示されている。</p> <p>利便性は高い仕様だが、本規約では記載しないことを推奨とする。</p> <p>理由は下記の通りである。</p> <ul><li>コールバックURL呼び出しの、エラーハンドリングが難しい</li> <li>業務システムでは欠損が許されない、または将来的に許されなくなる可能性があり、その場合にこの機能に頼ると想定以上の追加作業が発生する</li></ul> <p>コールバックのような仕組みを実現するには、別途キューイングのメッセージサービスの利用などを検討する。</p> <h3 id="security"><a href="#security" class="header-anchor">#</a> security</h3> <p>全APIに共通で適用されるセキュリティ設定を定義する。<br>
業務システムの Web API において 認証が全く存在しないケースは考えにくいため、本規約ではルートレベルで認証を設定し、個々のAPIへの適応漏れをなくす。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">security</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">Bearer</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="tags"><a href="#tags" class="header-anchor">#</a> tags</h3> <p>API を論理的にグループ化するためのタグを定義する。ドキュメントやツールにとって重要であるため、 <strong>必須</strong> で指定する。</p> <ul><li><code>name</code>, <code>description</code> を必須項目とする。</li> <li><strong>単数形</strong> で、小文字かつ半角スペース区切りで記載する。<br>
半角スペース区切りで記載する理由は　HTML ドキュメントで参照する場合の可読性を上げるためである。</li> <li>コード生成で利用される（Go においてはパッケージ、 TypeScriptにおいてはクラスに相当する）ため、シンプルな命名にする。</li></ul> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> product
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 製品
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user account
    <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーアカウント
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> products
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 製品
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user_account
    <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーアカウント
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="externaldocs"><a href="#externaldocs" class="header-anchor">#</a> externalDocs</h3> <p>参照情報としてのURLの記載が可能。<br>
ただし、<code>description</code> にて参考情報となるURLを記載する方が、複数リンクを指定可能であるなど自由度が高く使いやすい。そのため <code>externalDocs</code> は利用せず <code>description</code> の利用を推奨する。</p> <p>良い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
    <span class="token key atrule">Some useful links</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">[</span>The Pet Store repository<span class="token punctuation">]</span>(https<span class="token punctuation">:</span>//github.com/swagger<span class="token punctuation">-</span>api/swagger<span class="token punctuation">-</span>petstore)
    <span class="token punctuation">-</span> <span class="token punctuation">[</span>The source API definition for the Pet Store<span class="token punctuation">]</span>(https<span class="token punctuation">:</span>//github.com/swagger<span class="token punctuation">-</span>api/swagger<span class="token punctuation">-</span>petstore/blob/master/src/main/resources/openapi.yaml)

<span class="token comment"># 特別な場合を除き非推奨</span>
<span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Find out more about Swagger
  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//swagger.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>悪い例：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">externalDocs</span><span class="token punctuation">:</span>
  <span class="token key atrule">description</span><span class="token punctuation">:</span> Find out more about Swagger
  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//swagger.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="設計上のポイント"><a href="#設計上のポイント" class="header-anchor">#</a> 設計上のポイント</h2> <h3 id="ファイルアップロード"><a href="#ファイルアップロード" class="header-anchor">#</a> ファイルアップロード</h3> <p>Web API におけるファイルアップロードのよく利用される実装手段は、大きく分けて以下の 3 手法に分類できます</p> <ol><li>ファイルのコンテンツを Base64 などにエンコードして、JSON の項目として設定し、リクエストボディで送る
<ul><li>メリット: 通常の JSON を扱うのとほぼ変わらないため楽。サムネイルなど限定されたユースケースの場合に向く</li> <li>デメリット: 巨大なファイルを扱う場合などサーバリソース負荷が懸念。Base64 に変換する分 CPU 負荷は余計にかかる。ペイロードが膨れるためモバイルなどのクライアントでは帯域利用での懸念がある</li></ul></li> <li>multipart/form-data ファイルを送信する
<ul><li>メリット: ファイルを Base64 に変換するといった作業が不要</li> <li>デメリット: ブラウザ以外のクライアントにとって手間がかかる</li></ul></li> <li>アップロード用に用いる、オブジェクトストレージの Signed URL を発行し、クライアントから直接ファイルをアップロードしてもらう
<ul><li>次の流れを想定（Signed URL を取得 -&gt; ファイルアップロード -&gt; ファイルに紐づかせるキーや属性情報などを登録）</li> <li>Amazon API Gateway を利用する場合は、2023 年 6 月時点で<a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html" target="_blank" rel="noopener noreferrer">ペイロード上限が 10MB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/gettingstarted-limits.html#api-requests" target="_blank" rel="noopener noreferrer">AWS Lambda でもペイロード制限がある<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ため、許容するファイルサイズによってはこの手法一択となる</li> <li>メリット: オブジェクトストレージの可用性・信頼性を享受できる</li> <li>デメリット: アップロードするために複数の API エンドポイント呼び出しが必要なため、煩雑である</li> <li>2023 年 6 月に AWS ブログでこの方式について解説した記事が出たので、詳細は参照ください。
<ul><li><a href="https://aws.amazon.com/jp/blogs/news/large-size-files-transferring-by-serverless-s3presignedurl-and-clientside-javascript/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/jp/blogs/news/large-size-files-transferring-by-serverless-s3presignedurl-and-clientside-javascript/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ol> <p>本規約でファイルアップロードについて上記の 3. Signed URL を推奨する。API 呼び出しとしては次のようなフローとする。</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>フローの ①、② はアプリケーション固有の紐づけルールにおいて Web API を設計すれば良いため、本規約で YAML の設定例は記載しない。フロー ② については Signed URL を用いたアップロードであり、アプリケーションの Web API 定義を書く必要はない。もし、監査ログなどのガバナンス上、直接オブジェクトストレージへの書き込みを許容されないケースは、B で Signed URL に相当する書き込み先を提供し、B を経由してファイルをアップロードする。</p> <p>上記どちらのケースも OpenAPI 定義としてはシンプルであるため、記述例は割愛する。</p> <h3 id="ファイルダウンロード"><a href="#ファイルダウンロード" class="header-anchor">#</a> ファイルダウンロード</h3> <p>ファイルアップロードと同様、オブジェクトストレージの Signed URL 経由を経由してのダウンロードさせる手法を推奨する。Web API としてはオブジェクトストレージにダウンロード用のファイルを書き込み、クライアントが取得するための Signed URL をレスポンスの JSON 項目に渡す方式である。</p> <p>もし、サムネイルやアイコン画像など、ファイル容量がごく小さい場合は Base64 にエンコードして JSON に埋め込んで渡しても良い。線引をどこに設置するかは本規約で定義しない。</p> <p>どちらのケースも OpenAPI 定義としてはシンプルであるため、記述例は割愛する。</p> <h3 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h3> <p>CORS（Cross-Origin Resource Sharing）のために、options メソッドの追記は <strong>原則不要</strong> とする。</p> <p>理由は以下である。</p> <ul><li>サーバ側
<ul><li>options メソッド対応は、API 使用ではなく実装レベルの機能横断的な処理（Java における Servlet Filter や Spring の Interceptor、Go における Middleware など）で行うことが大半であり、コード生成が不要</li></ul></li> <li>クライアント側
<ul><li>options メソッドを用いるのはクライアントがブラウザであり、クライアントのアプリケーションコードが明示的にアクセスしないため、コード生成が不要</li></ul></li> <li>使用面として
<ul><li><code>Access-Control-Allow-Origin</code> がどのような値を返すか、呼び出し元によって動的な値を返したい場合があり、記載が困難なケースがある</li></ul></li></ul> <p>ただし、Amazon API Gateway のようなサービスを利用する場合は、options メソッドの記載が必須である場合は除く<a href="https://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/enable-cors-for-resource-using-swagger-importer-tool.html" target="_blank" rel="noopener noreferrer">^1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="opentelemetry-traceparent-http-header"><a href="#opentelemetry-traceparent-http-header" class="header-anchor">#</a> OpenTelemetry Traceparent HTTP Header</h3> <p>OpenOpenTelemetryで用いるられる<a href="https://www.w3.org/TR/trace-context/" target="_blank" rel="noopener noreferrer">traceparent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> のリクエストヘッダーはOpenAPIで <strong>原則不要</strong> とする。</p> <p>理由は以下である。</p> <ul><li>OpenTelemetryが定めるヘッダー類は、API横断的に設定されるべきものであり、ミドルウェアやフレームワーク側などでの一律の制御を推奨するため</li> <li>記載することにより、OpenOpenTelemetryに対応していることを明記し開発者に周知できるメリットより、各アプリ開発者が生成されたコードで悩んだり、誤解されることを回避したいため</li></ul> <h3 id="バリデーションについて"><a href="#バリデーションについて" class="header-anchor">#</a> バリデーションについて</h3> <p>OpenAPI 定義を記載するにあたり、バリデーションをどこまで厳密に定義すべきかという議論はよく行いがちである。</p> <p>リクエストパラメータの各項目に対して、必須・型・桁・区分値・日付・正規表現のチェックが行える。レスポンスで用いるモデルについても同様に設定でき、<code>enum</code>, <code>pattern</code> 以外は API の利用者（クライアント）側の DB 設計などに必要な型桁情報を渡すのに有用であるため、できる限り詳しく指定する。</p> <h4 id="必須"><a href="#必須" class="header-anchor">#</a> 必須</h4> <p>必須パラメータのみ <code>required: true</code> を定義する</p> <h4 id="デフォルト値"><a href="#デフォルト値" class="header-anchor">#</a> デフォルト値</h4> <p>パラメータにデフォルト値がある場合は<code>default</code> を定義する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># ex. enum</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> limit
<span class="token key atrule">type</span><span class="token punctuation">:</span> number
<span class="token key atrule">format</span><span class="token punctuation">:</span> integer
<span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> 検索結果の項目数上限（1~100が指定可能）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>【注意】API 公開後に、default 値を変更してはならない（API の互換性が崩れるため）。もし変更する場合は、API のバージョンを上げること。</p> <h4 id="型・フォーマット"><a href="#型・フォーマット" class="header-anchor">#</a> 型・フォーマット</h4> <p>型（<code>type</code>）は <code>string(文字列)</code>, <code>number（数値）</code>, <code>integer（整数値）</code>, <code>boolean（真偽値）</code> <code>array（配列）</code> のうちどれか指定する.</p> <p>フォーマット（<code>format</code>） は以下の型の詳細情報を示すもので、可能な限り設定する。</p> <ul><li><code>integer</code> （整数）
<ul><li><code>int32</code>, <code>int64</code></li></ul></li> <li><code>number</code> （数値）
<ul><li><code>float</code>, <code>double</code></li></ul></li> <li><code>string</code> （バイナリ）
<ul><li><code>byte</code>: Base64 でエンコードされた文字列</li> <li><code>binary</code>: バイト配列</li></ul></li> <li><code>string</code> （日付）
<ul><li><code>date</code>: <a href="https://www.rfc-editor.org/rfc/rfc3339" target="_blank" rel="noopener noreferrer">RFC3339<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> full-date(例: 2023-07-21)
<ul><li>項目名は <code>_on</code> を接尾辞につけることを推奨とする</li></ul></li> <li><code>date-time</code>: <a href="https://www.rfc-editor.org/rfc/rfc3339" target="_blank" rel="noopener noreferrer">RFC3339<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> date-time(例: 2023-07-21T17:32:28Z)
<ul><li>項目名は <code>_at</code> を接尾辞につけることを推奨とする</li></ul></li></ul></li> <li><code>string</code> （その他）
<ul><li><code>password</code>: Swagger UI で入力が隠される</li> <li>その他、 <code>email</code>, <code>uuid</code> など Open API 仕様に存在しない任意のフォーマットを独自のドキュメント生成などのために記載しても良い</li></ul></li></ul> <p>OpenAPI 3.0では 2.0 に存在した <code>file</code> type は存在しない。もし同等の指定をしたい場合は、以下の様に指定する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token key atrule">format</span><span class="token punctuation">:</span> binary  <span class="token comment"># binary file contents</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="桁"><a href="#桁" class="header-anchor">#</a> 桁</h4> <p>データ型によって、利用できる桁を指定する項目が異なる。可能な限り設定する。</p> <ul><li>文字列
<ul><li>最大桁数：<code>maxLength</code></li> <li>最小桁数：<code>minLength</code></li></ul></li> <li>数値または整数値
<ul><li>最小値（境界値を含む）：<code>minimum</code></li> <li>最大値（境界値を含む）：<code>maximum</code></li> <li>境界値を含まない場合のみ<code>exclusiveMinimum: true</code>または<code>exclusiveMaximum: true</code>を定義する。minimum, maximum で代用できる場合は利用しない</li></ul></li> <li>配列:
<ul><li>最大要素数：<code>maxItems</code></li> <li>最小要素数：<code>minItems</code></li> <li><code>required: true</code>の場合は原則として<code>minItems: 1</code>を定義する</li> <li><code>uniqueItems</code> は必須で指定する（通常は一意であるべき）</li></ul></li></ul> <p>【注意】API 公開後に、レスポンスの <code>maxLength</code> を以前より大きい値に変更してはならない。レスポンスの <code>maxLength</code> など API 利用者側システムの DB の ERD 定義のインプットになる事が多いため。もし行う場合は API のバージョンを上げることや、連携先に桁数変更の旨を調整するなどの考慮を行う。</p> <h4 id="区分値"><a href="#区分値" class="header-anchor">#</a> 区分値</h4> <p>区分値の場合は <code>enum</code> 属性を利用し、<code>description</code>には区分値の論理名を記載する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> gender
<span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  性別
    0: 不明
    1: 男
    2: 女
    9: 適用不能</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>OpenAPI 3.0 では区分値の再利用ができるため、横断的に用いる区分値はcomponents側で定義する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/products</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
        <span class="token key atrule">name</span><span class="token punctuation">:</span> gender
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/components/schemas/Gender'</span>
<span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
    <span class="token key atrule">Gender</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="固定値"><a href="#固定値" class="header-anchor">#</a> 固定値</h4> <p><strong>固定値</strong> の場合も enum を 1 つだけ指定して表現する。この場合もレスポンスで利用する場合は指定しない</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> file_layout
<span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">]</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> ファイルレイアウト
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="その他-正規表現"><a href="#その他-正規表現" class="header-anchor">#</a> その他（正規表現）</h4> <p>正規表現で表現できる文字列は<code>pattern</code>を利用して定義する。桁や区分値で代替できる場合は、<code>pattern</code> を用いない</p> <p>例:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">remind_time</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token key atrule">description</span><span class="token punctuation">:</span> リマインド時刻。（hh<span class="token punctuation">:</span>mm）形式
  <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token datetime number">23:59</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> <span class="token string">&quot;^(2[0-3]|[01][0-9]):([0-5][0-9])$&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="値が存在しないという状態の表現"><a href="#値が存在しないという状態の表現" class="header-anchor">#</a> 値が存在しないという状態の表現</h3> <h4 id="undefined-と-null"><a href="#undefined-と-null" class="header-anchor">#</a> undefined と null</h4> <ul><li><p>リクエスト/レスポンスにおいて、ある項目の値が存在しないという状態を表現する場合、① その項目自体を含めず <code>undefined</code> とする方法と、② 値に <code>null</code> を使用する方法がある。</p> <p>① <code>undefined</code> とする場合、OpenAPI 定義と JSON データの例</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">application/json</span><span class="token punctuation">:</span>
  <span class="token key atrule">schema</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">id</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token key atrule">required</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-jsonc line-numbers-mode"><pre class="language-text"><code>{ &quot;id&quot;: &quot;00001&quot; } //nameの値が存在しない
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsonc line-numbers-mode"><pre class="language-text"><code>{} //idの値も存在しない場合、idは項目必須であるためバリデーションエラーとなる
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>② 値に <code>null</code> を使用する場合、OpenAPI 定義（OpenAPI3.0）と JSON データの例</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">application/json</span><span class="token punctuation">:</span>
  <span class="token key atrule">schema</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">id</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">nullable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">nullable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">required</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-jsonc line-numbers-mode"><pre class="language-text"><code>{ &quot;id&quot;: &quot;00001&quot;, &quot;name&quot;: null } //nameの値が存在しない
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsonc line-numbers-mode"><pre class="language-text"><code>{ &quot;id&quot;: null, &quot;name&quot;: null } //id, nameとも値が存在しない
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsonc line-numbers-mode"><pre class="language-text"><code>{} //この場合は、required指定の、id項目がないためバリデーションエラーとなる
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>原則としては、①<code>undefined</code> による定義を使用する方が、API 仕様の表現が煩雑にならず、また通信サイズの点からも有利である。</p></li></ul> <h4 id="差分更新-api-の場合"><a href="#差分更新-api-の場合" class="header-anchor">#</a> 差分更新 API の場合</h4> <ul><li><p>差分更新（PATCH）API においては、項目が更新対象外であることと、項目が更新してクリアする対象であることを明確に区別する必要がある。このような場合には、以下のいずれかの方法を採用する。</p> <p>１）項目を文字列として定義し、空値として空文字(&quot;&quot;)を採用する。</p> <ul><li>float や int 等の数値についても、文字列型として定義することで、項目が <code>undefined</code> または <code>null</code> であれば「更新対象外」、項目が空文字であれば「更新してクリアする対象」であると判定できる。</li> <li>この場合、空文字は OpenAPI の<code>format</code>定義に許容されないため注意が必要である。<code>format</code>定義の代わりに、<code>pattern</code>に空文字を許容する正規表現を定義する必要がある。<br> <br></li></ul> <p>２）カスタムモデルを使用する</p> <ul><li>API で受け取るデータをデシリアライズする際に、<code>undefined</code> と <code>null</code> を区別できるようなカスタムモデルを作成すると、１）のように数値を文字列型として扱う必要がなく、OpenAPI の<code>format</code> 定義を使用することも可能である。</li> <li>この場合、OpenAPI からの自動生成モデルにはカスタマイズが必要となる。</li> <li>カスタムモデルの例 (参照元: <a href="https://future-architect.github.io/articles/20211028b/#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E8%A6%B3%E7%82%B9" target="_blank" rel="noopener noreferrer">技術ブログ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li></ul></li></ul> <h4 id="各言語による表現の違い"><a href="#各言語による表現の違い" class="header-anchor">#</a> 各言語による表現の違い</h4> <details><summary>Golang</summary> <ul><li>Golangの場合、以下のように、<code>nil</code> になり得る項目はポインタ型とした上で、<code>undefined</code> となり得る項目は <code>omitempty</code> タグを付与する。</li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code>  <span class="token keyword">type</span> Data <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    NotNullableString1 <span class="token builtin">string</span>  <span class="token string">`json:&quot;not_nullable_string_1&quot;`</span>
    NotNullableString2 <span class="token builtin">string</span>  <span class="token string">`json:&quot;not_nullable_string_2&quot;`</span>
    NullableString1    <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">`json:&quot;nullable_string_1&quot;`</span>
    NullableString2    <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">`json:&quot;nullable_string_2,omitempty&quot;`</span>
    NullableString3    <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">`json:&quot;nullable_string_3&quot;`</span>
    NullableString4    <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">`json:&quot;nullable_string_4,omitempty&quot;`</span>
    NotNullableInt1    <span class="token builtin">int64</span>   <span class="token string">`json:&quot;not_nullable_int_1&quot;`</span>
    NotNullableInt2    <span class="token builtin">int64</span>   <span class="token string">`json:&quot;not_nullable_int_2&quot;`</span>
    NullableInt1       <span class="token operator">*</span><span class="token builtin">int64</span>  <span class="token string">`json:&quot;nullable_int_1&quot;`</span>
    NullableInt2       <span class="token operator">*</span><span class="token builtin">int64</span>  <span class="token string">`json:&quot;nullable_int_2,omitempty&quot;`</span>
    NullableInt3       <span class="token operator">*</span><span class="token builtin">int64</span>  <span class="token string">`json:&quot;nullable_int_3&quot;`</span>
    NullableInt4       <span class="token operator">*</span><span class="token builtin">int64</span>  <span class="token string">`json:&quot;nullable_int_4,omitempty&quot;`</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Set values</span>
  data <span class="token operator">:=</span> Data<span class="token punctuation">{</span>
    NotNullableString1<span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
    NullableString1<span class="token punctuation">:</span>    <span class="token boolean">nil</span><span class="token punctuation">,</span>
    NullableString2<span class="token punctuation">:</span>    <span class="token boolean">nil</span><span class="token punctuation">,</span>
    NotNullableInt1<span class="token punctuation">:</span>    <span class="token number">1</span><span class="token punctuation">,</span>
    NullableInt1<span class="token punctuation">:</span>       <span class="token boolean">nil</span><span class="token punctuation">,</span>
    NullableInt2<span class="token punctuation">:</span>       <span class="token boolean">nil</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Serialize</span>
  jsonString<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">)</span>
  buf <span class="token operator">:=</span> bytes<span class="token punctuation">.</span><span class="token function">NewBuffer</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span>

  decoder <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
  <span class="token keyword">var</span> v Data
  <span class="token comment">// Deserialize</span>
  decoder<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span>
  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;After decoded: %#v\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li>シリアライズ後のjsonを見ると、値がセットされない場合には、項目にゼロ値（ポインタ型は<code>nil</code>, string型は空文字、int型は<code>0</code>）が入っている。</li> <li>項目がゼロ値の場合に<code>omitempty</code> が付与されていると、 項目ごと除外されている（<code>undefined</code> となっている）。</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;not_nullable_string_1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;not_nullable_string_2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nullable_string_1&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nullable_string_3&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;not_nullable_int_1&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;not_nullable_int_2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nullable_int_1&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nullable_int_3&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>デシリアライズ後の構造体を見ると、json の項目が<code>undefined</code>であっても <code>null</code> であっても、<code>nil</code> として保持されている。</li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code>  After decoded<span class="token punctuation">:</span>
  Data<span class="token punctuation">{</span>
      NotNullableString1<span class="token punctuation">:</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
      NotNullableString2<span class="token punctuation">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      NullableString1<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableString2<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableString3<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableString4<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NotNullableInt1<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>
      NotNullableInt2<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
      NullableInt1<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int64</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableInt2<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int64</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableInt3<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int64</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      NullableInt4<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">int64</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details> <details><summary>Java</summary> <ul><li>Java の場合、<code>int</code> や <code>double</code> などのプリミティブ型は <code>null</code> になれないため、<code>nullable</code> にするためには、それぞれのラッパークラスである参照型（<code>Integer</code>, <code>Double</code> など）を使用する必要がある。</li> <li>json にシリアライズ後に<code>null</code> の項目を保持するか否かは、例えば、<a href="https://github.com/FasterXML" target="_blank" rel="noopener noreferrer">Jackson ライブラリ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を用いて以下のように区別される。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">public</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token class-name">String</span> str1<span class="token punctuation">,</span> <span class="token class-name">String</span> str2<span class="token punctuation">,</span> <span class="token keyword">int</span> notNullableInt<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>nullableString1 <span class="token operator">=</span> str1<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>nullableString2 <span class="token operator">=</span> str2<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>notNullableInt <span class="token operator">=</span> notNullableInt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token annotation punctuation">@JsonInclude</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">ALWAYS</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> nullableString1<span class="token punctuation">;</span>

      <span class="token annotation punctuation">@JsonInclude</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span>
      <span class="token keyword">private</span> <span class="token class-name">String</span> nullableString2<span class="token punctuation">;</span>

      <span class="token keyword">private</span> <span class="token keyword">int</span> notNullableInt<span class="token punctuation">;</span>

      <span class="token comment">// Setters</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNullableString1</span><span class="token punctuation">(</span><span class="token class-name">String</span> nullableString1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>nullableString1 <span class="token operator">=</span> nullableString1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNullableString2</span><span class="token punctuation">(</span><span class="token class-name">String</span> nullableString2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>nullableString2 <span class="token operator">=</span> nullableString2<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNotNullableInt</span><span class="token punctuation">(</span><span class="token keyword">int</span> notNullableInt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>notNullableInt <span class="token operator">=</span> notNullableInt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Getters</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNullableString1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> nullableString1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getNullableString2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> nullableString2<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNotNullableInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> notNullableInt<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token comment">// Set nothing to the fields.</span>
  <span class="token class-name">Data</span> dataWithNothing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Set intial values to the fields.</span>
  <span class="token class-name">Data</span> dataWithInitialValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Set values to the fields.</span>
  <span class="token class-name">Data</span> dataWithValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">&gt;</span></span> dataList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>dataWithNothing<span class="token punctuation">,</span> dataWithInitialValues<span class="token punctuation">,</span> dataWithValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Data</span> d <span class="token operator">:</span> dataList<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// Serialize</span>
      <span class="token class-name">String</span> json <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Deserialize</span>
      <span class="token class-name">Data</span> deserialized <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">Data</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ToStringBuilder</span><span class="token punctuation">.</span><span class="token function">reflectionToString</span><span class="token punctuation">(</span>deserialized<span class="token punctuation">,</span> <span class="token class-name">ToStringStyle</span><span class="token punctuation">.</span><span class="token constant">SHORT_PREFIX_STYLE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>シリアライズ後の json を見ると、参照型<code>String</code>の初期値は<code>null</code>、プリミティブ型<code>int</code>の初期値は<code>0</code>となっている。</li> <li><code>@JsonInclude(JsonInclude.Include.ALWAYS)</code> アノテーションを付与した項目は、値が<code>null</code>の場合でも項目が保持される。</li> <li><code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> アノテーションを付与した項目は、値が<code>null</code>の場合には項目ごと除外されている（<code>undefined</code>となっている）。</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;nullableString1&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;notNullableInt&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">{</span>
    <span class="token property">&quot;nullableString1&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;notNullableInt&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">{</span>
    <span class="token property">&quot;nullableString1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nullableString2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;notNullableInt&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>デシリアライズ後のオブジェクトを見ると、json の項目が<code>undefined</code>であっても <code>null</code> であっても、<code>null</code> として保持されている。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token class-name">Data</span><span class="token punctuation">[</span>nullableString1<span class="token operator">=</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">null</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>nullableString2<span class="token operator">=</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">null</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>notNullableInt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span>

  <span class="token class-name">Data</span><span class="token punctuation">[</span>nullableString1<span class="token operator">=</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">null</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>nullableString2<span class="token operator">=</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">null</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>notNullableInt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span>

  <span class="token class-name">Data</span><span class="token punctuation">[</span>nullableString1<span class="token operator">=</span><span class="token punctuation">,</span>nullableString2<span class="token operator">=</span><span class="token punctuation">,</span>notNullableInt<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details> <details><summary>TypeScript</summary> <ul><li>TypeScriptの場合、以下のように、<code>null</code>, <code>undefined</code> を区別して定義することが可能である。Optional指定（項目名に<code>?</code>を付与）することで<code>undefined</code>をセットする必要がなくなる（項目が「非必須」となる）。</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
    nullable_string1<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nullable_string2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nullable_string3<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nullable_string4<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nullable_string5<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    nullable_num1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    nullable_num2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    nullable_num3<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    nullable_num4<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    nullable_num5<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> body<span class="token operator">:</span> Data <span class="token operator">=</span> <span class="token punctuation">{</span>
    nullable_string1<span class="token operator">:</span> <span class="token string">'value1'</span><span class="token punctuation">,</span>
    nullable_string2<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    nullable_string3<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    nullable_string4<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 定義しないとエラーとなる</span>
    nullable_num1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    nullable_num2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    nullable_num3<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    nullable_num4<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 定義しないとエラーとなる</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> jsonString <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span>

  <span class="token keyword">const</span> deserialized<span class="token operator">:</span> Data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deserialized<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li>シリアライズ後のjsonを見ると、<code>undefined</code>定義した項目は除外されている。</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;nullable_string1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nullable_string2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nullable_string3&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nullable_num1&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nullable_num2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nullable_num3&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>デシリアライズ後のオブジェクトを見ると、json の項目が<code>null</code> の場合にのみ<code>null</code> として保持されており、項目のない場合と区別されている。</li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>nullable_string1<span class="token operator">:</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">;</span>
nullable_string2<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
nullable_string3<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
nullable_num1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
nullable_num2<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
nullable_num3<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details> <h4 id="参照リンク"><a href="#参照リンク" class="header-anchor">#</a> 参照リンク</h4> <ul><li><code>undefined</code> と <code>null</code> の使い方について詳細な解説は、<a href="https://future-architect.github.io/articles/20211028b/" target="_blank" rel="noopener noreferrer">技術ブログ記事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を参照されたい。</li> <li>OpenAPI 定義を DB 定義に対応させることにより、異なる API 間で整合のとれた処理設計をすることがのぞましい。DB 定義と OpenAPI 定義の対応例は、<a href="/coding-standards/documents/forOpenAPISpecification/reference/DB_OpenAPI_Mapping_Example.html">DB 定義と OpenAPI 定義のマッピング</a>を参照されたい。</li></ul> <h3 id="ファイル単位"><a href="#ファイル単位" class="header-anchor">#</a> ファイル単位</h3> <p>OpenAPI ドキュメントは単一のファイルで構成することも複数の分割されたファイルで構成することもできるが、<strong>複数のファイルに分割する</strong>ことを推奨する。<br>
理由は下記の通りである。</p> <ul><li><strong>APIごとに担当者を分けて設計する場合などに、複数人による編集によって意図しないコンフリクトが発生することを防ぐ。</strong></li> <li><strong>ファイルの肥大化による、可読性の低下を防ぐ。</strong></li></ul> <h4 id="分割方法の選定"><a href="#分割方法の選定" class="header-anchor">#</a> 分割方法の選定</h4> <p>開発方針やOpenAPIの使用用途に合わせて、都合の良いファイルの分割方法を採用する。例えば、以下のような方法がある。</p> <ol><li>APIごとに設計担当者を分けて、それぞれにOpenAPIを編集する場合は、APIの単位で分割する。</li> <li>テストツールとして <a href="https://github.com/stoplightio/prism" target="_blank" rel="noopener noreferrer">stoplightio/prism<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を使用する場合、テストケースごとにデータファイルを作成して、<code>examples</code> にファイルパスを指定する。</li></ol> <h4 id="サンプル説明"><a href="#サンプル説明" class="header-anchor">#</a> サンプル説明</h4> <p>分割方法1, 2の両方に当てはまる場合のサンプルを用いて説明する。<code>openapi.yaml</code> とディレクトリ構成は下の通り。サンプルの全量は <a href="./reference/divided_files_sample.zip">サンプルzip Download</a>からダウンロード可能。</p> <ul><li><p>機能単位（path, method単位）にディレクトリを作成して、それぞれの定義ファイルを格納する。ディレクトリ名は <code>{path}_{method}</code> とすると管理し易い。</p></li> <li><p><code>components</code> の <code>schemas</code> には、</p> <ul><li>API間で同じモデルを使用する場合は共通化して記載する（例えば、<code>Pet</code>）。</li> <li>各APIのリクエスト/リスポンスモデルの中で、モデルがネストする場合は、各モデルの単位で書き出す（例えば、<code>PetDetail</code>, <code>Pedigree</code>）。</li> <li>※schemasのモデルの中身は別ファイルに定義が可能だが、大本のopenapi.yamlにも命名のみ定義が必要。openapi.yamlの定義が無いとswaggerUIで確認した際にschemas定義が見えなくなってしまう。</li></ul> <details open="open"><summary>ファイル分割例： openapi.yaml</summary> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">openapi</span><span class="token punctuation">:</span> <span class="token string">&quot;3.0.3&quot;</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
    <span class="token key atrule">title</span><span class="token punctuation">:</span> Swagger Petstore
    <span class="token key atrule">license</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> MIT
  <span class="token key atrule">servers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//petstore.swagger.io/v1
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pets
      <span class="token key atrule">description</span><span class="token punctuation">:</span> Everything about your Pets
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token key atrule">/pets</span><span class="token punctuation">:</span>
      <span class="token key atrule">get</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./pets_get/pets_get.yaml#/operation&quot;</span>
      <span class="token key atrule">post</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./pets_post/pets_post.yaml#/operation&quot;</span>
    /pets/<span class="token punctuation">{</span>petId<span class="token punctuation">}</span><span class="token punctuation">:</span>
      <span class="token key atrule">get</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./pets-pet-id_get/pets-pet-id_get.yaml#/operation&quot;</span>
  <span class="token key atrule">components</span><span class="token punctuation">:</span>
    <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
      <span class="token key atrule">PetDetail</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./pets-pet-id_get/pets-pet-id_get.yaml#/components/schemas/PetDetail&quot;</span>
      <span class="token key atrule">Pedigree</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./pets-pet-id_get/pets-pet-id_get.yaml#/components/schemas/Pedigree&quot;</span>
      <span class="token key atrule">Pet</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./common/pet.yaml&quot;</span>
      <span class="token key atrule">Error</span><span class="token punctuation">:</span>
        <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./common/error.yaml&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></details> <details open="open"><summary>ファイル分割例： ディレクトリ構成</summary> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>  ├─openapi.gen.yaml
  ├─openapi.yaml
  │
  ├─common
  │  ├─error.yaml
  │  └─pet.yaml
  │
  ├─pets-pet-id_get
  │  ├─pets-pet-id_get.yaml
  │  └─examples
  │         └─res_example1.yaml
  │
  ├─pets_get
  │  ├─pets_get.yaml
  │  └─examples
  │         ├─res_example1.yaml
  │         └─res_example2.yaml
  │
  └─pets_post
      ├─pets_post.yaml
      └─examples
            └─req_example1.yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></details></li> <li><p><code>openapi.yaml</code> の <code>paths</code> に記載したAPIファイルは以下のように作成する。</p></li> <li><p>複数API間に共通のモデルについては <code>openapi.yaml</code> に指定したキー（<code>../openapi.yaml#/components/schemas/Pet</code>）を参照する。</p></li> <li><p><code>examples</code> には、各APIのテストケースIDをキーとして指定（<code>ResExample1</code>）し、<code>value</code> に該当するテストケースのデータファイルパスを指定（<code>./examples/res_example1.yaml</code>）する。ファイル名は、指定したキーをスネークケースに変換したものを使用するとよい。</p> <details open="open"><summary>API別ファイルの記載例： pets-pet-id_get.yaml</summary> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token key atrule">operation</span><span class="token punctuation">:</span>
    <span class="token key atrule">operationId</span><span class="token punctuation">:</span> get<span class="token punctuation">-</span>pets<span class="token punctuation">-</span>pet<span class="token punctuation">-</span>id
    <span class="token key atrule">summary</span><span class="token punctuation">:</span> Details for a pet
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> pets
    <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> petId
        <span class="token key atrule">in</span><span class="token punctuation">:</span> path
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> The id of the pet to retrieve
        <span class="token key atrule">schema</span><span class="token punctuation">:</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token key atrule">responses</span><span class="token punctuation">:</span>
      <span class="token key atrule">&quot;200&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> Expected response to a valid request
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/responses/ResPetsPetIdGet&quot;</span>
            <span class="token key atrule">examples</span><span class="token punctuation">:</span>
              <span class="token key atrule">ResExample1</span><span class="token punctuation">:</span>
                <span class="token key atrule">value</span><span class="token punctuation">:</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;./examples/res_example1.yaml&quot;</span>
      <span class="token key atrule">&quot;404&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> not found error
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;../openapi.yaml#/components/schemas/Error&quot;</span>
      <span class="token key atrule">&quot;500&quot;</span><span class="token punctuation">:</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> unexpected error
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;../openapi.yaml#/components/schemas/Error&quot;</span>
  <span class="token key atrule">components</span><span class="token punctuation">:</span>
    <span class="token key atrule">schemas</span><span class="token punctuation">:</span>
      <span class="token key atrule">PetDetail</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span>
          <span class="token key atrule">breeder</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">date_of_birth</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> date
          <span class="token key atrule">pedigree</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/Pedigree&quot;</span>
      <span class="token key atrule">Pedigree</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> registration_no
        <span class="token punctuation">-</span> date_of_registration
        <span class="token punctuation">-</span> pedigree_image
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span>
          <span class="token key atrule">registration_no</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
          <span class="token key atrule">date_of_registration</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
            <span class="token key atrule">format</span><span class="token punctuation">:</span> date
          <span class="token key atrule">pedigree_image</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
    <span class="token key atrule">responses</span><span class="token punctuation">:</span>
      <span class="token key atrule">ResPetsPetIdGet</span><span class="token punctuation">:</span>
        <span class="token key atrule">required</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pet
        <span class="token punctuation">-</span> pet_detail
        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
        <span class="token key atrule">properties</span><span class="token punctuation">:</span>
          <span class="token key atrule">pet</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;../common/pet.yaml&quot;</span>
          <span class="token key atrule">pet_detail</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/components/schemas/PetDetail&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div></details></li> <li><p>OpenAPIの使用用途により、分割ファイルを1つのファイルにまとめる必要がある場合には、例えば<a href="https://apitools.dev/swagger-cli/" target="_blank" rel="noopener noreferrer">swagger-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を使用して以下コマンドを実行する。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>swagger-cli bundle openapi.yaml <span class="token parameter variable">--outfile</span> openapi.gen.yaml <span class="token parameter variable">--type</span> yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details><summary>ファイルBundle後： openapi.gen.yaml</summary> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">openapi</span><span class="token punctuation">:</span> 3.0.3
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
  <span class="token key atrule">title</span><span class="token punctuation">:</span> Swagger Petstore
  <span class="token key atrule">license</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> MIT
<span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">'http://petstore.swagger.io/v1'</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> pets
    <span class="token key atrule">description</span><span class="token punctuation">:</span> Everything about your Pets
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/pets</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> List all pets
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> get<span class="token punctuation">-</span>pets
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pets
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> limit
          <span class="token key atrule">in</span><span class="token punctuation">:</span> query
          <span class="token key atrule">description</span><span class="token punctuation">:</span> How many items to return at one time (max 100)
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
            <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
            <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> A paged array of pets
          <span class="token key atrule">headers</span><span class="token punctuation">:</span>
            <span class="token key atrule">x-next</span><span class="token punctuation">:</span>
              <span class="token key atrule">description</span><span class="token punctuation">:</span> A link to the next page of responses
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> array
                <span class="token key atrule">maxItems</span><span class="token punctuation">:</span> <span class="token number">100</span>
                <span class="token key atrule">items</span><span class="token punctuation">:</span>
                  <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                  <span class="token key atrule">required</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> id
                    <span class="token punctuation">-</span> name
                    <span class="token punctuation">-</span> category
                    <span class="token punctuation">-</span> age
                    <span class="token punctuation">-</span> sex
                  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                    <span class="token key atrule">id</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                      <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
                    <span class="token key atrule">name</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">50</span>
                    <span class="token key atrule">category</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">10</span>
                    <span class="token key atrule">sub_category</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">50</span>
                    <span class="token key atrule">age</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                      <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
                    <span class="token key atrule">sex</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">6</span>
                    <span class="token key atrule">note</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">200</span>
                    <span class="token key atrule">tag</span><span class="token punctuation">:</span>
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">20</span>
              <span class="token key atrule">examples</span><span class="token punctuation">:</span>
                <span class="token key atrule">ResExample1</span><span class="token punctuation">:</span>
                  <span class="token key atrule">value</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10001</span>
                      <span class="token key atrule">name</span><span class="token punctuation">:</span> ToyPoodle
                      <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                      <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> ToyPoodle
                      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                      <span class="token key atrule">sex</span><span class="token punctuation">:</span> male
                      <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                      <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10001
                    <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10002</span>
                      <span class="token key atrule">name</span><span class="token punctuation">:</span> Chihuahua
                      <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                      <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> Chihuahua
                      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                      <span class="token key atrule">sex</span><span class="token punctuation">:</span> female
                      <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                      <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10002
                    <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10003</span>
                      <span class="token key atrule">name</span><span class="token punctuation">:</span> Shiba
                      <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                      <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> Shiba
                      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                      <span class="token key atrule">sex</span><span class="token punctuation">:</span> male
                      <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                      <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10003
                    <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10004</span>
                      <span class="token key atrule">name</span><span class="token punctuation">:</span> MiniatureDachshund
                      <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                      <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> MiniatureDachshund
                      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                      <span class="token key atrule">sex</span><span class="token punctuation">:</span> female
                      <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                      <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10004
                <span class="token key atrule">ResExample2</span><span class="token punctuation">:</span>
                  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> not found error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">required</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> code
                  <span class="token punctuation">-</span> message
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">code</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                    <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
                  <span class="token key atrule">message</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">'500'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> unexpected error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/404/content/application~1json/schema'</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Register a pet
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> post<span class="token punctuation">-</span>pets
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pets
      <span class="token key atrule">requestBody</span><span class="token punctuation">:</span>
        <span class="token key atrule">content</span><span class="token punctuation">:</span>
          <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
            <span class="token key atrule">schema</span><span class="token punctuation">:</span>
              <span class="token key atrule">required</span><span class="token punctuation">:</span>
                <span class="token punctuation">-</span> pet
              <span class="token key atrule">type</span><span class="token punctuation">:</span> object
              <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                <span class="token key atrule">pet</span><span class="token punctuation">:</span>
                  <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/200/content/application~1json/schema/items'</span>
            <span class="token key atrule">examples</span><span class="token punctuation">:</span>
              <span class="token key atrule">ReqExample1</span><span class="token punctuation">:</span>
                <span class="token key atrule">value</span><span class="token punctuation">:</span>
                  <span class="token key atrule">pet</span><span class="token punctuation">:</span>
                    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10005</span>
                    <span class="token key atrule">name</span><span class="token punctuation">:</span> FrenchBulldog
                    <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                    <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> FrenchBulldog
                    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                    <span class="token key atrule">sex</span><span class="token punctuation">:</span> male
                    <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                    <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10005
        <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'201'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Null response
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> not found error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/404/content/application~1json/schema'</span>
        <span class="token key atrule">'500'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> unexpected error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/404/content/application~1json/schema'</span>
  <span class="token key atrule">'/pets/{petId}'</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> Details for a pet
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> get<span class="token punctuation">-</span>pets<span class="token punctuation">-</span>pet<span class="token punctuation">-</span>id
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> pets
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> petId
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> The id of the pet to retrieve
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">'200'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Expected response to a valid request
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">required</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> pet
                  <span class="token punctuation">-</span> pet_detail
                <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                  <span class="token key atrule">pet</span><span class="token punctuation">:</span>
                    <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/200/content/application~1json/schema/items'</span>
                  <span class="token key atrule">pet_detail</span><span class="token punctuation">:</span>
                    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                      <span class="token key atrule">breeder</span><span class="token punctuation">:</span>
                        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                      <span class="token key atrule">date_of_birth</span><span class="token punctuation">:</span>
                        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                        <span class="token key atrule">format</span><span class="token punctuation">:</span> date
                      <span class="token key atrule">pedigree</span><span class="token punctuation">:</span>
                        <span class="token key atrule">required</span><span class="token punctuation">:</span>
                          <span class="token punctuation">-</span> registration_no
                          <span class="token punctuation">-</span> date_of_registration
                          <span class="token punctuation">-</span> pedigree_image
                        <span class="token key atrule">type</span><span class="token punctuation">:</span> object
                        <span class="token key atrule">properties</span><span class="token punctuation">:</span>
                          <span class="token key atrule">registration_no</span><span class="token punctuation">:</span>
                            <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
                            <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
                          <span class="token key atrule">date_of_registration</span><span class="token punctuation">:</span>
                            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                            <span class="token key atrule">format</span><span class="token punctuation">:</span> date
                          <span class="token key atrule">pedigree_image</span><span class="token punctuation">:</span>
                            <span class="token key atrule">type</span><span class="token punctuation">:</span> string
              <span class="token key atrule">examples</span><span class="token punctuation">:</span>
                <span class="token key atrule">ResExample1</span><span class="token punctuation">:</span>
                  <span class="token key atrule">value</span><span class="token punctuation">:</span>
                    <span class="token key atrule">pet</span><span class="token punctuation">:</span>
                      <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">10001</span>
                      <span class="token key atrule">name</span><span class="token punctuation">:</span> ToyPoodle
                      <span class="token key atrule">category</span><span class="token punctuation">:</span> dog
                      <span class="token key atrule">sub_category</span><span class="token punctuation">:</span> ToyPoodle
                      <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">1</span>
                      <span class="token key atrule">sex</span><span class="token punctuation">:</span> male
                      <span class="token key atrule">note</span><span class="token punctuation">:</span> friendly
                      <span class="token key atrule">tag</span><span class="token punctuation">:</span> dog10001
                    <span class="token key atrule">pet_detail</span><span class="token punctuation">:</span>
                      <span class="token key atrule">breeder</span><span class="token punctuation">:</span> BreederName
                      <span class="token key atrule">date_of_birth</span><span class="token punctuation">:</span> <span class="token string">'2023-10-31'</span>
                      <span class="token key atrule">pedigree</span><span class="token punctuation">:</span>
                        <span class="token key atrule">registration_no</span><span class="token punctuation">:</span> <span class="token number">11111111</span>
                        <span class="token key atrule">date_of_registration</span><span class="token punctuation">:</span> <span class="token string">'2023-10-31'</span>
                        <span class="token key atrule">pedigree_image</span><span class="token punctuation">:</span> 9j2wBDAA<span class="token punctuation">...</span>8QAPxAAAQQABAMGBAYDAAEDAg
        <span class="token key atrule">'404'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> not found error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/404/content/application~1json/schema'</span>
        <span class="token key atrule">'500'</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> unexpected error
          <span class="token key atrule">content</span><span class="token punctuation">:</span>
            <span class="token key atrule">application/json</span><span class="token punctuation">:</span>
              <span class="token key atrule">schema</span><span class="token punctuation">:</span>
                <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">'#/paths/~1pets/get/responses/404/content/application~1json/schema'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br></div></div></details></li></ul> <hr> <h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p><a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" rel="noopener noreferrer"><img src="https://licensebuttons.net/l/by/4.0/88x31.png" alt="CC-By-4.0"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/future-architect/coding-standards/edit/master/documents/forOpenAPISpecification/OpenAPI_Specification_3.0.3.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2024/2/1 5:10:43</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/coding-standards/assets/js/app.43ae47b4.js" defer></script><script src="/coding-standards/assets/js/2.549b8794.js" defer></script><script src="/coding-standards/assets/js/1.9e6a74dc.js" defer></script><script src="/coding-standards/assets/js/35.3b7961dd.js" defer></script><script src="/coding-standards/assets/js/19.25b9c7af.js" defer></script>
  </body>
</html>
