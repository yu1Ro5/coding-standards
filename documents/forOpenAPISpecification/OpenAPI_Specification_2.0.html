<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenAPI Specification 2.0規約 | Future Enterprise Coding Standards</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="フューチャー株式会社が作成するエンタープライズ領域に特化したコーディング規約">
    <meta name="keywords" content="OpenAPI,Swagger,命名規約,コーディング規約">
    
    <link rel="preload" href="/coding-standards/assets/css/0.styles.cfedf5f7.css" as="style"><link rel="preload" href="/coding-standards/assets/js/app.43ae47b4.js" as="script"><link rel="preload" href="/coding-standards/assets/js/2.549b8794.js" as="script"><link rel="preload" href="/coding-standards/assets/js/1.9e6a74dc.js" as="script"><link rel="preload" href="/coding-standards/assets/js/34.3862c893.js" as="script"><link rel="preload" href="/coding-standards/assets/js/19.25b9c7af.js" as="script"><link rel="prefetch" href="/coding-standards/assets/js/10.82ddfb1c.js"><link rel="prefetch" href="/coding-standards/assets/js/11.6d7d333a.js"><link rel="prefetch" href="/coding-standards/assets/js/12.371c59c9.js"><link rel="prefetch" href="/coding-standards/assets/js/13.54cfe61c.js"><link rel="prefetch" href="/coding-standards/assets/js/14.61d7b701.js"><link rel="prefetch" href="/coding-standards/assets/js/15.95348d60.js"><link rel="prefetch" href="/coding-standards/assets/js/16.d22b5283.js"><link rel="prefetch" href="/coding-standards/assets/js/17.7965d2de.js"><link rel="prefetch" href="/coding-standards/assets/js/18.b324cd55.js"><link rel="prefetch" href="/coding-standards/assets/js/20.260217cb.js"><link rel="prefetch" href="/coding-standards/assets/js/21.b0b92173.js"><link rel="prefetch" href="/coding-standards/assets/js/22.a80d90dc.js"><link rel="prefetch" href="/coding-standards/assets/js/23.a442d8ef.js"><link rel="prefetch" href="/coding-standards/assets/js/24.ced06bbf.js"><link rel="prefetch" href="/coding-standards/assets/js/25.9c8f46ce.js"><link rel="prefetch" href="/coding-standards/assets/js/26.31b8f551.js"><link rel="prefetch" href="/coding-standards/assets/js/27.e4297260.js"><link rel="prefetch" href="/coding-standards/assets/js/28.1e97c8a6.js"><link rel="prefetch" href="/coding-standards/assets/js/29.b03a32bc.js"><link rel="prefetch" href="/coding-standards/assets/js/3.e73e5949.js"><link rel="prefetch" href="/coding-standards/assets/js/30.29228a2a.js"><link rel="prefetch" href="/coding-standards/assets/js/31.ed4444e8.js"><link rel="prefetch" href="/coding-standards/assets/js/32.d4b4d1ff.js"><link rel="prefetch" href="/coding-standards/assets/js/33.d1605a15.js"><link rel="prefetch" href="/coding-standards/assets/js/35.3b7961dd.js"><link rel="prefetch" href="/coding-standards/assets/js/36.3d5014fc.js"><link rel="prefetch" href="/coding-standards/assets/js/37.4dade07c.js"><link rel="prefetch" href="/coding-standards/assets/js/38.a054a2d6.js"><link rel="prefetch" href="/coding-standards/assets/js/39.c2c608a3.js"><link rel="prefetch" href="/coding-standards/assets/js/4.690796cf.js"><link rel="prefetch" href="/coding-standards/assets/js/40.4e3acf01.js"><link rel="prefetch" href="/coding-standards/assets/js/41.53bb6af3.js"><link rel="prefetch" href="/coding-standards/assets/js/42.5b3f0fc9.js"><link rel="prefetch" href="/coding-standards/assets/js/43.22aee325.js"><link rel="prefetch" href="/coding-standards/assets/js/5.1616f7bc.js"><link rel="prefetch" href="/coding-standards/assets/js/6.70b9abe7.js"><link rel="prefetch" href="/coding-standards/assets/js/7.4ef291e5.js"><link rel="prefetch" href="/coding-standards/assets/js/vendors~docsearch.1bff6fe0.js">
    <link rel="stylesheet" href="/coding-standards/assets/css/0.styles.cfedf5f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coding-standards/" class="home-link router-link-active"><img src="/coding-standards/images/logo.svg" alt="Future Enterprise Coding Standards" class="logo"> <span class="site-name can-hide">Future Enterprise Coding Standards</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">
  For Java17
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_11.html" class="nav-link">
  For Java11
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">
  For Java8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SQL" class="dropdown-title"><span class="title">SQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="SQL" class="mobile-dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">
  For Oracle
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（PostgreSQL）.html" class="nav-link">
  For PostgreSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          AWS インフラリソース
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/AWSインフラリソース命名規約.html" class="nav-link">
  AWSインフラ命名規約
</a></li></ul></li><li class="dropdown-item"><h4>
          OpenAPI Specification規約
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/" class="nav-link router-link-active">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  For OAS 2.0（Swagger 2.0）
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About Us" class="dropdown-title"><span class="title">About Us</span> <span class="arrow down"></span></button> <button type="button" aria-label="About Us" class="mobile-dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <!----></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約.html" class="nav-link">
  For Java17
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_11.html" class="nav-link">
  For Java11
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forJava/Javaコーディング規約_for_8.html" class="nav-link">
  For Java8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SQL" class="dropdown-title"><span class="title">SQL</span> <span class="arrow down"></span></button> <button type="button" aria-label="SQL" class="mobile-dropdown-title"><span class="title">SQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（Oracle）.html" class="nav-link">
  For Oracle
</a></li><li class="dropdown-item"><!----> <a href="/coding-standards/documents/forSQL/SQLコーディング規約（PostgreSQL）.html" class="nav-link">
  For PostgreSQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          AWS インフラリソース
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/" class="nav-link">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forAWSResource/AWSインフラリソース命名規約.html" class="nav-link">
  AWSインフラ命名規約
</a></li></ul></li><li class="dropdown-item"><h4>
          OpenAPI Specification規約
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/" class="nav-link router-link-active">
  Home
</a></li><li class="dropdown-subitem"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  For OAS 2.0（Swagger 2.0）
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About Us" class="dropdown-title"><span class="title">About Us</span> <span class="arrow down"></span></button> <button type="button" aria-label="About Us" class="mobile-dropdown-title"><span class="title">About Us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.future.co.jp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  フューチャー株式会社
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://future-architect.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://qiita.com/organizations/future" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Qiita
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/future_techblog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/future.saiyo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:techblog@future.co.jp" class="nav-link external">
  Email &lt;techblog@future.co.jp&gt;
  <!----></a></li></ul></div></div> <a href="https://github.com/future-architect/coding-standards" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/coding-standards/documents/forOpenAPISpecification/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" aria-current="page" class="active sidebar-link">OpenAPI Specification 2.0規約</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#はじめに" class="sidebar-link">はじめに</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#ファイルフォーマット" class="sidebar-link">ファイルフォーマット</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#要素規約" class="sidebar-link">要素規約</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#swagger" class="sidebar-link">swagger</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#info" class="sidebar-link">info</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#host" class="sidebar-link">host</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#basepath" class="sidebar-link">basePath</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#schemes" class="sidebar-link">schemes</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#security-securitydefinitions" class="sidebar-link">security, securityDefinitions</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#produces" class="sidebar-link">produces</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#consumes" class="sidebar-link">consumes</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#tags" class="sidebar-link">tags</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#paths" class="sidebar-link">paths</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#definitions" class="sidebar-link">definitions</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#バリデーションについて" class="sidebar-link">バリデーションについて</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#ファイルアップロード" class="sidebar-link">ファイルアップロード</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#ファイルダウンロード" class="sidebar-link">ファイルダウンロード</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#opentelemetry-traceparent-http-header" class="sidebar-link">OpenTelemetry Traceparent HTTP Header</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#api-のバージョン管理" class="sidebar-link">API のバージョン管理</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#ファイル単位" class="sidebar-link">ファイル単位</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#推奨ツール" class="sidebar-link">推奨ツール</a></li><li class="sidebar-sub-header"><a href="/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html#license" class="sidebar-link">License</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="vuepress-page-title" data-v-f2a2eba4><div class="share-buttons" data-v-f2a2eba4><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" data-url="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" data-show-count="false" class="twitter-share-button" data-v-f2a2eba4>
      Tweet
    </a> <div data-href="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true" class="fb-like" data-v-f2a2eba4></div> <a href="http://b.hatena.ne.jp/entry/s/future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加" class="hatena-bookmark-button" data-v-f2a2eba4><img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none" data-v-f2a2eba4></a> <div href="https://github.com/future-architect/coding-standards" data-icon="octicon-star" data-show-count="true" aria-label="Star future-architect/coding-standards on GitHub" data-v-f2a2eba4>
      Star
    </div> <a href="https://getpocket.com/save" data-lang="en" data-save-url="https://future-architect.github.io/coding-standards/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.html" data-pocket-count="horizontal" data-pocket-align="left" class="pocket-btn" data-v-f2a2eba4>Pocket</a></div> <h1 class="vuepress-page-title__title" data-v-f2a2eba4>
    OpenAPI Specification 2.0規約
  </h1> <div class="vuepress-page-title__author" data-v-f2a2eba4>
    フューチャー株式会社
  </div></div> <p>本コーディング規約は、世の中のシステム開発プロジェクトのために無償で提供致します。
ただし、掲載内容および利用に際して発生した問題、それに伴う損害については、フューチャー株式会社は一切の責務を負わないものとします。
また、掲載している情報は予告なく変更することがございますので、あらかじめご了承下さい。</p> <h2 id="はじめに"><a href="#はじめに" class="header-anchor">#</a> はじめに</h2> <p><a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md" target="_blank" rel="noopener noreferrer">OpenAPI Specification 2.0（Swagger, OAS2）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>定義についてのコーディング規約をまとめます。より新しいバージョンとして OAS 3.0.3 規約（作成中）がありますので、ご注意ください。</p> <p>本規約の<a href="/coding-standards/documents/forOpenAPISpecification/prerequisite.html">前提条件</a>に従い作成されています。ToC向けのLSUDs（Large Set of Unknown Developers）なWeb APIにはマッチしない可能性があります。</p> <p>Web API自体の設計については範囲外としますが、<a href="/coding-standards/documents/forOpenAPISpecification/API_Design.html">API 設計標準</a>に利用するステータスコードなどは記載しています。</p> <h3 id="ファイルフォーマット"><a href="#ファイルフォーマット" class="header-anchor">#</a> ファイルフォーマット</h3> <p><a href="/coding-standards/documents/forOpenAPISpecification/file_standards.html">ファイルフォーマット規約</a>に準じる。</p> <h3 id="要素規約"><a href="#要素規約" class="header-anchor">#</a> 要素規約</h3> <p>Swagger の基本構造は以下の、swagger・info・host・basePath・schemes・paths・definitions から構成される。</p> <p>要素の並び順は、原則 <a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md" target="_blank" rel="noopener noreferrer">OpenAPI Specification 2.0（Swagger, OAS2）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> に記載された順番に記載する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">swagger</span><span class="token punctuation">:</span> <span class="token string">&quot;2.0&quot;</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> サンプルAPI
  <span class="token key atrule">description</span><span class="token punctuation">:</span> サンプルAPIはシステムにおけるユーザーのアカウント、契約、支払い、注文履歴などを管理できます
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
<span class="token key atrule">host</span><span class="token punctuation">:</span> api.example.com
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">schemes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> https
<span class="token key atrule">consumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application/json
<span class="token key atrule">produces</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application/json
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user
    <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザー
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> user
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> API<span class="token punctuation">-</span>001 ユーザーアカウント取得
      <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーのアカウント情報を取得します
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUserAccount
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user_id
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">pattern</span><span class="token punctuation">:</span> ^<span class="token punctuation">[</span>0<span class="token punctuation">-</span>9a<span class="token punctuation">-</span>zA<span class="token punctuation">-</span>Z_<span class="token punctuation">-</span><span class="token punctuation">]</span><span class="token important">*$</span>
          <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
          <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録時に設定されたユーザーID
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">&quot;200&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/UserAccount&quot;</span>
        <span class="token key atrule">&quot;400&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> パラメータ不正
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;404&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> リソースが存在しない
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;500&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 内部エラー
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> その他予期せぬエラー
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
<span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserAccount</span><span class="token punctuation">:</span>
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>user_id<span class="token punctuation">,</span> user_name<span class="token punctuation">,</span> account_type<span class="token punctuation">,</span> register_at<span class="token punctuation">]</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">user_id</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーID
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 32AB1aaad100eavV
      <span class="token key atrule">user_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザー名
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">128</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 未来太郎
      <span class="token key atrule">account_type</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> アカウント種別(1<span class="token punctuation">:</span>ゲスト 2<span class="token punctuation">:</span>登録済み 3<span class="token punctuation">:</span>プレミアム 4<span class="token punctuation">:</span>管理者)
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
      <span class="token key atrule">register_at</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録日時
        <span class="token key atrule">format</span><span class="token punctuation">:</span> date<span class="token punctuation">-</span>time
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;2023-04-01T11:30:45.000Z&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h3 id="swagger"><a href="#swagger" class="header-anchor">#</a> swagger</h3> <ul><li><code>2.0</code> 固定とする</li></ul> <h3 id="info"><a href="#info" class="header-anchor">#</a> info</h3> <p>info オブジェクトには Web API に関するメタデータを記載する。
<code>title</code>, <code>description</code>, <code>version</code> を必須項目とする。</p> <table><thead><tr><th>フィールド名</th> <th style="text-align:center;">必須</th> <th>記載内容</th></tr></thead> <tbody><tr><td>title</td> <td style="text-align:center;">○</td> <td>Web API の総称</td></tr> <tr><td>description</td> <td style="text-align:center;">○</td> <td>Web API の簡単な説明</td></tr> <tr><td>version</td> <td style="text-align:center;">○</td> <td>OpenAPI ドキュメントのバージョン</td></tr> <tr><td>termsOfService</td> <td style="text-align:center;"></td> <td>利用規約の URL</td></tr> <tr><td>contact</td> <td style="text-align:center;"></td> <td>連絡先情報</td></tr> <tr><td>license</td> <td style="text-align:center;"></td> <td>ライセンス情報</td></tr></tbody></table> <h4 id="title"><a href="#title" class="header-anchor">#</a> title</h4> <p>WebAPI の総称を記載する。システム名やサービス名 + API のような命名とすることを推奨する。
例. <code>X System API</code></p> <h4 id="desctiption"><a href="#desctiption" class="header-anchor">#</a> desctiption</h4> <p>Web API が提供する機能の概要・想定する利用者やユースケース・制約などを記載する。</p> <h4 id="version"><a href="#version" class="header-anchor">#</a> version</h4> <p>この API 仕様のドキュメントのバージョンを記載する。アプリケーションのバージョン（git tag やリリースで管理するようなバージョン）とは別である。</p> <p>本規約の推奨は <code>major.minor</code> 形式である。 <code>0.1</code>固定で開発を進め、サービスのリリース時に <code>1.0</code> とし、その後の項目やオプション、パスの追加ごとに <code>1.1</code> などインクリメントしていく。もし他チームへのドキュメントの頻繁な共有が必要だれば、<code>1.0</code> のかわりに <code>2023.03.26</code> といった形式も許容する。</p> <h3 id="host"><a href="#host" class="header-anchor">#</a> host</h3> <p>OpenAPI 3 系と異なり、 <strong>Swagger では複数のホストを指定できない</strong>。そのため host には開発環境（local, develop, staging, production というステージ区別であれば、develop）で用いる IP、ポート番号を指定する。他チームに提供するサンドボックス環境を用意する場合は、そのエンドポイントを指定しても良い。localhost などのローカル開発への向き先変更は、ツール側で対応している事が多く上書き可能なため記載しない。API 定義書は予期せぬタイミングで他チームに展開する必要がしばしばあり、お試しで触っても良い環境があることを示すことで情報量を増やし、円滑なコミュニケーションを促進することを狙いとする。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> dev.api.example.com<span class="token punctuation">:</span><span class="token number">80</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> sandbox.api.example.com<span class="token punctuation">:</span><span class="token number">80</span>

<span class="token comment"># NG（ローカル開発で用いる環境を指定する）</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8001</span>

<span class="token comment"># NG（LSUDs向けのWeb API開発では不用意に本番環境を触られたくないときが多く、避けるべきである）</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> prod.api.example.com<span class="token punctuation">:</span><span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="basepath"><a href="#basepath" class="header-anchor">#</a> basePath</h3> <p>作成する Swagger 定義の URL パスの全てで、共通するプレフィックスを持つ場合に指定する。Swagger の仕様上、先頭には <code>/</code> が必須であるため、以下のように定義する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK</span>
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> /v1
<span class="token key atrule">basePAth</span><span class="token punctuation">:</span> /api/v2

<span class="token comment"># NG</span>
<span class="token key atrule">basePath</span><span class="token punctuation">:</span> v2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="schemes"><a href="#schemes" class="header-anchor">#</a> schemes</h3> <p>最終的に利用するスキーマのみを記載する。通常、HTTP 通信での Web API 提供は行わないと考えられるため、 <code>https</code> 固定で設定する。ローカル開発では <code>http</code> を指定することも多いが、ツールで生成されたコードのオプションで通常書き換えが可能なため、<code>http</code> の併記は許可しない。ただし、サーバサイドのマイクロサービス同士の通信で、VPC（プライベートセグメント）内であり、SSL 通信を本当に利用しない場合は <code>http</code> と記載する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK</span>
<span class="token key atrule">schemes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> https

<span class="token comment"># NG（httpの指定は通常、Web APIサーバアプリケーションの開発時を除いて不要であるためわざわざ追加しない）</span>
<span class="token key atrule">schemes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> http
  <span class="token punctuation">-</span> https
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>もし、WebSocket スキームを提供するサービスの定義である場合は、<code>wss</code> を（追加で）指定する。定義上は <code>https</code> 側との共存ができないため、ファイル定義を分けるようにする。</p> <h3 id="security-securitydefinitions"><a href="#security-securitydefinitions" class="header-anchor">#</a> security, securityDefinitions</h3> <p>Swagger では、次の認証タイプを記載できる（<a href="https://swagger.io/docs/specification/2-0/authentication/" target="_blank" rel="noopener noreferrer">詳細<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。</p> <ol><li>ベーシック認証</li> <li>API キー（リクエストヘッダ, クエリパラメータ）</li> <li>OAuth2</li></ol> <p>もし、認証が必須であれば記載する。全ての Web API で未認証を受け入れる場合は記載しない。認証の要否が API ごとに異なる場合は、各 API 側で <code>security: []</code> と記載しして上書き定義する必要がある。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK</span>
<span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> oauth2
    <span class="token key atrule">flow</span><span class="token punctuation">:</span> accessCode
    <span class="token key atrule">authorizationUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/authorize
    <span class="token key atrule">tokenUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.com/.well<span class="token punctuation">-</span>known/jwks.json

<span class="token comment"># OK（OAuth2認証ありの場合）</span>
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">security</span><span class="token punctuation">:</span>      <span class="token comment"># 認証が不要な場合は security: [] と記載する</span>
        <span class="token punctuation">-</span> <span class="token key atrule">OAuth2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="produces"><a href="#produces" class="header-anchor">#</a> produces</h3> <p>Web API が応答する際の MIME タイプを指定します。未指定の場合に、コード生成などツール側で予期しない動作をすることがあるため、固定で指定する。新規構築の Web API であれば <code>application/xml</code> は不要と通常は考えられるので、<code>application/json</code> を記載する。また、<a href="https://www.rfc-editor.org/rfc/rfc7807" target="_blank" rel="noopener noreferrer">RFC 7807 Problem Details for HTTP APIs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> では Content-Type に <code>application/problem+json</code> を設定するとあるが、一部のコード生成ツールにおいて、 <code>application/problem</code> と <code>application/problem+json</code> の使い分けが難しいため、併記を必須としない。OpenAPI Specification の 3 系ではステータスコードごとに Content-Type を指定できるため、3 系への移行も検討する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK（applicaton/problem+json 無しでも良い）</span>
<span class="token key atrule">produces</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application/json

<span class="token comment"># OK（利用するツールで複数のContent-Typeの使い分けが実現しやすい場合は以下でも良い）</span>
<span class="token key atrule">produces</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application/json
  <span class="token punctuation">-</span> application/problem+json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ある API のみ、バイナリ（画像データなど）を返すなどのケースがあれば、 <code>paths</code> 配下で上書き指定する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/logo</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">summary</span><span class="token punctuation">:</span> API<span class="token punctuation">-</span>002 ロゴ画像を取得する
      <span class="token key atrule">description</span><span class="token punctuation">:</span> サービスのロゴ画像をpng形式で取得します
      <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getLogoImage
      <span class="token key atrule">produces</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> image/png
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">&quot;200&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> file
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="consumes"><a href="#consumes" class="header-anchor">#</a> consumes</h3> <p>Web API が要求を受け入れる際の MIME タイプを指定する。未指定の場合に、コード生成などツール側で予期しない動作をすることがあるため、固定で指定する。新規構築の Web API であれば <code>application/xml</code> は不要と通常は考えらえるので、<code>application/json</code> だけ記載する。</p> <p>仕様上、 <code>consumes</code> は POST, PUT, PATCH を利用した操作のみに影響し、GET などリクエストボディが無い操作では無視される。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># OK</span>
<span class="token key atrule">consumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application/json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="tags"><a href="#tags" class="header-anchor">#</a> tags</h3> <p>タグを用いて、API 操作をグループ化することができる。ドキュメントやツールにとって非常に重要であるため、 <strong>必須</strong> で指定する。</p> <ul><li>Swagger UI（HTML ドキュメント）の順序を制御できる
<ul><li>未指定の場合は、登場順で生成されてしまう</li></ul></li> <li>命名は、 <strong>単数形</strong> で、小文字かつ半角スペース区切り で記載する
<ul><li>コード生成で利用され、Go ではパッケージ名や TypeScript の Class 単位となるため、シンプルな命名にする</li> <li>HTML ドキュメントで参照する場合の可読性を上げるため、単語を半角スペース区切りとする</li></ul></li> <li>タグごとに <code>description</code> も必須で記載する</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># NG</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> product
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 製品
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> store
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 店舗
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user account
    <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーアカウント

<span class="token comment"># NG</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> products
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> stores
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user_account
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> UserAccount
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="paths"><a href="#paths" class="header-anchor">#</a> paths</h3> <p><code>paths</code> 配下に個々の API エンドポイントを記載する。</p> <p><code>paths</code> は根幹となる定義部分であり、以下のように重要な定義が続く。それぞれ重要な要素ごとに規約を示す。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Paths              <span class="token comment"># API定義全体</span>
  └ Path           <span class="token comment"># URLパス</span>
    └ Operation    <span class="token comment"># HTTPメソッド</span>
      ├ Parameter  <span class="token comment"># リクエストパラメータ</span>
      └ Responses  <span class="token comment"># レスポンス</span>
        └ Response <span class="token comment"># ステータスコードに応じたレスポンス</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="paths-path"><a href="#paths-path" class="header-anchor">#</a> Paths &gt; Path</h4> <p>記載順は以下のルールである。</p> <ul><li>トップレベルの <code>tags</code> でグルーピングした順番に記載する</li> <li>URL は短いものから並べる</li> <li>HTTP メソッドは、 head, get, post, put, patch, delete の順にする</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 並び順の例（HTTPメソッドの子要素はtags以外を省略）</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> user
  <span class="token punctuation">-</span> item
<span class="token key atrule">paths</span><span class="token punctuation">:</span>
  <span class="token key atrule">/users</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> user
      <span class="token punctuation">...</span>
  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> user
      <span class="token punctuation">...</span>
  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">patch</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> user
      <span class="token punctuation">...</span>
  <span class="token key atrule">/items</span><span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token key atrule">tags</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> item
      <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="paths-path-operation"><a href="#paths-path-operation" class="header-anchor">#</a> Paths &gt; Path &gt; Operation</h4> <p>URL に紐づく HTTP メソッドで、1 つの操作を定義します。</p> <ul><li><code>summary</code> <ul><li>API の操作概要を summary に記載する</li> <li>機能 ID があるのでれば、ここに記載する</li> <li>例: <code>API-001 ユーザアカウント取得</code></li></ul></li> <li><code>description</code> <ul><li>API の振る舞いの詳細や注意点（ある条件で区分の値が変わったり、権限についての注意、要素が空になるなど）を記載する</li></ul></li> <li><code>operationId</code> <ul><li>コード生成で利用される項目なので、必須で指定する</li> <li>原則、<code>camelCase</code> の <code>${HTTPメソッド}${機能物理名}</code> で記載する（例: getUser, postUser, deleteUser）
<ul><li>ただし、HTTP メソッドに紐づかない操作であれば、HTTP メソッドの代わりに個別の動詞（例: searchUser, moveItemList, addPermission）を当てはめる</li> <li>コード生成対象によっては、get_user（Python）、GetUser（Go）といった命名規約にしたくなるが、通常はコード生成側で配慮してくれる</li></ul></li></ul></li> <li><code>consumes</code>, <code>produces</code> <ul><li>トップレベルに <code>application/json</code> を記載しているため、同様であれば記載しない</li></ul></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">/users</span><span class="token punctuation">:</span>
  <span class="token key atrule">get</span><span class="token punctuation">:</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> user
    <span class="token key atrule">summary</span><span class="token punctuation">:</span> API<span class="token punctuation">-</span>001 ユーザーアカウント取得
    <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      ユーザーのアカウント情報を取得します。
      ログイン情報が不正の場合はアカウントが存在しても404を返すことがあります。
      アカウント種別については【別紙】X_定数一覧 を参照ください。</span>
    <span class="token key atrule">operationId</span><span class="token punctuation">:</span> getUser
    <span class="token key atrule">parameters</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
    <span class="token key atrule">responses</span><span class="token punctuation">:</span> <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="paths-path-parameter"><a href="#paths-path-parameter" class="header-anchor">#</a> Paths &gt; Path &gt; Parameter</h4> <p>リクエストの定義を記載する。</p> <ul><li><p><code>name</code></p> <ul><li><code>snake_case</code> で物理名を記載します</li> <li>HTTP メソッドが POST/PUT/HTTP の場合は <code>body</code> に固定する</li></ul></li> <li><p><code>in</code></p> <ul><li>仕様上、必須で <code>query</code>, <code>header</code>, <code>path</code>, <code>formData</code>, <code>body</code> のどれかを指定する</li> <li>HTTP メソッドが HEAD/GET/DELETE の場合
<ul><li><code>path</code>, <code>query</code> のみの利用を推奨する</li></ul></li> <li>HTTP メソッドが POST/PUT/HTTP の場合
<ul><li><code>body</code> のみの利用を推奨する</li></ul></li></ul></li> <li><p><code>required</code></p> <ul><li>必須の場合のみ記載する。デフォルト false であるため、任意項目の場合は記載しない</li> <li>POST, PUT で用いるリクエストボディに対しては、 <code>required: true</code> を必ず指定する
<ul><li>リクエストボディ自体が未指定だった場合、各項目の <code>required: true</code> を指定していてもサーバサイドのチェックが有効に働かないことがあるため</li></ul></li></ul></li> <li><p><code>pattern</code>, <code>minLength</code>, <code>maxLength</code> などの条件について</p> <ul><li><a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md#fixed-fields-7" target="_blank" rel="noopener noreferrer">https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md#fixed-fields-7<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を参考に、指定できる条件はなるべく細かく指定する</li></ul></li> <li><p><code>schema</code></p> <ul><li>リクエストボディは、<code>$ref</code> を用いて、<code>#/definitions</code> 配下に記載する。<strong>$ref を用いない記載は許可しない。</strong></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token comment"># OK</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> body
    <span class="token key atrule">in</span><span class="token punctuation">:</span> body
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/PutUserAccount&quot;</span>

  <span class="token comment"># NG</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> body
    <span class="token key atrule">in</span><span class="token punctuation">:</span> body
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>user_name<span class="token punctuation">,</span> account_type<span class="token punctuation">,</span> register_at<span class="token punctuation">,</span> point<span class="token punctuation">]</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">user_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token punctuation">...</span>
      <span class="token key atrule">account_type</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>モデル名は、 <code>{HTTPメソッド名}{物理名}</code> の PascalCase で記載する
<ul><li>例: PutUserAccount、PostUserAccount, PatchUserAccount</li></ul></li></ul></li> <li><p><code>desription</code></p> <ul><li>項目の論理名や補足説明を記載する</li></ul></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user_id
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">pattern</span><span class="token punctuation">:</span> ^<span class="token punctuation">[</span>0<span class="token punctuation">-</span>9a<span class="token punctuation">-</span>zA<span class="token punctuation">-</span>Z_<span class="token punctuation">-</span><span class="token punctuation">]</span><span class="token important">*$</span>
          <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
          <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録時に設定されたユーザーID
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
    <span class="token key atrule">put</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> user_id
          <span class="token key atrule">in</span><span class="token punctuation">:</span> path
          <span class="token key atrule">type</span><span class="token punctuation">:</span> string
          <span class="token key atrule">pattern</span><span class="token punctuation">:</span> ^<span class="token punctuation">[</span>0<span class="token punctuation">-</span>9a<span class="token punctuation">-</span>zA<span class="token punctuation">-</span>Z_<span class="token punctuation">-</span><span class="token punctuation">]</span><span class="token important">*$</span>
          <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
          <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録時に設定されたユーザーID
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> body
          <span class="token key atrule">in</span><span class="token punctuation">:</span> body
          <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/PutUserAccount&quot;</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="paths-path-responses"><a href="#paths-path-responses" class="header-anchor">#</a> Paths &gt; Path &gt; Responses</h4> <p>レスポンスの定義を記載する。</p> <ul><li><code>description</code> <ul><li>必須で記載する</li></ul></li> <li>ステータスコードは発生し得る全てのパターンを列挙する
<ul><li>正常系の <code>200 OK</code>、 <code>201 Created</code>、<code>202 Accepted</code> <code>204 No Content</code> 以外の、異常系も忘れず記載する</li> <li>通常発生しない、サーバサイドの内部的な予期せぬエラー <code>500 Internal Server Error</code> は必須で記載する</li> <li>リクエストパラメータが存在する場合は <code>400 Bad Request</code> が、認証がある場合は <code>401 Unauthorized</code> や <code>403 Forbiddend</code> が考えられる</li> <li><code>default</code> は必須で指定する
<ul><li>例えば、URL 自体が存在しない場合の <code>404 NotFound</code> や、提供していない HTTP メソッドを呼び出した場合に <code>405 Method Not Allowed</code> を、自動生成したサーバサイドの実装が返すことがある。この場合、 <code>default</code> を指定していないとフロントエンド側でパースエラーとなることがあるため。各 API エンドポイントのサーバサイド側の実装が応答しないコードは、 <code>default</code> でまとめて指定させる</li></ul></li></ul></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>  /users/<span class="token punctuation">{</span>user_id<span class="token punctuation">}</span>/account<span class="token punctuation">:</span>
    <span class="token key atrule">get</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">&quot;200&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> OK
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Users&quot;</span>
        <span class="token key atrule">&quot;400&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> パラメータ不正
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;404&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> リソースが存在しない
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;500&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 内部エラー
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> その他予期せぬエラー
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
    <span class="token key atrule">post</span><span class="token punctuation">:</span>
      <span class="token punctuation">...</span>
      <span class="token key atrule">parameters</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
      <span class="token key atrule">responses</span><span class="token punctuation">:</span>
        <span class="token key atrule">&quot;201&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> 新規登録に成功
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/UserAccount&quot;</span>
        <span class="token key atrule">&quot;400&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> パラメータ不正
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;409&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> すでに登録済みのユーザーIDを用いている
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">&quot;500&quot;</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> Internal Server Error
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
        <span class="token key atrule">default</span><span class="token punctuation">:</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">&quot;その他予期せぬエラー&quot;</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/Error&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="definitions"><a href="#definitions" class="header-anchor">#</a> definitions</h3> <ul><li><p>モデル名は、PascalCase で記載する</p></li> <li><p>種別が配列の場合、ネストして定義するのではなく、 <code>$ref</code> を活用する</p></li> <li><p>もし、リソース名が単複同形で <code>type: array</code> と区別できない場合、 <code>List</code> を末尾に付けて区別する</p> <ul><li>そうではない場合は <code>s</code> を付けて表現する</li></ul> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># OK</span>
<span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
  <span class="token key atrule">name</span><span class="token punctuation">:</span> product_types
  <span class="token key atrule">type</span><span class="token punctuation">:</span> array
  <span class="token key atrule">description</span><span class="token punctuation">:</span> プロダクト種別

<span class="token comment"># NG</span>
<span class="token punctuation">-</span> <span class="token key atrule">in</span><span class="token punctuation">:</span> query
  <span class="token key atrule">name</span><span class="token punctuation">:</span> product_type_list <span class="token comment"># xxx_listはNG</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> array
  <span class="token key atrule">description</span><span class="token punctuation">:</span> プロダクト種別
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>リクエストボディ</p> <ul><li>必須項目は <code>required</code> で項目を全て指定する</li> <li>その他、項目定義として可能であればできる限り細かく指定する</li></ul></li> <li><p>レスポンスボディ</p> <ul><li><code>type</code>, <code>description</code>, <code>example</code>が必須。</li> <li><code>format</code>, <code>minLength</code>, <code>maxLength</code> などの型桁はできる限り細かく指定する
<ul><li>多くのクライアントは RDB をデータストアに持ち、それらの型定義の参考にするためである</li></ul></li> <li><code>enum</code> は <strong>指定してはならない</strong> <ul><li>一部のクライアント側のコード生成で、存在しない区分値を指定するとエラーになる（レスポンスを受信できない）。これはサーバサイドで区分値を増やす必要があるケースで、サーバ・クライアントの同期をとる必要があり困難なケースが多い。例えばクライアントがモバイルである場合、サーバサイドで区分値を追加した場合には、全端末でアプリアップデートが必要となリ、事実上 API 互換性がなくなるため、v1 を保持しつつ、区分値を追加した v2 の Path を追加する必要が出てくる</li></ul></li> <li><code>pattern</code> の指定は不要
<ul><li><code>pattern</code> も enum と同様に、サーバサイドが当初よりリクエストのバリデーションを緩めた場合に、古い <code>pattern</code> でクライアントがレスポンスを検証すると動作しなくなるため。クライアントサイドが RDB など書き込み時のスキーマが厳密であったとしても、正規表現レベルの厳格さで書き込みチェックをすることは無いと考えられる</li></ul></li> <li><code>example</code> の値は、 例えば Prism でサーバのモックとして動かす場合に返される値になるため、できる限り具体的な値にする</li> <li>空文字、false, 0 値を返しうる項目に、<code>x-omitempty :false</code> を付与する
<ul><li>ツールの実装によっては、0 値や false を返した場合に JSON フィールドから除外される（omit される）ことがある</li></ul></li></ul></li> <li><p>日付は <code>2023-04-02</code> といった ISO 8601 date フォーマットを推奨する。この場合は <code>fromat: date</code> を指定する</p></li> <li><p>日時は <code>2023-04-02T15:04:05+09:00</code> といった ISO 8601 datetime フォーマットを推奨する。この場合は、 <code>format: date-time</code> を指定する</p></li> <li><p>エラーについて</p> <ul><li>API 全体で一貫したエラーを返すことを推奨とし、そのために <code>&quot;#/definitions/Error&quot;</code> といった共通のエラーモデルを利用を推奨する</li> <li><a href="https://www.rfc-editor.org/rfc/rfc7807" target="_blank" rel="noopener noreferrer">RFC 7807 Problem Details for HTTP APIs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> があるため、レイアウトを参考にする</li></ul></li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">UserAccounts</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> array
    <span class="token key atrule">items</span><span class="token punctuation">:</span>
      <span class="token key atrule">$ref</span><span class="token punctuation">:</span> <span class="token string">&quot;#/definitions/UserAccount&quot;</span>
  <span class="token key atrule">UserAccount</span><span class="token punctuation">:</span>
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>user_id<span class="token punctuation">,</span> user_name<span class="token punctuation">,</span> account_type<span class="token punctuation">,</span> register_at<span class="token punctuation">,</span> point<span class="token punctuation">]</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">user_id</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーID
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 32AB1aaad100eavV
      <span class="token key atrule">user_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザー名
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">128</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 未来太郎
      <span class="token key atrule">account_type</span><span class="token punctuation">:</span> <span class="token comment"># enumは指定しないこと</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> アカウント種別(1<span class="token punctuation">:</span>ゲスト 2<span class="token punctuation">:</span>登録済み 3<span class="token punctuation">:</span>プレミアム 4<span class="token punctuation">:</span>管理者)
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
      <span class="token key atrule">register_at</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">format</span><span class="token punctuation">:</span> date<span class="token punctuation">-</span>time
        <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録日時
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;2023-04-01T11:30:45.000Z&quot;</span>
      <span class="token key atrule">point</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int64
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ポイント（0ポイント以上）
        <span class="token key atrule">exampe</span><span class="token punctuation">:</span> <span class="token number">421</span>
  <span class="token key atrule">PostUserAccount</span><span class="token punctuation">:</span>
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>user_id<span class="token punctuation">,</span> user_name<span class="token punctuation">,</span> account_type<span class="token punctuation">,</span> register_at<span class="token punctuation">]</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">user_id</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">4</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
        <span class="token key atrule">pattern</span><span class="token punctuation">:</span> ^<span class="token punctuation">[</span>0<span class="token punctuation">-</span>9a<span class="token punctuation">-</span>zA<span class="token punctuation">-</span>Z_<span class="token punctuation">-</span><span class="token punctuation">]</span><span class="token important">*$</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザーID
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 32AB1aaad100eavV
      <span class="token key atrule">user_name</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">128</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> ユーザー名
        <span class="token key atrule">example</span><span class="token punctuation">:</span> 未来太郎
      <span class="token key atrule">account_type</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">]</span>
        <span class="token key atrule">description</span><span class="token punctuation">:</span> アカウント種別(1<span class="token punctuation">:</span>ゲスト 2<span class="token punctuation">:</span>登録済み 3<span class="token punctuation">:</span>プレミアム 4<span class="token punctuation">:</span>管理者)
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
      <span class="token key atrule">register_at</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">format</span><span class="token punctuation">:</span> date<span class="token punctuation">-</span>time
        <span class="token key atrule">description</span><span class="token punctuation">:</span> 登録日時
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token string">&quot;2023-04-01T11:30:45.000Z&quot;</span>
  <span class="token key atrule">Error</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> エラー (RFC 7807)
    <span class="token key atrule">type</span><span class="token punctuation">:</span> object
    <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>title<span class="token punctuation">,</span> status<span class="token punctuation">,</span> detail<span class="token punctuation">]</span>
    <span class="token key atrule">properties</span><span class="token punctuation">:</span>
      <span class="token key atrule">title</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> タイトル
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">64</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> request validation error
      <span class="token key atrule">status</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> integer
        <span class="token key atrule">format</span><span class="token punctuation">:</span> int32
        <span class="token key atrule">description</span><span class="token punctuation">:</span> HTTPステータスコード
        <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">400</span>
        <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">600</span>
        <span class="token key atrule">exclusiveMaximum</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token number">503</span>
      <span class="token key atrule">message_cd</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> 状態の切り分けとアクションが一意に特定できるメッセージコード
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">16</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> APPERR<span class="token punctuation">-</span><span class="token number">0001</span>
      <span class="token key atrule">detail</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> string
        <span class="token key atrule">description</span><span class="token punctuation">:</span> エラーメッセージ詳細
        <span class="token key atrule">minLength</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token key atrule">maxLength</span><span class="token punctuation">:</span> <span class="token number">128</span>
        <span class="token key atrule">example</span><span class="token punctuation">:</span> user name is too long
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><h3 id="バリデーションについて"><a href="#バリデーションについて" class="header-anchor">#</a> バリデーションについて</h3> <p>OpenAPI 定義を記載するにあたり、バリデーションをどこまで厳密に定義すべきかという議論はよく行いがちである。</p> <p>リクエストパラメータの各項目に対して、必須・型・桁・区分値・日付・正規表現のチェックが行える。レスポンスで用いるモデルについても同様に設定でき、<code>enum</code>, <code>pattern</code> 以外は API の利用者（クライアント）側の DB 設計などに必要な型桁情報を渡すのに有用であるため、できる限り詳しく指定する。</p> <h4 id="必須"><a href="#必須" class="header-anchor">#</a> 必須</h4> <p>必須パラメータのみ <code>required: true</code> を定義する</p> <h4 id="デフォルト値"><a href="#デフォルト値" class="header-anchor">#</a> デフォルト値</h4> <p>パラメータにデフォルト値がある場合は<code>default</code> を定義する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># ex. enum</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> limit
<span class="token key atrule">type</span><span class="token punctuation">:</span> number
<span class="token key atrule">format</span><span class="token punctuation">:</span> integer
<span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token number">20</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> 検索結果の項目数上限（1~100が指定可能）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>【注意】API 公開後に、default 値を変更してはならない（API の互換性が崩れるため）。もし変更する場合は、API のバージョンを上げること。</p> <h4 id="型・フォーマット"><a href="#型・フォーマット" class="header-anchor">#</a> 型・フォーマット</h4> <p>型（<code>type</code>）は <code>string(文字列)</code>, <code>number（数値）</code>, <code>integer（整数値）</code>, <code>boolean（真偽値）</code> <code>array（配列）</code>, <code>file（ファイル）</code> のうちどれか指定する.</p> <p>フォーマット（<code>format</code>） は以下の型の詳細情報を示すもので、可能な限り設定する。</p> <ul><li><code>integer</code> （整数）
<ul><li><code>int32</code>, <code>int64</code></li></ul></li> <li><code>number</code> （数値）
<ul><li><code>float</code>, <code>double</code></li></ul></li> <li><code>string</code> （バイナリ）
<ul><li><code>byte</code>: Base64 でエンコードされた文字列</li> <li><code>binary</code>: バイト配列</li></ul></li> <li><code>string</code> （日付）
<ul><li><code>date</code>: <a href="https://www.rfc-editor.org/rfc/rfc3339" target="_blank" rel="noopener noreferrer">RFC3339<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> full-date(例: 2023-07-21)
<ul><li>項目名は <code>_on</code> を接尾辞につけることを推奨とする</li></ul></li> <li><code>date-time</code>: <a href="https://www.rfc-editor.org/rfc/rfc3339" target="_blank" rel="noopener noreferrer">RFC3339<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> date-time(例: 2023-07-21T17:32:28Z)
<ul><li>項目名は <code>_at</code> を接尾辞につけることを推奨とする</li></ul></li></ul></li> <li><code>string</code> （その他）
<ul><li><code>password</code>: Swagger UI で入力が隠される</li> <li>その他、 <code>email</code>, <code>uuid</code> など Open API 仕様に存在しない任意のフォーマットを独自のドキュメント生成などのために記載しても良い</li></ul></li></ul> <h4 id="桁"><a href="#桁" class="header-anchor">#</a> 桁</h4> <p>データ型によって、利用できる桁を指定する項目が異なる。可能な限り設定する。</p> <ul><li>文字列
<ul><li>最大桁数：<code>maxLength</code></li> <li>最小桁数：<code>minLength</code></li></ul></li> <li>数値または整数値
<ul><li>最小値（境界値を含む）：<code>minimum</code></li> <li>最大値（境界値を含む）：<code>maximum</code></li> <li>境界値を含まない場合のみ<code>exclusiveMinimum: true</code>または<code>exclusiveMaximum: true</code>を定義する。minimum, maximum で代用できる場合は利用しない</li></ul></li> <li>配列:
<ul><li>最大要素数：<code>maxItems</code></li> <li>最小要素数：<code>minItems</code></li> <li><code>required: true</code>の場合は原則として<code>minItems: 1</code>を定義する</li> <li><code>uniqueItems</code> は必須で指定する（通常は一意であるべき）</li></ul></li></ul> <p>【注意】API 公開後に、レスポンスの <code>maxLength</code> を以前より大きい値に変更してはならない。レスポンスの <code>maxLength</code> など API 利用者側システムの DB の ERD 定義のインプットになる事が多いため。もし行う場合は API のバージョンを上げることや、連携先に桁数変更の旨を調整するなどの考慮を行う。</p> <h4 id="区分値"><a href="#区分値" class="header-anchor">#</a> 区分値</h4> <p>区分値の場合は <code>enum</code> 属性を利用し、<code>description</code>には区分値の論理名を記載する。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> gender
<span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  性別
    0: 不明
    1: 男
    2: 女
    9: 適用不能</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="固定値"><a href="#固定値" class="header-anchor">#</a> 固定値</h4> <p><strong>固定値</strong> の場合も enum を 1 つだけ指定して表現する。この場合もレスポンスで利用する場合は指定しない</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> file_layout
<span class="token key atrule">type</span><span class="token punctuation">:</span> string
<span class="token key atrule">enum</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">]</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> ファイルレイアウト
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="その他-正規表現"><a href="#その他-正規表現" class="header-anchor">#</a> その他（正規表現）</h4> <p>正規表現で表現できる文字列は<code>pattern</code>を利用して定義する。桁や区分値で代替できる場合は、<code>pattern</code> を用いない</p> <p>例:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">remind_time</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token key atrule">description</span><span class="token punctuation">:</span> リマインド時刻。（hh<span class="token punctuation">:</span>mm）形式
  <span class="token key atrule">example</span><span class="token punctuation">:</span> <span class="token datetime number">23:59</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> <span class="token string">&quot;^(2[0-3]|[01][0-9]):([0-5][0-9])$&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ファイルアップロード"><a href="#ファイルアップロード" class="header-anchor">#</a> ファイルアップロード</h3> <p>Web API におけるファイルアップロードのよく利用される実装手段は、大きく分けて以下の 3 手法に分類できます</p> <ol><li>ファイルのコンテンツを Base64 などにエンコードして、JSON の項目として設定し、リクエストボディで送る
<ul><li>メリット: 通常の JSON を扱うのとほぼ変わらないため楽。サムネイルなど限定されたユースケースの場合に向く</li> <li>デメリット: 巨大なファイルを扱う場合などサーバリソース負荷が懸念。Base64 に変換する分 CPU 負荷は余計にかかる。ペイロードが膨れるためモバイルなどのクライアントでは帯域利用での懸念がある</li></ul></li> <li>multipart/form-data ファイルを送信する
<ul><li>メリット: ファイルを Base64 に変換するといった作業が不要</li> <li>デメリット: ブラウザ以外のクライアントにとって手間がかかる</li></ul></li> <li>アップロード用に用いる、オブジェクトストレージの Signed URL を発行し、クライアントから直接ファイルをアップロードしてもらう
<ul><li>次の流れを想定（Signed URL を取得 -&gt; ファイルアップロード -&gt; ファイルに紐づかせるキーや属性情報などを登録）</li> <li>Amazon API Gateway を利用する場合は、2023 年 6 月時点で<a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html" target="_blank" rel="noopener noreferrer">ペイロード上限が 10MB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/gettingstarted-limits.html#api-requests" target="_blank" rel="noopener noreferrer">AWS Lambda でもペイロード制限がある<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ため、許容するファイルサイズによってはこの手法一択となる</li> <li>メリット: オブジェクトストレージの可用性・信頼性を享受できる</li> <li>デメリット: アップロードするために複数の API エンドポイント呼び出しが必要なため、煩雑である</li> <li>2023 年 6 月に AWS ブログでこの方式について解説した記事が出たので、詳細は参照ください。
<ul><li><a href="https://aws.amazon.com/jp/blogs/news/large-size-files-transferring-by-serverless-s3presignedurl-and-clientside-javascript/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/jp/blogs/news/large-size-files-transferring-by-serverless-s3presignedurl-and-clientside-javascript/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ol> <p>本規約でファイルアップロードについて上記の 3. Signed URL を推奨する。API 呼び出しとしては次のようなフローとする。</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>フローの ①、② はアプリケーション固有の紐づけルールにおいて Web API を設計すれば良いため、本規約で YAML の設定例は記載しない。フロー ② については Signed URL を用いたアップロードであり、アプリケーションの Web API 定義を書く必要はない。もし、監査ログなどのガバナンス上、直接オブジェクトストレージへの書き込みを許容されないケースは、B で Signed URL に相当する書き込み先を提供し、B を経由してファイルをアップロードする。</p> <p>上記どちらのケースも OpenAPI 定義としてはシンプルであるため、記述例は割愛する。</p> <h3 id="ファイルダウンロード"><a href="#ファイルダウンロード" class="header-anchor">#</a> ファイルダウンロード</h3> <p>ファイルアップロードと同様、オブジェクトストレージの Signed URL 経由を経由してのダウンロードさせる手法を推奨する。Web API としてはオブジェクトストレージにダウンロード用のファイルを書き込み、クライアントが取得するための Signed URL をレスポンスの JSON 項目に渡す方式である。</p> <p>もし、サムネイルやアイコン画像など、ファイル容量がごく小さい場合は Base64 にエンコードして JSON に埋め込んで渡しても良い。線引をどこに設置するかは本規約で定義しない。</p> <p>どちらのケースも OpenAPI 定義としてはシンプルであるため、記述例は割愛する。</p> <h3 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h3> <p>CORS（Cross-Origin Resource Sharing）のために、options メソッドの追記は <strong>原則不要</strong> とする。</p> <p>理由は以下である。</p> <ul><li>サーバ側
<ul><li>options メソッド対応は、API 使用ではなく実装レベルの機能横断的な処理（Java における Servlet Filter や Spring の Interceptor、Go における Middleware など）で行うことが大半であり、コード生成が不要</li></ul></li> <li>クライアント側
<ul><li>options メソッドを用いるのはクライアントがブラウザであり、クライアントのアプリケーションコードが明示的にアクセスしないため、コード生成が不要</li></ul></li> <li>使用面として
<ul><li><code>Access-Control-Allow-Origin</code> がどのような値を返すか、呼び出し元によって動的な値を返したい場合があり、記載が困難なケースがある</li></ul></li></ul> <p>ただし、Amazon API Gateway のようなサービスを利用する場合は、options メソッドの記載が必須である場合は除く<a href="https://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/enable-cors-for-resource-using-swagger-importer-tool.html" target="_blank" rel="noopener noreferrer">^1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="opentelemetry-traceparent-http-header"><a href="#opentelemetry-traceparent-http-header" class="header-anchor">#</a> OpenTelemetry Traceparent HTTP Header</h3> <p>OpenOpenTelemetryで用いるられる<a href="https://www.w3.org/TR/trace-context/" target="_blank" rel="noopener noreferrer">traceparent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> のリクエストヘッダーはOpenAPIで <strong>原則不要</strong> とする。</p> <p>理由は以下である。</p> <ul><li>OpenTelemetryが定めるヘッダー類は、API横断的に設定されるべきものであり、ミドルウェアやフレームワーク側などでの一律の制御を推奨するため</li> <li>記載することにより、OpenOpenTelemetryに対応していることを明記し開発者に周知できるメリットより、各アプリ開発者が生成されたコードで悩んだり、誤解されることを回避したいため</li></ul> <h3 id="api-のバージョン管理"><a href="#api-のバージョン管理" class="header-anchor">#</a> API のバージョン管理</h3> <p>Swagger 定義で以下の変更を行う場合は、利用するコード生成の動作によってはクライアントにとって互換性を失う破壊的変更であることがあるため、変更は調整の上で行うか、バージョンを上げることを考える。</p> <ul><li>リクエスト項目
<ul><li>フィールドの型を変更する</li> <li>桁数を小さくする</li> <li>enum の種類を減らす</li> <li>正規表現のチェックを厳しくする</li> <li>必須フィールドを後から追加する</li> <li>デフォルト値を後から変更する</li></ul></li> <li>レスポンス項目
<ul><li>フィールドの型を変更する</li> <li>桁数を大きくする</li> <li>デフォルト値を後から変更する</li></ul></li></ul> <h3 id="ファイル単位"><a href="#ファイル単位" class="header-anchor">#</a> ファイル単位</h3> <p>TODO v3 の作成タイミングと合わせて追記する</p> <h2 id="推奨ツール"><a href="#推奨ツール" class="header-anchor">#</a> 推奨ツール</h2> <p><a href="https://future-architect.github.io/articles/20191008/" target="_blank" rel="noopener noreferrer">本当に使ってよかった OpenAPI (Swagger) ツール <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> にあるように、様々なツールで開発ができる。VS Code を用いる場合は以下のプラグインを推奨する。</p> <ul><li><a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml" target="_blank" rel="noopener noreferrer">YAML<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://marketplace.visualstudio.com/items?itemName=Arjun.swagger-viewer" target="_blank" rel="noopener noreferrer">Swagger Viewer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Ctrl + Shift + P (Win: Shift + Alt +P ) → Preview Swagger で現在編集中の Swagger プレビューが可能</li></ul></li> <li><a href="https://docs.stoplight.io/docs/spectral/674b27b261c3c-overview" target="_blank" rel="noopener noreferrer">spectral-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><code>editorconfig</code> を用いる場合は、以下の定義を推奨する。</p> <div class="language-ini .editorconfig line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">root</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">*</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">charset</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf-8</span>
<span class="token key attr-name">insert_final_newline</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">trim_trailing_whitespace</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">end_of_line</span> <span class="token punctuation">=</span> <span class="token value attr-value">lf</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">*.{json,yaml}</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">indent_size</span> <span class="token punctuation">=</span> <span class="token value attr-value">2</span>
<span class="token key attr-name">indent_style</span> <span class="token punctuation">=</span> <span class="token value attr-value">space</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p><a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" rel="noopener noreferrer"><img src="https://licensebuttons.net/l/by/4.0/88x31.png" alt="CC-By-4.0"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/future-architect/coding-standards/edit/master/documents/forOpenAPISpecification/OpenAPI_Specification_2.0.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2024/2/1 5:10:43</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/coding-standards/documents/forOpenAPISpecification/" class="prev router-link-active">
        Home
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/coding-standards/assets/js/app.43ae47b4.js" defer></script><script src="/coding-standards/assets/js/2.549b8794.js" defer></script><script src="/coding-standards/assets/js/1.9e6a74dc.js" defer></script><script src="/coding-standards/assets/js/34.3862c893.js" defer></script><script src="/coding-standards/assets/js/19.25b9c7af.js" defer></script>
  </body>
</html>
