(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{335:function(s,t,a){"use strict";a.r(t);var n=a(11),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("page-title"),s._v(" "),t("p",[s._v("本コーディング規約は、世の中のシステム開発プロジェクトのために無償で提供致します。"),t("br"),s._v("\nただし、掲載内容および利用に際して発生した問題、それに伴う損害については、フューチャー株式会社は一切の責務を負わないものとします。"),t("br"),s._v("\nまた、掲載している情報は予告なく変更することがございますので、あらかじめご了承下さい。")]),s._v(" "),t("h2",{attrs:{id:"はじめに"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#はじめに"}},[s._v("#")]),s._v(" はじめに")]),s._v(" "),t("h3",{attrs:{id:"前提条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[s._v("#")]),s._v(" 前提条件")]),s._v(" "),t("p",[s._v("本書は、SQL コーディング規約についてまとめたものである。"),t("br"),s._v("\n今回 RDBMS として採用する PostgreSQL での SQL の使用を前提に記述している。")]),s._v(" "),t("h2",{attrs:{id:"sql-コーティング規約-可読性・管理性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-コーティング規約-可読性・管理性"}},[s._v("#")]),s._v(" SQL コーティング規約（可読性・管理性）")]),s._v(" "),t("p",[s._v("本章では可読性・管理性を高めることを目的としたコーディング規約について記載する。")]),s._v(" "),t("h3",{attrs:{id:"書式全般"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#書式全般"}},[s._v("#")]),s._v(" 書式全般")]),s._v(" "),t("p",[s._v("書式全般についてのコーディング規約を下記に示す。")]),s._v(" "),t("ul",[t("li",[s._v("1 行につき、1 文のみを記述する。")]),s._v(" "),t("li",[s._v("SQL 中のインデントは、Java コーディング規約にあわせて半角スペースではなくタブ文字とする。")]),s._v(" "),t("li",[s._v("ヘボン式ローマ字を使用する。")]),s._v(" "),t("li",[s._v("外来語に関しては、原語の綴りを使用する。")]),s._v(" "),t("li",[s._v("横は 80 文字を目安に改行する。")]),s._v(" "),t("li",[s._v("定数を条件に用いる場合やインライン・ビューで取得したいデータなど開発者の意図はコメントにて記載する。")])]),s._v(" "),t("h3",{attrs:{id:"予約語"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#予約語"}},[s._v("#")]),s._v(" 予約語")]),s._v(" "),t("p",[s._v("予約語に対しては、小文字を使用する。(例 ： "),t("code",[s._v("select")]),s._v("、"),t("code",[s._v("insert")]),s._v("、"),t("code",[s._v("update")]),s._v("、"),t("code",[s._v("delete")]),s._v(" 等)")]),s._v(" "),t("h3",{attrs:{id:"予約語以外"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#予約語以外"}},[s._v("#")]),s._v(" 予約語以外")]),s._v(" "),t("p",[s._v("予約語以外に対しても、予約語と同様に小文字を使用する。(例 ： オブジェクト名、カラム名 等)")]),s._v(" "),t("h3",{attrs:{id:"短縮名称"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#短縮名称"}},[s._v("#")]),s._v(" 短縮名称")]),s._v(" "),t("p",[s._v("SQL 中に記述するエイリアス名など単語の短縮について示す。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("外来語に関しては、原語の短縮形を使用する。短縮形が存在しない場合には、母音を抜かして表記する。"),t("br"),s._v("\n例) corporation → corp / computer → cmptr")])]),s._v(" "),t("li",[t("p",[s._v("ローマ字の短縮は、単語の区切れの頭文字、または母音を抜かした子音字等を利用する。"),t("br"),s._v("\n例) nichijo → nchj")])])]),s._v(" "),t("ul",[t("li",[s._v("カラムには必ずテーブルエイリアスを付与する")]),s._v(" "),t("li",[s._v("テーブルのエイリアスは必ず付与すること。"),t("br"),s._v("\n必要ない場合（単一テーブルへの SELECT 等）も必ず付与すること"),t("br"),s._v("\nまた、テーブルのエイリアス名は同 SQL 文の中で重複しないように命名すること。"),t("br"),s._v("\n（副問い合わせで利用したエイリアス名をメインの SQL 中のエイリアス名に利用しない。など）")])]),s._v(" "),t("h3",{attrs:{id:"文字コード"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文字コード"}},[s._v("#")]),s._v(" 文字コード")]),s._v(" "),t("p",[s._v("SQL ファイルの文字コード（エンコーディング）は Java ソースファイルと同じく『 Unicode UTF-8 』で保存する。")]),s._v(" "),t("h3",{attrs:{id:"不要な空白文字-スペース-は除去する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#不要な空白文字-スペース-は除去する"}},[s._v("#")]),s._v(" 不要な空白文字（スペース）は除去する")]),s._v(" "),t("p",[s._v("不要な空白文字（スペース）は除去すること。")]),s._v(" "),t("h3",{attrs:{id:"sql-文の整形"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-文の整形"}},[s._v("#")]),s._v(" SQL 文の整形")]),s._v(" "),t("p",[s._v("DML 文の節に対する予約語は左揃えにする。"),t("br"),s._v("\n項目ごとに改行を入れ、項目の前にはインデントを挿入する。カンマは項目の前へ記入する。"),t("br"),s._v("\nJava ソースファイルのようにファイルの先頭にコメント行を入れると DB 分析作業に支障があるため禁止とする。"),t("br"),s._v("\nよって SQL ファイルの先頭は必ず"),t("code",[s._v("select")]),s._v("、"),t("code",[s._v("update")]),s._v("、"),t("code",[s._v("insert")]),s._v("、"),t("code",[s._v("delete")]),s._v("の何れかになる。")]),s._v(" "),t("p",[s._v("物理カラム名、テーブル名に対応する論理名を入れる場合、その後ろに単数行コメント（"),t("code",[s._v("--")]),s._v("）にて記述する。"),t("br"),s._v("\nSQL 内に挿入する単数行コメントは、"),t("code",[s._v("/*（半角スペース）コメント本文（半角スペース）*/")]),s._v(" で行う。"),t("br"),s._v(" "),t("code",[s._v(",")]),s._v("（カンマ）と"),t("code",[s._v("AND")]),s._v("については各行の先頭に記述する。（以下の例を参照のこと）"),t("br"),s._v("\nSQL フレームワークで実行する SQL の場合、SQL ステートメントの終わりを示す"),t("code",[s._v(";")]),s._v("（セミコロン）は記述しない。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n\t処理名\n*/")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn2\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ttable1\ttbl1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- テーブル1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("WHERE 句の"),t("code",[s._v("=")]),s._v("、"),t("code",[s._v("!=")]),s._v("、"),t("code",[s._v("is")]),s._v("（"),t("code",[s._v("is null")]),s._v("の"),t("code",[s._v("is")]),s._v("）の縦位置は揃える。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ten_no\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ten_no\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("kamoku_cd\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("anken_no\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"select-文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select-文"}},[s._v("#")]),s._v(" SELECT 文")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn2\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ttable1\ttbl1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- テーブル1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column3\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"insert-文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#insert-文"}},[s._v("#")]),s._v(" INSERT 文")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v("\n\ttable1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- テーブル1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tcolumn1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tcolumn2\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tcolumn3\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tvalue1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tvalue2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tvalue3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"update-文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-文"}},[s._v("#")]),s._v(" UPDATE 文")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n\ttable1\ttbl1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- テーブル1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column3\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"delete-文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete-文"}},[s._v("#")]),s._v(" DELETE 文")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ttable1\ttbl1\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- テーブル1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"and-副問い合わせ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#and-副問い合わせ"}},[s._v("#")]),s._v(" AND（副問い合わせ）")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\txxx\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\t\t\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\t\t\ttable1\ttbl1\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"case-式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#case-式"}},[s._v("#")]),s._v(" CASE 式")]),s._v(" "),t("p",[s._v("CASE 式は下記のように記載すること。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),s._v("\n\t\txxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hoge\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tyyy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fuga\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\txxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fuga\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tyyy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fuga\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("code",[s._v("case")]),s._v("、"),t("code",[s._v("when")]),s._v("、"),t("code",[s._v("then")]),s._v("、"),t("code",[s._v("else")]),s._v("の後に改行を挿入すること。"),t("br"),s._v(" "),t("code",[s._v("case")]),s._v("の後、"),t("code",[s._v("end")]),s._v("の前までは 1 インデント挿入すること。")]),s._v(" "),t("h4",{attrs:{id:"in-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#in-句"}},[s._v("#")]),s._v(" IN 句")]),s._v(" "),t("p",[s._v("カンマの後にスペースを１文字入れる。")]),s._v(" "),t("h4",{attrs:{id:"比較演算子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比較演算子"}},[s._v("#")]),s._v(" 比較演算子")]),s._v(" "),t("p",[s._v("比較演算子の前後にタブ（またはスペース）を１文字入れる。")]),s._v(" "),t("h4",{attrs:{id:"改行位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改行位置"}},[s._v("#")]),s._v(" 改行位置")]),s._v(" "),t("p",[s._v("select 句、order by 句、group by 句等は最初に出現するカラムとカラムの区切りのカンマ前に改行を入れること。"),t("br"),s._v("\nselect の from 句の最初に出現するテーブルと結合テーブルの区切りのカンマ前に改行を入れること。"),t("br"),s._v("\nwhere 句の on 句の各条件文の（and や or の）前に改行を入れること。"),t("br"),s._v("\n命令句の後は、ヒント句が挿入できるように改行すること。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\tt1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tt2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn2\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ttable1\tt1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ttable2\tt2\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\tt1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column3\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tt1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column4\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tt2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column4\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n\tt1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tt2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"with-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#with-句"}},[s._v("#")]),s._v(" WITH 句")]),s._v(" "),t("p",[s._v("with の前後に改行を挿入すること"),t("br"),s._v("\nまた、インデントは下記のように記述すること")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラムエイリアスあり")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v("\n    name1   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        col_alias1  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム１")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   col_alias2  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム２")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n        ・・・\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   name2   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        col_alias1  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム１")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   col_alias2  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラム２")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n        ・・・\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- カラムエイリアスなし")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v("\n    name1   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n        ・・・\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   name2   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n        ・・・\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h4",{attrs:{id:"limit-句-offset-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#limit-句-offset-句"}},[s._v("#")]),s._v(" LIMIT 句 OFFSET 句")]),s._v(" "),t("p",[s._v("LIMIT、OFFSET の前に改行を挿入すること")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  column1\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n    table1  tbl1\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n    tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("offset")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"hint-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hint-句"}},[s._v("#")]),s._v(" HINT 句")]),s._v(" "),t("p",[s._v("HINT 句は独立した行で記載すること"),t("br"),s._v("\nHINT 内容にはインデントを付けること")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*+\n\tここにhintを記載\n*/")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("\tcolumn1\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ttable1\ttbl1\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column2\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"コメント"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#コメント"}},[s._v("#")]),s._v(" コメント")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("修正コメント")]),s._v(" "),t("p",[s._v("（修正コメントが必要な場合、）"),t("br"),s._v("\n処理追加の際、追加行の 1 行目の前と最終行の次の行にコメントを入れる。単一行の場合は、同一行の最後にコメントをつける。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 2004/04/23 仕様変更管理番号 ADD(または、MOD、DEL) 変更者名 S ←　修正開始点コメント")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("追加処理"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 2004/04/23仕様変更管理番号 ADD(または、MOD、DEL) 変更者名 E ←　修正終了点コメント")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("単数行コメント")]),s._v(" "),t("p",[s._v("SQL 内で使用する単数行コメント（カラムコメントなど）には、「 "),t("code",[s._v("--")]),s._v(" 」を使用する。")])]),s._v(" "),t("li",[t("p",[s._v("複数行コメント")]),s._v(" "),t("p",[s._v("「 "),t("code",[s._v("/*")]),s._v(" "),t("code",[s._v("*/")]),s._v(" 」を使用する。下記に例を示す。"),t("br"),s._v("\nなお、前述で触れたとおり、SQL ファイルの先頭にコメントを記述することは禁止とする。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**********************************************************************/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n * コメントを始めるスラッシュとアスタリスクは、それだけを１行に置く。\n * それから、コメント・ブロック内の各行は縦にアスタリスクを置き\n * コメントがあることを強調する。\n * 最後に、アスタリスクとスラッシュは、それだけを１行に置く。\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**********************************************************************/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("複数行コメントアウト")]),s._v(" "),t("p",[s._v("複数行をコメントアウトする場合は、各行を「"),t("code",[s._v("--")]),s._v("」でコメントアウトする。"),t("br"),s._v("\n「 "),t("code",[s._v("/*")]),s._v(" "),t("code",[s._v("*/")]),s._v(" 」を使用すると、その中に「 "),t("code",[s._v("/*")]),s._v(" "),t("code",[s._v("*/")]),s._v(" 」が存在した場合、コメントアウトが途中で切れてしまう恐れがあるため、"),t("br"),s._v("\n使用しない。")])]),s._v(" "),t("li",[t("p",[s._v("論理名の記載")]),s._v(" "),t("p",[t("code",[s._v("select")]),s._v("・"),t("code",[s._v("insert")]),s._v("・"),t("code",[s._v("update")]),s._v("・"),t("code",[s._v("merge")]),s._v("のカラム名記述箇所には単数行コメントでカラムの論理名を記載する。"),t("br"),s._v(" "),t("code",[s._v("select")]),s._v("・"),t("code",[s._v("insert")]),s._v("・"),t("code",[s._v("update")]),s._v("・"),t("code",[s._v("delete")]),s._v("・"),t("code",[s._v("merge")]),s._v("のテーブル名記述箇所には単数行コメントでテーブルの論理名を記載する。"),t("br"),s._v("\n論理名は ERD 等で定義された論理名と必ず一致させること。")])])]),s._v(" "),t("h3",{attrs:{id:"型変換"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#型変換"}},[s._v("#")]),s._v(" 型変換")]),s._v(" "),t("p",[s._v("代入や WHERE 句の条件設定などでデータ・タイプが異なる場合、明示的にタイプ変換を行う。（暗黙の型変換は使用しない）")]),s._v(" "),t("h3",{attrs:{id:"比較演算子-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比較演算子-2"}},[s._v("#")]),s._v(" 比較演算子")]),s._v(" "),t("p",[s._v("「等しくない」を示す演算子は「"),t("code",[s._v("!=")]),s._v("」を利用する。「"),t("code",[s._v("<>")]),s._v("」も動作するが統一の観点から利用しない。")]),s._v(" "),t("h3",{attrs:{id:"order-by-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#order-by-句"}},[s._v("#")]),s._v(" ORDER BY 句")]),s._v(" "),t("p",[t("code",[s._v("order by")]),s._v(" 数字の構文は使用せずに、カラム名を記載する。")]),s._v(" "),t("h3",{attrs:{id:"group-by-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#group-by-句"}},[s._v("#")]),s._v(" GROUP BY 句")]),s._v(" "),t("p",[t("code",[s._v("group by")]),s._v(" 数字の構文は使用せずに、カラム名を記載する。")]),s._v(" "),t("p",[s._v("集約関数を利用する場合は必ず記載すること。（省略可能であっても省略しない）")]),s._v(" "),t("h3",{attrs:{id:"exists-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exists-句"}},[s._v("#")]),s._v(" EXISTS 句")]),s._v(" "),t("p",[s._v("EXISTS 句を記載する際、サブクエリになる SELECT 句の指定は定数「"),t("code",[s._v("1")]),s._v("」とする。"),t("br"),s._v("\n「"),t("code",[s._v("*")]),s._v("」（ワイルドカード）や「"),t("code",[s._v("'X'")]),s._v("」は統一の観点から利用しない。"),t("br"),s._v("\nまた「"),t("code",[s._v("*")]),s._v("」（ワイルドカード）についてはパフォーマンスの観点からも禁止とする。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\t\t\tfoo\tf\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\t\t\tf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"as-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#as-句"}},[s._v("#")]),s._v(" AS 句")]),s._v(" "),t("p",[s._v("トップレベルの SELECT 句には必ず"),t("code",[s._v("as")]),s._v("句を記載し別名を付ける。"),t("br"),s._v("\n同一の名前であっても AS 句を付与する。"),t("br"),s._v("\nまた、「"),t("code",[s._v("as")]),s._v("」は省略可能であるが、省略はしないこと。")]),s._v(" "),t("h3",{attrs:{id:"where-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#where-句"}},[s._v("#")]),s._v(" WHERE 句")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("論理名の記載"),t("br"),s._v("\nWHERE 句でカラムと式を比較する際は左辺がカラムになるように記載すること。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n\ttbl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\ttbl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount2\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ttbl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount3\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\ttbl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("条件式の順序"),t("br"),s._v("\n原則として、WHERE 句で条件式を列挙する際、下記の順序を守ること。")]),s._v(" "),t("ol",[t("li",[s._v("テーブル単位にまとめて順番に記述する"),t("br"),s._v("\nこの際、テーブルの順序は FROM 句に記述した順序に準ずること。")]),s._v(" "),t("li",[s._v("1.のテーブル単位の中で絞り込み条件をまず記述し、その後結合条件を記述する。")])]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\ta_table\ta\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- a_table")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tb_table\tb\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- b_table")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tc_table\tc\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- c_table")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- a_tableの絞り込み")]),s._v("\n\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key1\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key2\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- b_tableの絞り込み")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key1\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key2\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- b_tableの結合条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- c_tableの絞り込み")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key1\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key2\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t?\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- c_tableの結合条件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col2\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col2\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\tc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col3\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\tb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"count-文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#count-文"}},[s._v("#")]),s._v(" COUNT 文")]),s._v(" "),t("p",[s._v("レコード数を数える COUNT 文の記述は"),t("code",[s._v("count(*)")]),s._v("と記述する。"),t("br"),s._v(" "),t("code",[s._v("count(1)")]),s._v("・"),t("code",[s._v("count('x')")]),s._v(" ・"),t("code",[s._v("count(key1)")]),s._v("という記載は NG。")]),s._v(" "),t("h3",{attrs:{id:"文字列リテラル"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文字列リテラル"}},[s._v("#")]),s._v(" 文字列リテラル")]),s._v(" "),t("h4",{attrs:{id:"エスケープシーケンス"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#エスケープシーケンス"}},[s._v("#")]),s._v(" エスケープシーケンス")]),s._v(" "),t("p",[s._v("文字列リテラル中のシングルクォーテーションのエスケープは「 "),t("code",[s._v("''")]),s._v(" 」とシングルクォーテーションを二つつなげた記述をする。"),t("br"),s._v("\n「 "),t("code",[s._v("\\'")]),s._v(" 」も同様の結果が得られるが円マーク（バックスラッシュ）によるエスケープは利用しない。"),t("br"),s._v("\n円マークをエスケープせざるを得ないときのみ円マークによるエスケープ利用して良いが、"),t("br"),s._v("\n円マークを文字列リテラルで表現する必要のある設計自体を避けること。")]),s._v(" "),t("p",[s._v("※PostgreSQL は設定によって円マーク（バックスラッシュ）によるエスケープを無効にできます。（デフォルト無効）"),t("br"),s._v("\n円マークをエスケープするときは、自プロジェクトでどちらに設定されているか確認してください。")]),s._v(" "),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n    table_a\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v("\n    text_data   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'that''s right'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("悪い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n    table_a\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v("\n    text_data   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'that\\'s too bad'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"sql-コーディング規約-パフォーマンス性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-コーディング規約-パフォーマンス性"}},[s._v("#")]),s._v(" SQL コーディング規約（パフォーマンス性）")]),s._v(" "),t("p",[s._v("本章ではパフォーマンス性を高めることを目的としたコーディング規約について記載する。")]),s._v(" "),t("h3",{attrs:{id:"検索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#検索"}},[s._v("#")]),s._v(" 検索")]),s._v(" "),t("p",[s._v("検索処理におけるコーディング規約を下記に示す。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("中間一致、後方一致検索はインデックスを利用できないため避ける")])]),s._v(" "),t("li",[t("p",[s._v("検索条件で"),t("code",[s._v("=")]),s._v("（等号）を使用できる場合は必ず使用する")]),s._v(" "),t("p",[t("code",[s._v("a=1 or a=2")]),s._v("とする方が"),t("code",[s._v("a>0 and a<3")]),s._v("などと記述するのよりパフォーマンス上優位な場合が多い。"),t("br"),s._v("\nこれは "),t("code",[s._v("a")]),s._v(" にインデックスがある場合、"),t("code",[s._v("=")]),s._v("であれば、インデックスが有効に使われるためである。")])]),s._v(" "),t("li",[t("p",[s._v("可能な限り検索条件にパーティションキーの値を指定する")])]),s._v(" "),t("li",[t("p",[s._v("全列ワイルドカード「"),t("code",[s._v("*")]),s._v("」の使用はせず、カラム名を明記する")])]),s._v(" "),t("li",[t("p",[s._v("インデックスによる検索を指定したい場合、下記の記載を行わない")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("インデックスカラムを含む演算に対して条件指定")]),s._v(" "),t("p",[s._v("悪い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* NGパターン 右辺で演算してください */")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("インデックスカラムに関数を通した値に対して条件指定")]),s._v(" "),t("p",[s._v("悪い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* NGパターン 右辺に関数を通してください */")]),s._v("\nto_char"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YYYYMMDD'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20151231'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("tbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v("\tto_date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20160101'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YYYYMMDD'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("インデックスカラムを"),t("code",[s._v("OR")]),s._v("で条件指定（禁止ではないが原則行わない）")]),s._v(" "),t("p",[s._v("悪い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* NGパターンINDEXが利用されない場合があります。他の方法を検討してください */")]),s._v("\n\t\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v("\ttbl1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("col1\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])])])]),s._v(" "),t("h3",{attrs:{id:"挿入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#挿入"}},[s._v("#")]),s._v(" 挿入")]),s._v(" "),t("p",[s._v("挿入処理におけるコーディング規約を下記に示す。")]),s._v(" "),t("ul",[t("li",[s._v("全列ワイルドカード「"),t("code",[s._v("*")]),s._v("」の使用はせず、カラム名を明記する。")])]),s._v(" "),t("h3",{attrs:{id:"更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[s._v("#")]),s._v(" 更新")]),s._v(" "),t("p",[s._v("更新処理におけるコーディング規約を下記に示す。")]),s._v(" "),t("ul",[t("li",[s._v("主キーの値の UPDATE は原則行わない。外部キーがあればエラーになる。"),t("br"),s._v("\n外部キーが無い場合でも、事実上、主キーの値を利用して、検索、更新する場合は、リンクが切れてしまう。")]),s._v(" "),t("li",[s._v("パーティションキーの UPDATE は原則行わない。")]),s._v(" "),t("li",[s._v("VIEW を使用するデータ更新は禁止。更新は実表に対して行う。")])]),s._v(" "),t("h3",{attrs:{id:"削除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#削除"}},[s._v("#")]),s._v(" 削除")]),s._v(" "),t("p",[s._v("削除処理におけるコーディング規約を下記に示す。")]),s._v(" "),t("ul",[t("li",[s._v("大量件数（数百万件レベル）の delete 文発行は避ける。")])]),s._v(" "),t("h3",{attrs:{id:"distinct-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#distinct-句"}},[s._v("#")]),s._v(" DISTINCT 句")]),s._v(" "),t("p",[s._v("DISTINCT は、暗黙のソート処理が行われる可能性があるため性能劣化につながる。"),t("br"),s._v("\nEXISTS 句の使用・代替を検討すること。")]),s._v(" "),t("p",[s._v("悪い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v("\n    d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  dept_no\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  dept_name\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n    department  d\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   employee    e\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dept_no   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 社員が一人以上属している部門を取得")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("良い例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  dept_no\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  dept_name\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n    department  d\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n            employee    e\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n            d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dept_no   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 社員が一人以上属している部門を取得")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"in-句-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#in-句-2"}},[s._v("#")]),s._v(" IN 句")]),s._v(" "),t("p",[s._v("IN 句は最大 1000 個まで指定できるが、200 個程度でも ORA エラーが発生するケースがある。"),t("br"),s._v("\nまた IN 句の少しだけ異なる SQL が大量に発行されると CPU 高騰やメモリ枯渇を招く。"),t("br"),s._v("\n従って 100 を超えるような長い IN 句は使用せず、一時表を利用して "),t("code",[s._v("in (select ・・・ from 一時表)")]),s._v("のように書き換える。")]),s._v(" "),t("h3",{attrs:{id:"not-in-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#not-in-句"}},[s._v("#")]),s._v(" NOT IN 句")]),s._v(" "),t("p",[s._v("原則"),t("code",[s._v("not in（select～）")]),s._v("は使用せずに、"),t("code",[s._v("not exists (select～)")]),s._v("を使用する。"),t("br"),s._v(" "),t("code",[s._v("NOT IN")]),s._v("句は、内部的にソートマージの結合をすることでテーブルをフルスキャンする場合があるため、性能が悪化する可能性がある。")]),s._v(" "),t("h3",{attrs:{id:"union-句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#union-句"}},[s._v("#")]),s._v(" UNION 句")]),s._v(" "),t("p",[t("code",[s._v("union")]),s._v("は"),t("code",[s._v("distinct")]),s._v("処理が含まれパフォーマンス上問題があるため、"),t("code",[s._v("union all")]),s._v("を使用する。")]),s._v(" "),t("h3",{attrs:{id:"select-for-update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select-for-update"}},[s._v("#")]),s._v(" SELECT FOR UPDATE")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("select for update")]),s._v("で複数行にロックをかける場合、同時実行されるとデットロックを起こす可能性があるため、１件のロックでない場合は"),t("code",[s._v("order by")]),s._v("を指定する。")])]),s._v(" "),t("h3",{attrs:{id:"分析関数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析関数"}},[s._v("#")]),s._v(" 分析関数")]),s._v(" "),t("p",[s._v("分析関数の使用は可能だが、性能悪化を招く恐れがあるため、特性を知らない方は DBA に相談する。")]),s._v(" "),t("h3",{attrs:{id:"インデックス"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#インデックス"}},[s._v("#")]),s._v(" インデックス")]),s._v(" "),t("p",[s._v("インデックスの必要性については DBA で最終判断するため、必要とする場合は DBA へ相談する。")]),s._v(" "),t("h3",{attrs:{id:"外部結合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#外部結合"}},[s._v("#")]),s._v(" 外部結合")]),s._v(" "),t("p",[s._v("外部結合する際、内部表（駆動表）はなるべく想定件数の少ない表にする。")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"license"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[s._v("#")]),s._v(" License")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://creativecommons.org/licenses/by/4.0/deed.ja",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://licensebuttons.net/l/by/4.0/88x31.png",alt:"CC-By-4.0"}}),t("OutboundLink")],1)])],1)}),[],!1,null,null,null);t.default=e.exports}}]);