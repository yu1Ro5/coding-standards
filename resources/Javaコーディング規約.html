<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Future Enterprise Coding Standards" />
  <title>Javaコーディング規約</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">body {
font-family: Helvetica, arial, sans-serif;
font-size: 14px;
line-height: 1.6;
padding-top: 10px;
padding-bottom: 10px;
background-color: white;
padding: 30px;
}
body > *:first-child {
margin-top: 0 !important;
}
body > *:last-child {
margin-bottom: 0 !important;
}
body {
margin-left: 300px;
}
#TOC {
position: fixed;
left: 0;
top: 0;
bottom: 0;
overflow-y: auto;
width: 300px;
transition: width, font-size, opacity 300ms, 300ms, 300ms ease-in-out,
ease-in-out, ease-in-out;
padding-left: 1em;
box-sizing: border-box;
}
#TOC ul {
margin: 0 0 0 1em;
padding: 0;
}
@media all and (max-width: 1000px) {
body {
margin-left: 0;
}
#TOC {
overflow: hidden;
width: 0;
opacity: 0;
}
}
@media print {
body {
margin-left: 0;
}
#TOC {
display: none;
}
}
@media print {
.print-hidden {
display: none;
}
}
h1.title {
font-size: 42px;
border-bottom: 2px solid #cccccc;
}
@media print {
h1.title {
text-align: center;
margin-top: 50%;
page-break-before: auto;
}
}
h2.author {
font-size: 12px;
border: none;
color: initial;
text-align: right;
margin: 0;
page-break-after: always;
}
h1 {
page-break-before: always;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin: 20px 0 10px;
padding: 0;
font-weight: bold;
-webkit-font-smoothing: antialiased;
cursor: text;
position: relative;
page-break-after: avoid;
}
a {
color: #4183c4;
}
h1 {
font-size: 28px;
color: black;
}
h2 {
font-size: 24px;
border-bottom: 1px solid #cccccc;
color: black;
}
h3 {
font-size: 18px;
}
h4 {
font-size: 16px;
}
h5 {
font-size: 14px;
}
h6 {
color: #777777;
font-size: 14px;
}
p,
blockquote,
ul,
ol,
dl,
li,
table,
pre {
margin: 15px 0;
}
hr {
border: none;
border-bottom: 1px dashed #cccccc;
}
table {
padding: 0;
border-collapse: collapse;
}
table tr th {
font-weight: bold;
border: 1px solid #cccccc;
text-align: left;
padding: 6px 13px;
}
table tr td {
border: 1px solid #cccccc;
padding: 6px 13px;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
table * {
word-wrap: break-word;
word-break: break-all;
}
pre {
background-color: #f8f8f8;
border: 1px solid #cccccc;
font-size: 13px;
line-height: 19px;
overflow: auto;
padding: 6px 10px;
border-radius: 3px;
}
pre code {
margin: 0;
padding: 0;
white-space: pre;
border: none;
background: transparent;
}
code,
tt {
margin: 0 2px;
padding: 0 5px;
white-space: nowrap;
border: 1px solid #eaeaea;
background-color: #f8f8f8;
border-radius: 3px;
}
div.sourceCode {
page-break-before: avoid;
page-break-inside: avoid;
}
li * {
margin: 0;
}
blockquote {
border-left: 4px solid #dddddd;
padding: 0 15px;
color: #777777;
}
blockquote > :first-child {
margin-top: 0;
}
blockquote > :last-child {
margin-bottom: 0;
}
code.comment-code {
display: block;
white-space: pre;
}
table {
overflow: auto;
display: block;
}
@media screen and (max-width: 1300px) and (min-width: 1001px) {
#TOC {
font-size: 80%;
width: 200px;
}
body {
margin-left: 200px;
}
}
@media screen and (max-width: 1100px) and (min-width: 1001px) {
#TOC {
font-size: 60%;
width: 150px;
}
body {
margin-left: 150px;
}
table tr td {
font-size: 80%;
padding: 3px 6px;
}
}
@media all and (max-width: 1000px) {
table tr td {
font-size: 80%;
padding: 3px 6px;
}
}
@media all and (max-width: 800px) {
table tr td {
font-size: 70%;
}
}
@media all and (max-width: 600px) {
table tr td {
font-size: 60%;
}
}
</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Javaコーディング規約</h1>
<p class="author">Future Enterprise Coding Standards</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#はじめに"><span class="toc-section-number">1</span> はじめに</a></li>
<li><a href="#規約の重要性"><span class="toc-section-number">2</span> 規約の重要性</a>
<ul>
<li><a href="#コーディングの心得"><span class="toc-section-number">2.1</span> コーディングの心得</a>
<ul>
<li><a href="#見やすさを重視せよ"><span class="toc-section-number">2.1.1</span> 見やすさを重視せよ</a></li>
<li><a href="#ネーミングはわかりやすく"><span class="toc-section-number">2.1.2</span> ネーミングはわかりやすく</a></li>
<li><a href="#サンプルを鵜呑みにしない"><span class="toc-section-number">2.1.3</span> サンプルを鵜呑みにしない</a></li>
<li><a href="#同じコードは二度書かない"><span class="toc-section-number">2.1.4</span> 同じコードは二度書かない</a></li>
<li><a href="#役割は一つに"><span class="toc-section-number">2.1.5</span> 役割は一つに</a></li>
</ul></li>
</ul></li>
<li><a href="#ネーミング規約"><span class="toc-section-number">3</span> ネーミング規約</a>
<ul>
<li><a href="#全般"><span class="toc-section-number">3.1</span> 全般</a></li>
<li><a href="#パッケージ"><span class="toc-section-number">3.2</span> パッケージ</a></li>
<li><a href="#クラス"><span class="toc-section-number">3.3</span> クラス</a></li>
<li><a href="#メソッド"><span class="toc-section-number">3.4</span> メソッド</a></li>
<li><a href="#引数"><span class="toc-section-number">3.5</span> 引数</a></li>
<li><a href="#変数全般"><span class="toc-section-number">3.6</span> 変数全般</a></li>
<li><a href="#ローカル変数"><span class="toc-section-number">3.7</span> ローカル変数</a></li>
<li><a href="#enum"><span class="toc-section-number">3.8</span> Enum</a></li>
</ul></li>
<li><a href="#コーディング規約"><span class="toc-section-number">4</span> コーディング規約</a>
<ul>
<li><a href="#全般-1"><span class="toc-section-number">4.1</span> 全般</a></li>
<li><a href="#フォーマット"><span class="toc-section-number">4.2</span> フォーマット</a></li>
<li><a href="#コメント"><span class="toc-section-number">4.3</span> コメント</a></li>
<li><a href="#インポート"><span class="toc-section-number">4.4</span> インポート</a></li>
<li><a href="#コンストラクタ"><span class="toc-section-number">4.5</span> コンストラクタ</a></li>
<li><a href="#メソッド-1"><span class="toc-section-number">4.6</span> メソッド</a></li>
<li><a href="#クラスメソッド"><span class="toc-section-number">4.7</span> クラスメソッド</a></li>
<li><a href="#変数全般-1"><span class="toc-section-number">4.8</span> 変数全般</a></li>
<li><a href="#定数"><span class="toc-section-number">4.9</span> 定数</a></li>
<li><a href="#インスタンス変数"><span class="toc-section-number">4.10</span> インスタンス変数</a></li>
<li><a href="#クラス変数"><span class="toc-section-number">4.11</span> クラス変数</a></li>
<li><a href="#ローカル変数-1"><span class="toc-section-number">4.12</span> ローカル変数</a></li>
<li><a href="#引数-1"><span class="toc-section-number">4.13</span> 引数</a></li>
<li><a href="#継承"><span class="toc-section-number">4.14</span> 継承</a></li>
<li><a href="#インナークラス"><span class="toc-section-number">4.15</span> インナークラス</a></li>
<li><a href="#メンバー順序"><span class="toc-section-number">4.16</span> メンバー順序</a></li>
<li><a href="#インスタンス"><span class="toc-section-number">4.17</span> インスタンス</a></li>
<li><a href="#制御構造"><span class="toc-section-number">4.18</span> 制御構造</a></li>
<li><a href="#文字列操作"><span class="toc-section-number">4.19</span> 文字列操作</a></li>
<li><a href="#数値"><span class="toc-section-number">4.20</span> 数値</a></li>
<li><a href="#日付"><span class="toc-section-number">4.21</span> 日付</a></li>
<li><a href="#三項演算子"><span class="toc-section-number">4.22</span> 三項演算子</a></li>
<li><a href="#switch-式"><span class="toc-section-number">4.23</span> switch 式</a></li>
<li><a href="#switch-文"><span class="toc-section-number">4.24</span> switch 文</a></li>
<li><a href="#コレクション"><span class="toc-section-number">4.25</span> コレクション</a></li>
<li><a href="#ラムダ式メソッド参照コンストラクタ参照"><span class="toc-section-number">4.26</span> ラムダ式・メソッド参照・コンストラクタ参照</a></li>
<li><a href="#実質的-finaleffectively-final"><span class="toc-section-number">4.27</span> 実質的 final（effectively final）</a></li>
<li><a href="#stream-api"><span class="toc-section-number">4.28</span> Stream API</a></li>
<li><a href="#optional"><span class="toc-section-number">4.29</span> Optional</a></li>
<li><a href="#var-local-variable-type-inference"><span class="toc-section-number">4.30</span> var (Local-Variable Type Inference)</a></li>
<li><a href="#レコード"><span class="toc-section-number">4.31</span> レコード</a></li>
<li><a href="#テキストブロック"><span class="toc-section-number">4.32</span> テキストブロック</a></li>
<li><a href="#ストリームinputstream-outputstream"><span class="toc-section-number">4.33</span> ストリーム（InputStream OutputStream）</a></li>
<li><a href="#リソースの解放"><span class="toc-section-number">4.34</span> リソースの解放</a></li>
<li><a href="#例外"><span class="toc-section-number">4.35</span> 例外</a></li>
<li><a href="#ガベージコレクション"><span class="toc-section-number">4.36</span> ガベージコレクション</a></li>
</ul></li>
<li><a href="#コメント規約"><span class="toc-section-number">5</span> コメント規約</a>
<ul>
<li><a href="#よいコメントの鉄則"><span class="toc-section-number">5.1</span> よいコメントの鉄則</a></li>
<li><a href="#java-コメント3-種類の使い分け"><span class="toc-section-number">5.2</span> Java コメント（3 種類）の使い分け</a></li>
</ul></li>
<li><a href="#パフォーマンス"><span class="toc-section-number">6</span> パフォーマンス</a>
<ul>
<li><a href="#stream-api-1"><span class="toc-section-number">6.1</span> Stream API</a></li>
<li><a href="#ラムダ式メソッド参照コンストラクタ参照-1"><span class="toc-section-number">6.2</span> ラムダ式・メソッド参照・コンストラクタ参照</a></li>
<li><a href="#文字列連結"><span class="toc-section-number">6.3</span> 文字列連結</a>
<ul>
<li><a href="#文字列連結繰り返し"><span class="toc-section-number">6.3.1</span> 文字列連結（繰り返し）</a></li>
<li><a href="#文字列連結定数"><span class="toc-section-number">6.3.2</span> 文字列連結（定数）</a></li>
</ul></li>
<li><a href="#list-の種類"><span class="toc-section-number">6.4</span> List の種類</a></li>
<li><a href="#bigdecimal-の-zero-との比較"><span class="toc-section-number">6.5</span> BigDecimal の ZERO との比較</a></li>
</ul></li>
<li><a href="#license"><span class="toc-section-number">7</span> License</a></li>
</ul>
</nav>
<p><page-title></page-title></p>
<p>本コーディング規約は、世の中のシステム開発プロジェクトのために無償で提供致します。<br />
ただし、掲載内容および利用に際して発生した問題、それに伴う損害については、フューチャー株式会社は一切の責務を負わないものとします。<br />
また、掲載している情報は予告なく変更することがございますので、あらかじめご了承下さい。</p>
<section id="はじめに" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> はじめに</h1>
<p>一般に利用・参照されている Java コーディング規約やガイドラインを以下に示す。本規約の作成においても、下記規約類を参照・抜粋している。</p>
<table>
<colgroup>
<col style="width: 18%"></col>
<col style="width: 6%"></col>
<col style="width: 74%"></col>
</colgroup>
<thead>
<tr class="header">
<th>規約</th>
<th>著作者</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Code Conventions for the Java Programming Language</td>
<td>Sun Microsystems</td>
<td><a href="http://www.oracle.com/technetwork/java/codeconvtoc-136057.html">http://www.oracle.com/technetwork/java/codeconvtoc-136057.html</a></td>
</tr>
<tr class="even">
<td>Writing Robust Java Code</td>
<td>Scott W. Ambler</td>
<td><a href="http://www.ambysoft.com/downloads/javaCodingStandards.pdf">http://www.ambysoft.com/downloads/javaCodingStandards.pdf</a></td>
</tr>
<tr class="odd">
<td>オブジェクト倶楽部版 Java コーディング標準</td>
<td>オブジェクト倶楽部</td>
<td><a href="http://objectclub.jp/community/codingstandard/CodingStd.pdf">http://objectclub.jp/community/codingstandard/CodingStd.pdf</a></td>
</tr>
<tr class="even">
<td>電通国際情報際サービス版 Java コーディング規約 2004</td>
<td>電通国際情報サービス</td>
<td><a href="http://objectclub.jp/community/codingstandard/JavaCodingStandard2004.pdf">http://objectclub.jp/community/codingstandard/JavaCodingStandard2004.pdf</a></td>
</tr>
<tr class="odd">
<td>JJGuideline （Java - J2EE Conventions and Guidelines）</td>
<td>Stephan.J &amp; JCS Team</td>
<td><a href="http://www.fedict.belgium.be/sites/default/files/downloads/Java_J2EE_conventions_and_guidelines_EN.pdf">http://www.fedict.belgium.be/sites/default/files/downloads/Java_J2EE_conventions_and_guidelines_EN.pdf</a></td>
</tr>
<tr class="even">
<td>Google Java Style (非公式和訳)</td>
<td>Google</td>
<td><a href="https://kazurof.github.io/GoogleJavaStyle-ja/">https://kazurof.github.io/GoogleJavaStyle-ja/</a></td>
</tr>
<tr class="odd">
<td>Acroquest Technology Java コーディング規約</td>
<td>Acroquest Technology</td>
<td><a href="https://www.acroquest.co.jp/webworkshop/javacordingrule/Acroquest_JavaCodingStandard_6_7.pdf">https://www.acroquest.co.jp/webworkshop/javacordingrule/Acroquest_JavaCodingStandard_6_7.pdf</a><br>※現在は削除されています</td>
</tr>
</tbody>
</table>
<p>※ Sun Microsystems の規約は Java 草創期から一応の標準という位置づけだったが、オブジェクト指向、及び、その開発環境の普及・発展によって、設計やコーディングにおいて、直接的に有用な知識や豊富な指針を含むような優れた規約や、ツールなどによる機械的な準拠チェックと連携する規約が普及してきている。</p>
</section>
<section id="規約の重要性" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> 規約の重要性</h1>
<p>標準としての規約を定義し、遵守することの重要性を以下に示す。</p>
<ul>
<li>ソフトウェアメンテナンスにおける、可読性・保守性・拡張性の向上</li>
<li>問題を起こしやすい実装を未然に回避することによる、品質・生産性の向上</li>
<li>標準規約を通して得られる一般的な実装知識やノウハウ（＝学習効果）</li>
</ul>
<section id="コーディングの心得" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> コーディングの心得</h2>
<p>長いプログラムを記述すること（ステップ数）によって生産性が評価されたのは、過去の時代の出来事である。現在は、クラスやメソッドの役割が明確で、ロジックが読みやすく、保守性に優れたプログラムを記述することが評価される。コーディング規約は、コードの書き方に関する一種のパターンと考えることもでき、コードの保守性を向上させる具体的な方法を示している。したがって、規約の一つ一つの意図を理解し、守ることが重要になる。しかし、保守性に優れたコードを作成するためには、コーディング規約を守ることに加えて、良いコードを記述するための基本的な心構えをしっかり心に留めておく必要がある。以下では、その心得について述べる。</p>
<p>【コーディングの心得 5 か条】</p>
<ol type="1">
<li>見やすさを重視せよ</li>
<li>ネーミングはわかりやすく</li>
<li>サンプルを鵜呑みにしない</li>
<li>同じコードを二度書かない</li>
<li>役割は一つに</li>
</ol>
<section id="見やすさを重視せよ" data-number="2.1.1">
<h3 data-number="2.1.1"><span class="header-section-number">2.1.1</span> 見やすさを重視せよ</h3>
<p>「良いコード」の基本は、「他の人が読んでもわかりやすいと感じられるコード」。コードの見やすさは、フォーマットはもちろん、ロジックの簡潔さや API の常識的な使い方などから生まれる。コーディングにあたっては、常に他の人の視点を意識しながら、見やすさに気を配って記述する必要がある。例えば、自分で記述したコードであっても、しばらくたってから読み返してみると理解に時間がかかった経験は誰にもあるはず。「3 日前に書いたコードは他人のコードと同じ」ということもよく言われる。見やすさを重視することは、他の人のためだけでなく自分のためにもなる。コードを読んでもすぐに理解できないような実装は、再考（リファクタリング）の必要がある。</p>
</section>
<section id="ネーミングはわかりやすく" data-number="2.1.2">
<h3 data-number="2.1.2"><span class="header-section-number">2.1.2</span> ネーミングはわかりやすく</h3>
<p>コーディングでは、様々な変数やメソッドなどにネーミング（名前付け）する必要がある。ネーミングとは、本来、その対象の本質を表すような名前を考える作業である。大変難易度の高い作業だが、一方で適当に行ってもコードの動作は変わらないため、人によっては手を抜きがちとなる。しかし、ネーミングの良し悪しは、コードの可読性に非常に大きな影響を及ぼす。例えば、「C0001」というクラス名があるとする。これでは、何を表すクラスなのかすぐにはわからないだろう。また、「int p = 5000;」という記述があるとする。プログラマに聞くと、変数名 p は価格(Price)の略だと言うのだが、それならば略さずに、「int price = 5000;」としたほうが分かりやすいはずである。「ネーミングはわかりやすく」の背景には、読んで内容が理解できるという意味で、文章のようなプログラミングを行う、という考え方に基づく。</p>
</section>
<section id="サンプルを鵜呑みにしない" data-number="2.1.3">
<h3 data-number="2.1.3"><span class="header-section-number">2.1.3</span> サンプルを鵜呑みにしない</h3>
<p>サンプルコードを活用すること自体は、著作権等を侵害しなければ問題ない。問題なのは、その内容や背景を理解しないまま、サンプルコードだけを鵜呑みにして、「おまじない」として表面的に適用してしまうことである。コードを「おまじない」ととらえていては、サンプルコードの間違いを気づかないまま適用してしまうこともある。例えば、ストリームのクローズ処理を行っていないサンプルコードであっても、それに気づかずに自分のコードに適用してしまい、後で思わぬ障害を引き起こすという可能性がある。サンプルコードは、そこで説明する内容に絞ったコードが多いため、このような例はよく見られる。また、サンプルコードをそのまま適用した結果、自分が記述すべきコードには必要のないコードが含まれてしまう場合もある。その場合、コードの可読性を下げる原因となる。自分のコードは、自分で深く理解して記述すべきである。</p>
</section>
<section id="同じコードは二度書かない" data-number="2.1.4">
<h3 data-number="2.1.4"><span class="header-section-number">2.1.4</span> 同じコードは二度書かない</h3>
<p>コードをコピー・ペーストしていませんか？コピー・ペーストしてしまうと、何らかの修正をする際に、全ての個所に同じ修正をする羽目になる。同じコードが現れるようならまとめて一つにし、外に出してコールするような書き方にすべきである。同じコードをまとめる作業は、どちらかといえば、コーディング時よりリファクタリング（ソフトウェアの外部的振る舞いを変更せずに内部構造を改善する作業）で行われることが多い。しかし、コーディング時からできるだけ気をつけておきたいことでもある。</p>
</section>
<section id="役割は一つに" data-number="2.1.5">
<h3 data-number="2.1.5"><span class="header-section-number">2.1.5</span> 役割は一つに</h3>
<p>メソッドの役割が明確で、かつ 1 つであれば単体テストが行いやすくなる。つまり、コードの「試験性」が高まる。また、役割が一つであれば、後でコードを変更する際に修正箇所がわかりやすいため、障害修正に要する時間が短くなる。つまり、コードの「保守性」があがることになる。例えば、「チェックをして実行する」機能を実現するために、checkAndDo()メソッドが存在したとする。この場合、このメソッドは check()メソッドと do()メソッドに分割すべきである。なぜなら、checkAndDo()メソッドの check()ロジックに誤りがあった場合、do()メソッドに書かれる内容まで把握する必要が生じるためである。分割してあれば、check()メソッドだけの変更で済む。このことはクラスの設計にもあてはまる。</p>
</section>
</section>
</section>
<section id="ネーミング規約" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> ネーミング規約</h1>
<section id="全般" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> 全般</h2>
<ul>
<li><p>大文字・小文字の違いで名前を区別しない。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">private</span> <span class="dt">int</span> carNumber;</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">private</span> <span class="dt">int</span> trainNumber;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">private</span> <span class="dt">int</span> num;</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">private</span> <span class="dt">int</span> Num;</span></code></pre></div></li>
</ul>
</section>
<section id="パッケージ" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> パッケージ</h2>
<ul>
<li>パッケージ名はすべて小文字にする</li>
<li>パッケージ名は意味のある名前にする</li>
<li>サブパッケージ名の重複は可能</li>
</ul>
</section>
<section id="クラス" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> クラス</h2>
<ul>
<li><p>クラス名は単語の先頭を大文字にする<br />
良い例：</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">public</span> <span class="kw">class</span> Entry {</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">public</span> <span class="kw">class</span> entry {</span></code></pre></div></li>
<li><p>インターフェース名、Enum 名、Record 名はクラス名に準ずる</p></li>
</ul>
</section>
<section id="メソッド" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> メソッド</h2>
<ul>
<li><p>コンストラクタと同じ名前のメソッドはつくらない</p></li>
<li><p>メソッド名は区切りのみ大文字にする<br />
良い例：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">getName</span>() {</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="co">//・・・</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">getname</span>() {</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="co">//・・・</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>}</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">GETNAME</span>() {</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="co">//・・・</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>}</span></code></pre></div></li>
<li><p>変換メソッド名は「“<code>to</code>”+オブジェクト名」にする<br />
良い例：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">toString</span>() {</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">string</span>() {</span></code></pre></div></li>
<li><p>ゲッターメソッド名は「“<code>get</code>”+属性名」にする<br />
型が<code>boolean</code>の場合は「“<code>is</code>”+属性名」にする</p></li>
<li><p>セッターメソッド名は「“<code>set</code>”+属性名」にする</p></li>
<li><p><code>boolean</code>変数を返すメソッド名は<code>true</code>/<code>false</code>の状態がわかるようにする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isAsleep</span>() {</span>
<span id="cb9-2"><a href="#cb9-2"></a>}</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">exists</span>() {</span>
<span id="cb9-4"><a href="#cb9-4"></a>}</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">hasExpired</span>() {</span>
<span id="cb9-6"><a href="#cb9-6"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="引数" data-number="3.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span> 引数</h2>
<ul>
<li><p>メソッドのパラメータ名とインスタンス変数名を一緒にしない<br />
ただし、アクセサメソッドやコンストラクタなど、統合開発環境の機能により自動生成するものに関しては可とする。<br />
アンダースコア　<code>_</code>　をつけての区別は原則禁止とする。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">public</span> <span class="dt">double</span> <span class="fu">calc</span>(<span class="dt">double</span> rate) {</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="kw">return</span> <span class="kw">this</span>.<span class="fu">value</span> * rate;</span>
<span id="cb10-3"><a href="#cb10-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">public</span> <span class="dt">double</span> <span class="fu">calc</span>(<span class="dt">double</span> value) {</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="kw">return</span> <span class="kw">this</span>.<span class="fu">value</span> * value;</span>
<span id="cb11-3"><a href="#cb11-3"></a>}</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="kw">public</span> <span class="dt">double</span> <span class="fu">calc</span>(<span class="dt">double</span> _value) {</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="kw">return</span> <span class="kw">this</span>.<span class="fu">value</span> * _value;</span>
<span id="cb11-7"><a href="#cb11-7"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="変数全般" data-number="3.6">
<h2 data-number="3.6"><span class="header-section-number">3.6</span> 変数全般</h2>
<ul>
<li><p><code>boolean</code>変数は<code>true</code>/<code>false</code> の状態がわかるようにする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">private</span> <span class="dt">boolean</span> isOpen;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">private</span> <span class="dt">boolean</span> flag;</span></code></pre></div></li>
<li><p>定数は全て<code>static final</code>とし、すべて大文字、区切りは“<code>_</code>”</p>
<p>良い例：</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> SYSTEM_NAME = <span class="st">&quot;販売管理システム&quot;</span>;</span></code></pre></div></li>
<li><p>変数名は小文字とし、単語の区切りのみ大文字にする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">private</span> <span class="bu">String</span> thisIsString;</span></code></pre></div>
<p>変数名に固有名詞が含まれる場合、先頭をのぞき、単語の区切り以外に大文字を使用してもよい</p>
<p>良い例：</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">private</span> <span class="bu">String</span> thisIsIPAddress;</span></code></pre></div></li>
</ul>
</section>
<section id="ローカル変数" data-number="3.7">
<h2 data-number="3.7"><span class="header-section-number">3.7</span> ローカル変数</h2>
<ul>
<li><p>スコープが狭い変数名は省略した名前でもよい<br />
良い例：</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">if</span> (・・・) {</span>
<span id="cb17-2"><a href="#cb17-2"></a>    <span class="bu">String</span> s = <span class="st">&quot;・・・・&quot;</span>;</span>
<span id="cb17-3"><a href="#cb17-3"></a>   <span class="co">//変数sを利用した処理 数行</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1"></a><span class="bu">String</span> s = <span class="st">&quot;・・・・&quot;</span>;</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">if</span> (・・・) {</span>
<span id="cb18-3"><a href="#cb18-3"></a>   <span class="co">//変数sを利用した処理</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>}</span>
<span id="cb18-5"><a href="#cb18-5"></a>・・・</span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="kw">if</span> (・・・) {</span>
<span id="cb18-7"><a href="#cb18-7"></a>   <span class="co">//変数sを利用した処理</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>}</span></code></pre></div>
<p>変数<code>s</code>の利用範囲が広いので役割が明確になる変数名に変更する。</p></li>
<li><p>for 文のループカウンタは、ネストごとに“<code>i</code>”,“<code>j</code>”,“<code>k</code>”・・・を使う</p></li>
</ul>
</section>
<section id="enum" data-number="3.8">
<h2 data-number="3.8"><span class="header-section-number">3.8</span> Enum</h2>
<ul>
<li><p>Enum 名はクラス名と同じく、単語の先頭を大文字にする</p></li>
<li><p>列挙定数は定数と同じく、すべて大文字、区切りは“<code>_</code>”</p>
<p>良い例：</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">enum</span> Season {</span>
<span id="cb19-2"><a href="#cb19-2"></a>    WINTER,</span>
<span id="cb19-3"><a href="#cb19-3"></a>    SPRING,</span>
<span id="cb19-4"><a href="#cb19-4"></a>    SUMMER,</span>
<span id="cb19-5"><a href="#cb19-5"></a>    FALL</span>
<span id="cb19-6"><a href="#cb19-6"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">enum</span> Season {</span>
<span id="cb20-2"><a href="#cb20-2"></a>    winter,</span>
<span id="cb20-3"><a href="#cb20-3"></a>    spring,</span>
<span id="cb20-4"><a href="#cb20-4"></a>    summer,</span>
<span id="cb20-5"><a href="#cb20-5"></a>    fall</span>
<span id="cb20-6"><a href="#cb20-6"></a>}</span></code></pre></div></li>
</ul>
</section>
</section>
<section id="コーディング規約" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> コーディング規約</h1>
<section id="全般-1" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> 全般</h2>
<ul>
<li><p>原則としてオブジェクトの参照にはインターフェースを利用する<br />
オブジェクトを参照する際は、そのオブジェクトの実装クラスを用いて宣言できるが、実装クラスに適切なインターフェースが存在している場合は、必ずインターフェースを用いて宣言すること。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1"></a><span class="bu">List</span>&lt;Entry&gt; list = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">String</span>&gt; map = <span class="kw">new</span> <span class="bu">HashMap</span>&lt;&gt;();</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb22-1"><a href="#cb22-1"></a><span class="bu">ArrayList</span>&lt;Entry&gt; list = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="bu">HashMap</span>&lt;<span class="bu">String</span>, <span class="bu">String</span>&gt; map = <span class="kw">new</span> <span class="bu">HashMap</span>&lt;&gt;();</span></code></pre></div></li>
<li><p>推奨されない API を使用しない<br />
アノテーション<code>@Deprecated</code>で指定されたメソッドは利用しないこと。</p></li>
<li><p>使われないコードは書かない</p></li>
<li><p>宣言は適切な権限で行うこと（<code>public</code>, <code>protected</code>, <code>private</code>）</p></li>
<li><p><code>final</code> を適切に利用する<br />
継承されないクラス、オーバーライドされないメソッド、値の変わらない変数（つまり定数）等、変化のないもの/変化させたくないものについては<code>final</code> で宣言する。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">//継承されないクラス</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw">public</span> <span class="dt">final</span> <span class="kw">class</span> CalculateUtils {</span>
<span id="cb23-3"><a href="#cb23-3"></a>    <span class="co">//・・・</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>}</span>
<span id="cb23-5"><a href="#cb23-5"></a></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="co">//値の変わらない変数（定数）</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> MESSAGE = <span class="st">&quot;・・・&quot;</span>;</span>
<span id="cb23-8"><a href="#cb23-8"></a></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co">//オーバーライドされないメソッド</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="kw">public</span> <span class="dt">final</span> <span class="dt">int</span> <span class="fu">sum</span>(<span class="co">/*変化させたくない値*/</span><span class="dt">final</span> <span class="dt">int</span><span class="kw">... </span>values) {</span>
<span id="cb23-11"><a href="#cb23-11"></a>    <span class="dt">int</span> sumValue = <span class="dv">0</span>;</span>
<span id="cb23-12"><a href="#cb23-12"></a>    <span class="kw">for</span> (<span class="co">/*変化させたくない値*/</span><span class="dt">final</span> <span class="dt">int</span> value : values) {</span>
<span id="cb23-13"><a href="#cb23-13"></a>        sumValue += value;</span>
<span id="cb23-14"><a href="#cb23-14"></a>    }</span>
<span id="cb23-15"><a href="#cb23-15"></a>    <span class="kw">return</span> sumValue;</span>
<span id="cb23-16"><a href="#cb23-16"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="フォーマット" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> フォーマット</h2>
<ul>
<li><p>インデントは空白文字 4 文字分の Tab を使用する</p></li>
<li><p>長すぎる行は避ける</p></li>
<li><p><code>{</code> の後にステートメントを記述しない<br />
良い例：</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">if</span> (s == <span class="kw">null</span>) {</span>
<span id="cb24-2"><a href="#cb24-2"></a>    <span class="kw">return</span> <span class="dv">0</span>;</span>
<span id="cb24-3"><a href="#cb24-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">if</span> (s == <span class="kw">null</span>) {<span class="kw">return</span> <span class="dv">0</span>;}</span></code></pre></div></li>
<li><p>1 行に 2 つ以上のステートメントを記述しない<br />
悪い例：</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb26-1"><a href="#cb26-1"></a>} <span class="kw">catch</span> (<span class="bu">Exception</span> e) {</span>
<span id="cb26-2"><a href="#cb26-2"></a>    log.<span class="fu">error</span>(<span class="st">&quot;Error&quot;</span>, e);<span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb26-3"><a href="#cb26-3"></a>}</span></code></pre></div></li>
<li><p>カンマの後には空白文字を<br />
良い例：</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">process</span>(x, y, z);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">process</span>(x,y,z);</span></code></pre></div></li>
<li><p>代入演算子（ <code>=</code> , <code>+=</code> , <code>-=</code> , …）の前後には空白文字を挿入する<br />
良い例：</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1"></a><span class="dt">int</span> a = x;</span>
<span id="cb29-2"><a href="#cb29-2"></a>a += <span class="dv">10</span>;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb30-1"><a href="#cb30-1"></a><span class="dt">int</span> a=x;</span>
<span id="cb30-2"><a href="#cb30-2"></a>a+= <span class="dv">10</span>;</span></code></pre></div></li>
<li><p>for 文内のセミコロンの後には空白文字を挿入する<br />
良い例：</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; array.<span class="fu">length</span>; i++) {</span>
<span id="cb31-2"><a href="#cb31-2"></a>    <span class="co">//・・・</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>;i &lt; array.<span class="fu">length</span> ;i++) {</span>
<span id="cb32-2"><a href="#cb32-2"></a>    <span class="co">//・・・</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>}</span></code></pre></div></li>
<li><p><code>++</code> や <code>--</code> とオペランドの間には空白文字を入れない<br />
良い例：</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb33-1"><a href="#cb33-1"></a>i++;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb34-1"><a href="#cb34-1"></a>i ++;</span></code></pre></div></li>
<li><p>ビット演算子（ <code>|</code> 、 <code>&amp;</code> 、 <code>^</code> 、 <code>&lt;&lt;</code> 、 <code>&gt;&gt;</code> ）の前後には空白文字を挿入する</p></li>
<li><p>論理演算子（ <code>||</code> 、<code>&amp;&amp;</code>）の前後には空白文字を挿入する</p></li>
<li><p>関係演算子（ <code>&lt;</code> 、 <code>&gt;</code> 、 <code>&gt;=</code> 、 <code>&lt;=</code>、<code>==</code>、 <code>!=</code> ）の前後には空白文字を挿入する</p></li>
<li><p>算術演算子（ <code>＋</code> 、 <code>－</code> 、 <code>＊</code> 、 <code>/</code> 、 <code>%</code> ）の前後には空白文字を挿入する</p></li>
<li><p>return 文ではカッコを使わない<br />
良い例：</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb35-1"><a href="#cb35-1"></a><span class="dt">int</span> answer = (a + b + c) * d;</span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="kw">return</span> answer;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">return</span> ((a + b + c) * d);</span></code></pre></div></li>
<li><p>if などの条件式で boolean の変数を比較しない</p>
<p>良い例：</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">if</span> (hasStock)</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb38-1"><a href="#cb38-1"></a><span class="kw">if</span> (hasStock == <span class="kw">true</span>)</span></code></pre></div></li>
<li><p>不等号の向きは左向き（ <code>&lt;</code> 、 <code>&lt;=</code> ）にする<br />
良い例：</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">if</span> (from &lt;= x &amp;&amp; x &lt;= to) {</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb40-1"><a href="#cb40-1"></a><span class="kw">if</span> (x &gt;= from &amp;&amp; x &lt;= to) {</span></code></pre></div></li>
</ul>
</section>
<section id="コメント" data-number="4.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span> コメント</h2>
<ul>
<li><p>ファイルの先頭への Copyright の表記について<br />
ソースのファイルヘッダにコピーライト標記は法的拘束力がないため、不要とする。<br />
ただし、顧客からの要求があった場合を除く。</p></li>
<li><p>Javadoc コメントには、少なくとも author と version(クラス)、param と return と exception(メソッド)を記述する</p>
<ul>
<li>今後もバージョンアップのリリースが予定されているソースでは、上記に加えて since（バージョン）を記述する</li>
<li><code>@Override</code>のあるメソッドでは、上記に加えて<code>{@Inherit}</code>を記述する</li>
</ul></li>
<li><p>Javadoc 　クラスヘッダコメントのフォーマットは以下の通り</p>
<p>良い例：</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb41-1"><a href="#cb41-1"></a><span class="co">/**</span></span>
<span id="cb41-2"><a href="#cb41-2"></a> <span class="co">*</span> Action（or Bean）クラス　メニュー名称</span>
<span id="cb41-3"><a href="#cb41-3"></a> <span class="co">*</span></span>
<span id="cb41-4"><a href="#cb41-4"></a> <span class="co">* </span><span class="an">@author </span>姓 名</span>
<span id="cb41-5"><a href="#cb41-5"></a> <span class="co">*</span> <span class="an">@version </span>バージョン YYYY<span class="co">/</span>MM<span class="co">/</span>DD 説明</span>
<span id="cb41-6"><a href="#cb41-6"></a> <span class="co">*/</span></span></code></pre></div></li>
<li><p>コメントは必要なものだけを簡潔に<br />
悪い例：</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb42-1"><a href="#cb42-1"></a><span class="co">/**</span></span>
<span id="cb42-2"><a href="#cb42-2"></a> <span class="co">*</span> 文字列に変換</span>
<span id="cb42-3"><a href="#cb42-3"></a> <span class="co">*/</span></span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="at">@Override</span></span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="kw">public</span> <span class="bu">String</span> <span class="fu">toString</span>() {</span>
<span id="cb42-6"><a href="#cb42-6"></a></span>
<span id="cb42-7"><a href="#cb42-7"></a><span class="co">/**</span></span>
<span id="cb42-8"><a href="#cb42-8"></a> <span class="co">*</span> コピー</span>
<span id="cb42-9"><a href="#cb42-9"></a> <span class="co">*</span></span>
<span id="cb42-10"><a href="#cb42-10"></a> <span class="co">* </span><span class="an">@return </span>コピーしたインスタンス</span>
<span id="cb42-11"><a href="#cb42-11"></a> <span class="co">*/</span></span>
<span id="cb42-12"><a href="#cb42-12"></a><span class="kw">public</span> Entry <span class="fu">copy</span>() {</span></code></pre></div></li>
<li><p>不要なコメントは記載しない</p>
<ul>
<li>コードからすぐわかること・冗長なコメント</li>
<li>名前の説明<br />
コメントではなくわかりやすい名前を付ける。</li>
<li>別システムで管理している内容<br />
ソースコード管理システム、バグトラッキングシステムで管理している内容はソースコードにコメントで記載する必要はない。
<ul>
<li>コメントアウトされたコード<br />
ソースコード管理システムで管理されている</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="インポート" data-number="4.4">
<h2 data-number="4.4"><span class="header-section-number">4.4</span> インポート</h2>
<ul>
<li><p><code>java.lang</code>パッケージはインポートしない</p>
<p>悪い例：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb43-1"><a href="#cb43-1"></a><span class="kw">import</span><span class="im"> java.lang.String;</span><span class="co">//必要のない記述</span></span></code></pre></div></li>
<li><p>原則として static インポートしない<br />
JUnit の作成やフレームワークとして static インポートが推奨されるような場合は利用してもよい</p></li>
<li><p>原則としてオンデマンドのインポート宣言(type-import-on-demand declaration)（アスタリスク<code>*</code>によるインポート） は行わない</p>
<p>悪い例：</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb44-1"><a href="#cb44-1"></a><span class="kw">import</span><span class="im"> java.util.*;</span></span></code></pre></div></li>
</ul>
</section>
<section id="コンストラクタ" data-number="4.5">
<h2 data-number="4.5"><span class="header-section-number">4.5</span> コンストラクタ</h2>
<ul>
<li><p>public 宣言していないクラスには<code>public</code>権限のコンストラクタを作らない<br />
良い例：</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb45-1"><a href="#cb45-1"></a><span class="kw">class</span> Entry {</span>
<span id="cb45-2"><a href="#cb45-2"></a>    <span class="co">//・・・</span></span>
<span id="cb45-3"><a href="#cb45-3"></a>    <span class="fu">Entry</span>(<span class="dt">int</span> id) {</span>
<span id="cb45-4"><a href="#cb45-4"></a>        <span class="co">//・・・</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>    }</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb46-1"><a href="#cb46-1"></a><span class="kw">class</span> Entry {</span>
<span id="cb46-2"><a href="#cb46-2"></a>    <span class="co">//・・・</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>    <span class="kw">public</span> <span class="fu">Entry</span>(<span class="dt">int</span> id) {</span>
<span id="cb46-4"><a href="#cb46-4"></a>        <span class="co">//・・・</span></span>
<span id="cb46-5"><a href="#cb46-5"></a>    }</span></code></pre></div></li>
<li><p>インスタンスメンバを持たない（static メンバのみの）クラスは、<code>private</code>権限のコンストラクタを作成する</p></li>
</ul>
</section>
<section id="メソッド-1" data-number="4.6">
<h2 data-number="4.6"><span class="header-section-number">4.6</span> メソッド</h2>
<ul>
<li><p>オーバーライドさせたくないメソッドは<code>final</code>を利用する</p></li>
<li><p>戻り値が配列のメソッドで、戻る配列のサイズが 0 の場合、メソッドを使用するクライアントの余計な null チェックのロジックを回避するため、null ではなく長さゼロの配列を戻すようにする。 良い例：</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb47-1"><a href="#cb47-1"></a><span class="kw">public</span> <span class="bu">String</span>[] <span class="fu">toArray</span>(<span class="bu">String</span> s) {</span>
<span id="cb47-2"><a href="#cb47-2"></a>    <span class="kw">if</span> (s == <span class="kw">null</span> || s.<span class="fu">isEmpty</span>()) {</span>
<span id="cb47-3"><a href="#cb47-3"></a>        <span class="kw">return</span> ArrayUtils.<span class="fu">EMPTY_STRING_ARRAY</span>;</span>
<span id="cb47-4"><a href="#cb47-4"></a>    }</span>
<span id="cb47-5"><a href="#cb47-5"></a>    <span class="kw">return</span> <span class="kw">new</span> <span class="bu">String</span>[] { s };</span>
<span id="cb47-6"><a href="#cb47-6"></a>}</span>
<span id="cb47-7"><a href="#cb47-7"></a></span>
<span id="cb47-8"><a href="#cb47-8"></a><span class="kw">public</span> <span class="bu">List</span>&lt;<span class="bu">String</span>&gt; <span class="fu">toList</span>(<span class="bu">String</span> s) {</span>
<span id="cb47-9"><a href="#cb47-9"></a>    <span class="kw">if</span> (s == <span class="kw">null</span> || s.<span class="fu">isEmpty</span>()) {</span>
<span id="cb47-10"><a href="#cb47-10"></a>        <span class="kw">return</span> <span class="bu">Collections</span>.<span class="fu">emptyList</span>();</span>
<span id="cb47-11"><a href="#cb47-11"></a>    }</span>
<span id="cb47-12"><a href="#cb47-12"></a>    <span class="kw">return</span> <span class="bu">List</span>.<span class="fu">of</span>(s);</span>
<span id="cb47-13"><a href="#cb47-13"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb48-1"><a href="#cb48-1"></a><span class="kw">public</span> <span class="bu">String</span>[] <span class="fu">toArray</span>(<span class="bu">String</span> s) {</span>
<span id="cb48-2"><a href="#cb48-2"></a>    <span class="kw">if</span> (s == <span class="kw">null</span> || s.<span class="fu">isEmpty</span>()) {</span>
<span id="cb48-3"><a href="#cb48-3"></a>        <span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb48-4"><a href="#cb48-4"></a>    }</span>
<span id="cb48-5"><a href="#cb48-5"></a>    <span class="kw">return</span> <span class="kw">new</span> <span class="bu">String</span>[] { s };</span>
<span id="cb48-6"><a href="#cb48-6"></a>}</span>
<span id="cb48-7"><a href="#cb48-7"></a></span>
<span id="cb48-8"><a href="#cb48-8"></a><span class="kw">public</span> <span class="bu">List</span>&lt;<span class="bu">String</span>&gt; <span class="fu">toList</span>(<span class="bu">String</span> s) {</span>
<span id="cb48-9"><a href="#cb48-9"></a>    <span class="kw">if</span> (s == <span class="kw">null</span> || s.<span class="fu">isEmpty</span>()) {</span>
<span id="cb48-10"><a href="#cb48-10"></a>        <span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb48-11"><a href="#cb48-11"></a>    }</span>
<span id="cb48-12"><a href="#cb48-12"></a>    <span class="kw">return</span> <span class="bu">List</span>.<span class="fu">of</span>(s);</span>
<span id="cb48-13"><a href="#cb48-13"></a>}</span></code></pre></div></li>
<li><p>メソッドは 1 つの役割にする</p></li>
</ul>
</section>
<section id="クラスメソッド" data-number="4.7">
<h2 data-number="4.7"><span class="header-section-number">4.7</span> クラスメソッド</h2>
<ul>
<li><p>クラスメソッドを利用するときは、クラス名を使って呼び出す<br />
良い例：</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb49-1"><a href="#cb49-1"></a><span class="dt">int</span> comp = <span class="bu">Integer</span>.<span class="fu">compare</span>(x, y);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb50-1"><a href="#cb50-1"></a><span class="bu">Integer</span> a = <span class="co">//</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="dt">int</span> comp = a.<span class="fu">compare</span>(x, y);</span></code></pre></div></li>
</ul>
</section>
<section id="変数全般-1" data-number="4.8">
<h2 data-number="4.8"><span class="header-section-number">4.8</span> 変数全般</h2>
<ul>
<li><p>1 つのステートメントには 1 つの変数宣言<br />
良い例：</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb51-1"><a href="#cb51-1"></a><span class="co">/**</span> 科目コード <span class="co">*/</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="kw">private</span> <span class="bu">String</span> code;</span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="co">/**</span> 科目名 <span class="co">*/</span></span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="kw">private</span> <span class="bu">String</span> name;</span>
<span id="cb51-5"><a href="#cb51-5"></a><span class="co">/**</span> 科目略名 <span class="co">*/</span></span>
<span id="cb51-6"><a href="#cb51-6"></a><span class="kw">private</span> <span class="bu">String</span> shortName;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb52-1"><a href="#cb52-1"></a><span class="kw">private</span> <span class="bu">String</span> code, name, shortName;</span></code></pre></div></li>
<li><p>リテラルは使用しない<br />
リテラルとは、コード中に、表現が定数として直接現れており、記号やリストで表現することができないものを指す（数値、文字列両方含む　通称マジックナンバー）。コードの可読性・保守性の低下を防ぐために、リテラル定数（<code>static final</code> フィールド）を使用すること。<br />
例外：<code>-1</code>,<code>0</code>,<code>1</code> 等をカウント値としてループ処理等で使用するような場合</p>
<p>良い例：</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb53-1"><a href="#cb53-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">double</span> ONE_MILE_METRE = <span class="fl">1609.</span><span class="dv">344</span>;</span>
<span id="cb53-2"><a href="#cb53-2"></a></span>
<span id="cb53-3"><a href="#cb53-3"></a><span class="kw">public</span> <span class="dt">double</span> <span class="fu">mileToMetre</span>(<span class="dt">double</span> mi) {</span>
<span id="cb53-4"><a href="#cb53-4"></a>    <span class="kw">return</span> mi * ONE_MILE_METRE;</span>
<span id="cb53-5"><a href="#cb53-5"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb54-1"><a href="#cb54-1"></a><span class="kw">public</span> <span class="dt">double</span> <span class="fu">mileToMetre</span>(<span class="dt">double</span> mi) {</span>
<span id="cb54-2"><a href="#cb54-2"></a>    <span class="kw">return</span> mi * <span class="fl">1609.</span><span class="dv">344</span>;</span>
<span id="cb54-3"><a href="#cb54-3"></a>}</span></code></pre></div>
<ul>
<li><p>リテラル定数の名前はその値の意味を正しく表現したものにする</p>
<p>悪い例：</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb55-1"><a href="#cb55-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> ZERO = <span class="dv">0</span>;</span></code></pre></div></li>
</ul></li>
<li><p>配列宣言は「<code>型名[]</code>」にする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb56-1"><a href="#cb56-1"></a><span class="kw">private</span> <span class="dt">int</span>[] sampleArray = <span class="kw">new</span> <span class="dt">int</span>[<span class="dv">10</span>];</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb57-1"><a href="#cb57-1"></a><span class="kw">private</span> <span class="dt">int</span> sampleArray[] = <span class="kw">new</span> <span class="dt">int</span>[<span class="dv">10</span>];</span></code></pre></div></li>
<li><p>できるだけローカル変数を利用する<br />
ローカル変数で事足りるものをインスタンス変数として利用するなど、必要のないインスタンス変数を定義すると、パフォーマンスや可読性の低下やの大きな要因となる上、マルチスレッドを意識した際に不整合がおきる可能性があるので、インスタンス変数は必要性を充分に考慮してから使用すること。</p></li>
<li><p>定数は<code>final</code>で宣言する</p></li>
<li><p>ローカル変数とインスタンス変数を使いわける</p></li>
</ul>
</section>
<section id="定数" data-number="4.9">
<h2 data-number="4.9"><span class="header-section-number">4.9</span> 定数</h2>
<ul>
<li><p><code>public</code> で宣言するクラス変数とインスタンス変数は、定数のみとし、 <code>static final</code> で定義する<br />
<code>final</code> ではない <code>static</code> な定数は作成しない。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb58-1"><a href="#cb58-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> PROTOCOL_HTTP = <span class="st">&quot;http&quot;</span>;</span></code></pre></div></li>
<li><p>定数（ <code>static</code> フィールド）に、 <code>static</code> ではないメソッドから書き込まない</p></li>
<li><p>定数は、プリミティブ型もしくは、不変（Immutable）オブジェクトで参照する</p>
<ul>
<li><p>不変<code>List</code>の生成には<code>List.of()</code>を利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb59-1"><a href="#cb59-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">List</span>&lt;<span class="bu">Integer</span>&gt; VALUES = <span class="bu">List</span>.<span class="fu">of</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb60-1"><a href="#cb60-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">List</span>&lt;<span class="bu">Integer</span>&gt; VALUES = <span class="bu">Arrays</span>.<span class="fu">asList</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>);</span></code></pre></div></li>
<li><p>不変<code>Set</code>の生成には<code>Set.of()</code>を利用する</p></li>
<li><p>不変<code>Map</code>の生成には<code>Map.of()</code>を利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb61-1"><a href="#cb61-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">Map</span>&lt;<span class="bu">Integer</span>, <span class="bu">String</span>&gt; VALUES_MAP = <span class="bu">Map</span>.<span class="fu">of</span>(<span class="dv">1</span>, <span class="st">&quot;A&quot;</span>, <span class="dv">2</span>, <span class="st">&quot;B&quot;</span>, <span class="dv">3</span>, <span class="st">&quot;C&quot;</span>);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb62-1"><a href="#cb62-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">Map</span>&lt;<span class="bu">Integer</span>, <span class="bu">String</span>&gt; VALUES_MAP = <span class="kw">new</span> <span class="bu">HashMap</span>&lt;&gt;() {</span>
<span id="cb62-2"><a href="#cb62-2"></a>    {</span>
<span id="cb62-3"><a href="#cb62-3"></a>        <span class="fu">put</span>(<span class="dv">1</span>, <span class="st">&quot;A&quot;</span>);</span>
<span id="cb62-4"><a href="#cb62-4"></a>        <span class="fu">put</span>(<span class="dv">2</span>, <span class="st">&quot;B&quot;</span>);</span>
<span id="cb62-5"><a href="#cb62-5"></a>        <span class="fu">put</span>(<span class="dv">3</span>, <span class="st">&quot;C&quot;</span>);</span>
<span id="cb62-6"><a href="#cb62-6"></a>    }</span>
<span id="cb62-7"><a href="#cb62-7"></a>};</span></code></pre></div></li>
<li><p>不変な配列インスタンスは長さ 0 の配列以外は生成不可能なため、外部から参照される（<code>public</code>）定数では利用せず、<code>List</code>等への置き換えをすること</p>
<p>良い例：</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb63-1"><a href="#cb63-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">List</span>&lt;<span class="bu">Integer</span>&gt; VALUES = <span class="bu">List</span>.<span class="fu">of</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb64-1"><a href="#cb64-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span>[] VALUES = { <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span> };</span></code></pre></div></li>
</ul></li>
</ul>
</section>
<section id="インスタンス変数" data-number="4.10">
<h2 data-number="4.10"><span class="header-section-number">4.10</span> インスタンス変数</h2>
<ul>
<li><p>インスタンス変数は<code>private</code>にする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb65-1"><a href="#cb65-1"></a><span class="kw">public</span> <span class="kw">class</span> Employee {</span>
<span id="cb65-2"><a href="#cb65-2"></a>    <span class="kw">private</span> <span class="dt">long</span> id;</span>
<span id="cb65-3"><a href="#cb65-3"></a></span>
<span id="cb65-4"><a href="#cb65-4"></a>    <span class="co">//・・・</span></span>
<span id="cb65-5"><a href="#cb65-5"></a>    <span class="co">//getter/setter</span></span>
<span id="cb65-6"><a href="#cb65-6"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb66-1"><a href="#cb66-1"></a><span class="kw">public</span> <span class="kw">class</span> Employee {</span>
<span id="cb66-2"><a href="#cb66-2"></a>    <span class="kw">public</span> <span class="dt">long</span> id;</span>
<span id="cb66-3"><a href="#cb66-3"></a></span>
<span id="cb66-4"><a href="#cb66-4"></a>    <span class="co">//・・・</span></span>
<span id="cb66-5"><a href="#cb66-5"></a>    <span class="co">//getter/setter</span></span>
<span id="cb66-6"><a href="#cb66-6"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="クラス変数" data-number="4.11">
<h2 data-number="4.11"><span class="header-section-number">4.11</span> クラス変数</h2>
<ul>
<li><p><code>public static final</code> 宣言した配列を利用しない<br />
※「定数」を参照</p></li>
<li><p>クラス変数にはクラス名を使用してアクセスすること</p>
<p>良い例：</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb67-1"><a href="#cb67-1"></a><span class="bu">BigDecimal</span> b = <span class="bu">BigDecimal</span>.<span class="fu">ZERO</span>;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb68-1"><a href="#cb68-1"></a><span class="bu">BigDecimal</span> a = <span class="co">//</span></span>
<span id="cb68-2"><a href="#cb68-2"></a><span class="bu">BigDecimal</span> b = a.<span class="fu">ZERO</span>;</span></code></pre></div>
<p><br></p></li>
</ul>
</section>
<section id="ローカル変数-1" data-number="4.12">
<h2 data-number="4.12"><span class="header-section-number">4.12</span> ローカル変数</h2>
<ul>
<li><p>ローカル変数は利用する直前で宣言する<br />
行間の程度にもよるが、ある程度まとめて宣言するのは OK とする。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb69-1"><a href="#cb69-1"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; lines.<span class="fu">length</span>; i++) {</span>
<span id="cb69-2"><a href="#cb69-2"></a>    <span class="bu">String</span> line = lines[i];</span>
<span id="cb69-3"><a href="#cb69-3"></a>    <span class="co">//lineの処理</span></span>
<span id="cb69-4"><a href="#cb69-4"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb70-1"><a href="#cb70-1"></a><span class="bu">String</span> line;</span>
<span id="cb70-2"><a href="#cb70-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; lines.<span class="fu">length</span>; i++) {</span>
<span id="cb70-3"><a href="#cb70-3"></a>    line = lines[i];</span>
<span id="cb70-4"><a href="#cb70-4"></a>    <span class="co">//lineの処理</span></span>
<span id="cb70-5"><a href="#cb70-5"></a>}</span></code></pre></div></li>
<li><p>ローカル変数は安易に再利用しない<br />
一度宣言したローカル変数を、複数の目的で安易に使いまわさないこと。ローカル変数は、役割ごとに新しいものを宣言して初期化することにより、コードの可読性・保守性の向上、及びコンパイラの最適化の促進をはかる。</p></li>
</ul>
</section>
<section id="引数-1" data-number="4.13">
<h2 data-number="4.13"><span class="header-section-number">4.13</span> 引数</h2>
<ul>
<li><p>メソッド引数への代入は行わない<br />
原則として<code>final</code>で宣言する。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb71-1"><a href="#cb71-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">add</span>(<span class="dt">final</span> <span class="dt">int</span> value) {</span>
<span id="cb71-2"><a href="#cb71-2"></a>    <span class="co">//・・・</span></span>
<span id="cb71-3"><a href="#cb71-3"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="継承" data-number="4.14">
<h2 data-number="4.14"><span class="header-section-number">4.14</span> 継承</h2>
<ul>
<li><p>スーパークラスのインスタンス変数をサブクラスでオーバーライドしない<br />
スーパークラスと同じ名前のフィールドをサブクラスで宣言しないこと。 同じ名前のフィールドを宣言すると、スーパークラスのフィールドはサブクラスで宣言されたフィールドによって隠ぺいされてしまうので、他の人の混乱を招くことを防ぐため重複する名前は付けないこと。</p>
<p>悪い例：</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb72-1"><a href="#cb72-1"></a><span class="kw">public</span> <span class="kw">class</span> Abs {</span>
<span id="cb72-2"><a href="#cb72-2"></a>    <span class="kw">protected</span> <span class="bu">String</span> name;</span>
<span id="cb72-3"><a href="#cb72-3"></a>}</span>
<span id="cb72-4"><a href="#cb72-4"></a></span>
<span id="cb72-5"><a href="#cb72-5"></a><span class="kw">public</span> <span class="kw">class</span> Sub <span class="kw">extends</span> Abs {</span>
<span id="cb72-6"><a href="#cb72-6"></a>    <span class="kw">protected</span> <span class="bu">String</span> name;<span class="co">//Abs#nameは隠ぺいされる</span></span>
<span id="cb72-7"><a href="#cb72-7"></a>}</span></code></pre></div></li>
<li><p>スーパークラスのメソッドをオーバーライドするときは@Override アノテーションを指定する。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb73-1"><a href="#cb73-1"></a><span class="kw">public</span> <span class="kw">class</span> Abs {</span>
<span id="cb73-2"><a href="#cb73-2"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb73-3"><a href="#cb73-3"></a></span>
<span id="cb73-4"><a href="#cb73-4"></a>    }</span>
<span id="cb73-5"><a href="#cb73-5"></a>}</span>
<span id="cb73-6"><a href="#cb73-6"></a></span>
<span id="cb73-7"><a href="#cb73-7"></a><span class="kw">public</span> <span class="kw">class</span> Sub <span class="kw">extends</span> Abs {</span>
<span id="cb73-8"><a href="#cb73-8"></a>    <span class="at">@Override</span></span>
<span id="cb73-9"><a href="#cb73-9"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb73-10"><a href="#cb73-10"></a></span>
<span id="cb73-11"><a href="#cb73-11"></a>    }</span>
<span id="cb73-12"><a href="#cb73-12"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb74-1"><a href="#cb74-1"></a><span class="kw">public</span> <span class="kw">class</span> Abs {</span>
<span id="cb74-2"><a href="#cb74-2"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb74-3"><a href="#cb74-3"></a></span>
<span id="cb74-4"><a href="#cb74-4"></a>    }</span>
<span id="cb74-5"><a href="#cb74-5"></a>}</span>
<span id="cb74-6"><a href="#cb74-6"></a></span>
<span id="cb74-7"><a href="#cb74-7"></a><span class="kw">public</span> <span class="kw">class</span> Sub <span class="kw">extends</span> Abs {</span>
<span id="cb74-8"><a href="#cb74-8"></a>    <span class="co">//@Overrideアノテーションの指定がない</span></span>
<span id="cb74-9"><a href="#cb74-9"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb74-10"><a href="#cb74-10"></a></span>
<span id="cb74-11"><a href="#cb74-11"></a>    }</span>
<span id="cb74-12"><a href="#cb74-12"></a>}</span></code></pre></div></li>
<li><p>スーパークラスで private 宣言されているメソッドと同じ名前のメソッドをサブクラスで定義しない<br />
スーパークラスにある private メソッドと同じ名前のメソッドをサブクラスで定義しないこと。private メソッドはオーバーライドされず全く別のメソッドとして扱われ、他の人の混乱を招き、バグにつながる恐れがある。</p></li>
</ul>
</section>
<section id="インナークラス" data-number="4.15">
<h2 data-number="4.15"><span class="header-section-number">4.15</span> インナークラス</h2>
<ul>
<li>原則としてインナークラスは利用しない<br />
一つの java ファイルに複数のクラスを記載するのは NG とする。また無名クラスを利用するのも原則として NG とする。<br />
Enum の定数固有メソッド実装(constant-specific method implementation)、Java8 のラムダ式は内部的にインナークラスとされるがこれらは許可する。</li>
</ul>
</section>
<section id="メンバー順序" data-number="4.16">
<h2 data-number="4.16"><span class="header-section-number">4.16</span> メンバー順序</h2>
<ul>
<li><p>以下の順で記述する</p>
<ol type="1">
<li>static フィールド</li>
<li>static イニシャライザー</li>
<li>static メソッド</li>
<li>フィールド</li>
<li>イニシャライザー</li>
<li>コンストラクター</li>
<li>メソッド</li>
</ol></li>
<li><p>同一カテゴリー内では以下の可視性の順で記述する</p>
<ol type="1">
<li>public</li>
<li>protected</li>
<li>パッケージ private</li>
<li>private</li>
</ol></li>
</ul>
</section>
<section id="インスタンス" data-number="4.17">
<h2 data-number="4.17"><span class="header-section-number">4.17</span> インスタンス</h2>
<ul>
<li><p>オブジェクト同士は<code>equals()</code>メソッドで比較する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb75-1"><a href="#cb75-1"></a><span class="bu">String</span> s1 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb75-2"><a href="#cb75-2"></a><span class="bu">String</span> s2 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb75-3"><a href="#cb75-3"></a><span class="kw">if</span> (s1.<span class="fu">equals</span>(s2)) {</span>
<span id="cb75-4"><a href="#cb75-4"></a>    <span class="co">//・・・</span></span>
<span id="cb75-5"><a href="#cb75-5"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb76-1"><a href="#cb76-1"></a><span class="bu">String</span> s1 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb76-2"><a href="#cb76-2"></a><span class="bu">String</span> s2 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb76-3"><a href="#cb76-3"></a><span class="kw">if</span> (s1 == s2) {</span>
<span id="cb76-4"><a href="#cb76-4"></a>    <span class="co">//・・・</span></span>
<span id="cb76-5"><a href="#cb76-5"></a>}</span></code></pre></div>
<p>ただし Enum の場合は<code>==</code>演算子を利用して比較する</p>
<p><code>equals()</code>メソッドで比較する際、左辺のオブジェクトが null にならないように制御すること。</p></li>
<li><p>Class 名を利用した比較をおこなわない</p>
<p>良い例：</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb77-1"><a href="#cb77-1"></a><span class="kw">if</span> (o <span class="kw">instanceof</span> Foo f) {</span>
<span id="cb77-2"><a href="#cb77-2"></a>    <span class="co">// ...</span></span>
<span id="cb77-3"><a href="#cb77-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb78-1"><a href="#cb78-1"></a><span class="kw">if</span> (<span class="st">&quot;my.Foo&quot;</span>.<span class="fu">equals</span>(o.<span class="fu">getClass</span>().<span class="fu">getName</span>())) {</span>
<span id="cb78-2"><a href="#cb78-2"></a>    Foo f = (Foo)o;</span>
<span id="cb78-3"><a href="#cb78-3"></a>    <span class="co">// ...</span></span>
<span id="cb78-4"><a href="#cb78-4"></a>}</span></code></pre></div></li>
<li><p>インスタンスの型キャスト（Class キャスト）が必要な場合はパターンマッチングを使用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb79-1"><a href="#cb79-1"></a><span class="kw">if</span> (o <span class="kw">instanceof</span> <span class="bu">String</span> s) {</span>
<span id="cb79-2"><a href="#cb79-2"></a>    <span class="co">// ...</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>}</span>
<span id="cb79-4"><a href="#cb79-4"></a></span>
<span id="cb79-5"><a href="#cb79-5"></a>var str = (o <span class="kw">instanceof</span> <span class="bu">BigDecimal</span> b) ? b.<span class="fu">toPlainString</span>() : <span class="bu">String</span>.<span class="fu">valueOf</span>(o);</span>
<span id="cb79-6"><a href="#cb79-6"></a></span>
<span id="cb79-7"><a href="#cb79-7"></a>var empty = o == <span class="kw">null</span> ||</span>
<span id="cb79-8"><a href="#cb79-8"></a>  (o <span class="kw">instanceof</span> <span class="bu">String</span> s &amp;&amp; s.<span class="fu">isEmpty</span>()) ||</span>
<span id="cb79-9"><a href="#cb79-9"></a>  (o <span class="kw">instanceof</span> <span class="bu">Collection</span> c &amp;&amp; c.<span class="fu">isEmpty</span>());</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb80-1"><a href="#cb80-1"></a><span class="kw">if</span> (o <span class="kw">instanceof</span> <span class="bu">String</span>) {</span>
<span id="cb80-2"><a href="#cb80-2"></a>    <span class="bu">String</span> s = (<span class="bu">String</span>)o;</span>
<span id="cb80-3"><a href="#cb80-3"></a>    <span class="co">// ...</span></span>
<span id="cb80-4"><a href="#cb80-4"></a>}</span>
<span id="cb80-5"><a href="#cb80-5"></a></span>
<span id="cb80-6"><a href="#cb80-6"></a>var str = (o <span class="kw">instanceof</span> <span class="bu">BigDecimal</span>) ? ((<span class="bu">BigDecimal</span>)o).<span class="fu">toPlainString</span>() : <span class="bu">String</span>.<span class="fu">valueOf</span>(o);</span>
<span id="cb80-7"><a href="#cb80-7"></a></span>
<span id="cb80-8"><a href="#cb80-8"></a>var empty = o == <span class="kw">null</span> ||</span>
<span id="cb80-9"><a href="#cb80-9"></a>  (o <span class="kw">instanceof</span> <span class="bu">String</span> &amp;&amp; ((<span class="bu">String</span>)o).<span class="fu">isEmpty</span>()) ||</span>
<span id="cb80-10"><a href="#cb80-10"></a>  (o <span class="kw">instanceof</span> <span class="bu">Collection</span> &amp;&amp; ((<span class="bu">Collection</span>)o).<span class="fu">isEmpty</span>());</span></code></pre></div></li>
</ul>
</section>
<section id="制御構造" data-number="4.18">
<h2 data-number="4.18"><span class="header-section-number">4.18</span> 制御構造</h2>
<ul>
<li><p>制御文（ <code>if</code> , <code>else</code> , <code>while</code> , <code>for</code> , <code>do while</code> ）の <code>{ }</code> は省略しない</p>
<p>良い例：</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb81-1"><a href="#cb81-1"></a><span class="kw">if</span> (s == <span class="kw">null</span>) {</span>
<span id="cb81-2"><a href="#cb81-2"></a>    <span class="kw">return</span>;</span>
<span id="cb81-3"><a href="#cb81-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb82-1"><a href="#cb82-1"></a><span class="kw">if</span> (s == <span class="kw">null</span>)</span>
<span id="cb82-2"><a href="#cb82-2"></a>    <span class="kw">return</span>;</span></code></pre></div></li>
<li><p>ステートメントが無い <code>{}</code> ブロックを利用しない<br />
悪い例：</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb83-1"><a href="#cb83-1"></a><span class="co">//{}内の記述が無い</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="kw">if</span> (s == <span class="kw">null</span>) {</span>
<span id="cb83-3"><a href="#cb83-3"></a>}</span></code></pre></div></li>
<li><p><code>if</code> / <code>while</code> の条件式で <code>=</code> は利用しない<br />
良い例：</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb84-1"><a href="#cb84-1"></a><span class="dt">boolean</span> a =<span class="co">//</span></span>
<span id="cb84-2"><a href="#cb84-2"></a><span class="kw">if</span> (!a) {</span>
<span id="cb84-3"><a href="#cb84-3"></a>    <span class="co">//・・・</span></span>
<span id="cb84-4"><a href="#cb84-4"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb85-1"><a href="#cb85-1"></a><span class="dt">boolean</span> a =<span class="co">//</span></span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="kw">if</span> (a = <span class="kw">false</span>) {<span class="co">//コーディングミス</span></span>
<span id="cb85-3"><a href="#cb85-3"></a>    <span class="co">//・・・</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>}</span>
<span id="cb85-5"><a href="#cb85-5"></a></span>
<span id="cb85-6"><a href="#cb85-6"></a></span>
<span id="cb85-7"><a href="#cb85-7"></a><span class="dt">boolean</span> a =<span class="co">//</span></span>
<span id="cb85-8"><a href="#cb85-8"></a><span class="dt">boolean</span> b =<span class="co">//</span></span>
<span id="cb85-9"><a href="#cb85-9"></a><span class="kw">if</span> (a = b) {<span class="co">//おそらくコーディングミス</span></span>
<span id="cb85-10"><a href="#cb85-10"></a>    <span class="co">//・・・</span></span>
<span id="cb85-11"><a href="#cb85-11"></a>}</span></code></pre></div></li>
<li><p><code>for</code> と <code>while</code> の使い分けを意識する</p></li>
<li><p>for 文を利用した繰り返し処理中でループ変数の値を変更しない<br />
悪い例：</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb86-1"><a href="#cb86-1"></a><span class="bu">String</span>[] array = { <span class="co">/*・・・*/</span> };</span>
<span id="cb86-2"><a href="#cb86-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; array.<span class="fu">length</span>; i++) {</span>
<span id="cb86-3"><a href="#cb86-3"></a>    <span class="co">//・・・</span></span>
<span id="cb86-4"><a href="#cb86-4"></a>    i += <span class="dv">2</span>;<span class="co">//NG</span></span>
<span id="cb86-5"><a href="#cb86-5"></a>}</span>
<span id="cb86-6"><a href="#cb86-6"></a></span>
<span id="cb86-7"><a href="#cb86-7"></a><span class="kw">for</span> (<span class="bu">String</span> s : array) {</span>
<span id="cb86-8"><a href="#cb86-8"></a>    <span class="co">//・・・</span></span>
<span id="cb86-9"><a href="#cb86-9"></a>    s = <span class="st">&quot;string&quot;</span>;<span class="co">//NG</span></span>
<span id="cb86-10"><a href="#cb86-10"></a>}</span></code></pre></div></li>
<li><p>for 文のカウンタは特別な事情がない限り、0 から始める</p></li>
<li><p>配列やリストなどの全要素に対するループ処理は拡張 for 文を使用する。<br />
良い例：</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb87-1"><a href="#cb87-1"></a><span class="kw">for</span> (<span class="dt">int</span> value : array) {</span>
<span id="cb87-2"><a href="#cb87-2"></a>    <span class="co">//・・・</span></span>
<span id="cb87-3"><a href="#cb87-3"></a>}</span>
<span id="cb87-4"><a href="#cb87-4"></a></span>
<span id="cb87-5"><a href="#cb87-5"></a><span class="kw">for</span> (<span class="bu">String</span> value : list) {</span>
<span id="cb87-6"><a href="#cb87-6"></a>    <span class="co">//・・・</span></span>
<span id="cb87-7"><a href="#cb87-7"></a>}</span></code></pre></div></li>
<li><p>配列をコピーするときは<code>Arrays.copyOf()</code>メソッドを利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb88-1"><a href="#cb88-1"></a><span class="dt">int</span>[] newArray = <span class="bu">Arrays</span>.<span class="fu">copyOf</span>(array, array.<span class="fu">length</span>);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb89-1"><a href="#cb89-1"></a><span class="dt">int</span>[] newArray = <span class="kw">new</span> <span class="dt">int</span>[array.<span class="fu">length</span>];</span>
<span id="cb89-2"><a href="#cb89-2"></a><span class="bu">System</span>.<span class="fu">arraycopy</span>(array, <span class="dv">0</span>, newArray, <span class="dv">0</span>, array.<span class="fu">length</span>);</span></code></pre></div></li>
<li><p>繰り返し処理中のオブジェクトの生成は最小限にする</p></li>
<li><p>if 文と else 文の繰り返しや switch 文の利用はなるべく避け、オブジェクト指向の手法を利用する<br />
良い例：</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb90-1"><a href="#cb90-1"></a>CodingKind codingKind = <span class="fu">toCodingKind</span>(kind);</span>
<span id="cb90-2"><a href="#cb90-2"></a>d = codingKind.<span class="fu">encode</span>(s);</span>
<span id="cb90-3"><a href="#cb90-3"></a></span>
<span id="cb90-4"><a href="#cb90-4"></a><span class="co">//---</span></span>
<span id="cb90-5"><a href="#cb90-5"></a></span>
<span id="cb90-6"><a href="#cb90-6"></a>CodingKind codingKind = <span class="fu">toCodingKind</span>(kind);</span>
<span id="cb90-7"><a href="#cb90-7"></a>s = codingKind.<span class="fu">decode</span>(d);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb91-1"><a href="#cb91-1"></a><span class="kw">switch</span> (kind) {</span>
<span id="cb91-2"><a href="#cb91-2"></a><span class="kw">case</span> <span class="dv">1</span> -&gt;</span>
<span id="cb91-3"><a href="#cb91-3"></a>    d = <span class="fu">encode1</span>(s);</span>
<span id="cb91-4"><a href="#cb91-4"></a><span class="kw">case</span> <span class="dv">2</span> -&gt;</span>
<span id="cb91-5"><a href="#cb91-5"></a>    d = <span class="fu">encode2</span>(s);</span>
<span id="cb91-6"><a href="#cb91-6"></a>}</span>
<span id="cb91-7"><a href="#cb91-7"></a></span>
<span id="cb91-8"><a href="#cb91-8"></a><span class="co">//---</span></span>
<span id="cb91-9"><a href="#cb91-9"></a></span>
<span id="cb91-10"><a href="#cb91-10"></a><span class="kw">switch</span> (kind) {</span>
<span id="cb91-11"><a href="#cb91-11"></a><span class="kw">case</span> <span class="dv">1</span> -&gt;</span>
<span id="cb91-12"><a href="#cb91-12"></a>    s = <span class="fu">decode1</span>(d);</span>
<span id="cb91-13"><a href="#cb91-13"></a><span class="kw">case</span> <span class="dv">2</span> -&gt;</span>
<span id="cb91-14"><a href="#cb91-14"></a>    s = <span class="fu">decode2</span>(d);</span>
<span id="cb91-15"><a href="#cb91-15"></a>}</span></code></pre></div></li>
<li><p>繰り返し処理の内部で <code>try</code> ブロックを利用しない<br />
特に理由がない場合は繰り返し処理の外に<code>try</code>ブロックを記載する。<br />
ただし、繰り返し処理内部で例外をキャッチし処理を行いたい場合は繰り返し処理の内部で<code>try</code>ブロックを利用してもよい。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb92-1"><a href="#cb92-1"></a><span class="kw">for</span> (<span class="bu">String</span> s : array) {</span>
<span id="cb92-2"><a href="#cb92-2"></a>    <span class="bu">BigDecimal</span> num;</span>
<span id="cb92-3"><a href="#cb92-3"></a>    <span class="kw">try</span> {</span>
<span id="cb92-4"><a href="#cb92-4"></a>        num = <span class="kw">new</span> <span class="bu">BigDecimal</span>(s);</span>
<span id="cb92-5"><a href="#cb92-5"></a>    } <span class="kw">catch</span> (<span class="bu">NumberFormatException</span> e) {</span>
<span id="cb92-6"><a href="#cb92-6"></a>        num = <span class="bu">BigDecimal</span>.<span class="fu">ZERO</span>;</span>
<span id="cb92-7"><a href="#cb92-7"></a>    }</span>
<span id="cb92-8"><a href="#cb92-8"></a>    <span class="co">//・・・</span></span>
<span id="cb92-9"><a href="#cb92-9"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="文字列操作" data-number="4.19">
<h2 data-number="4.19"><span class="header-section-number">4.19</span> 文字列操作</h2>
<ul>
<li><p>文字列同士が同じ値かを比較するときは、<code>equals()</code>メソッドを利用する<br />
良い例：</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb93-1"><a href="#cb93-1"></a><span class="bu">String</span> s1 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="bu">String</span> s2 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb93-3"><a href="#cb93-3"></a><span class="kw">if</span> (s1.<span class="fu">equals</span>(s2)) {</span>
<span id="cb93-4"><a href="#cb93-4"></a>    <span class="co">//・・・</span></span>
<span id="cb93-5"><a href="#cb93-5"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb94-1"><a href="#cb94-1"></a><span class="bu">String</span> s1 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb94-2"><a href="#cb94-2"></a><span class="bu">String</span> s2 = <span class="st">&quot;text&quot;</span>;</span>
<span id="cb94-3"><a href="#cb94-3"></a><span class="kw">if</span> (s1 == s2) {</span>
<span id="cb94-4"><a href="#cb94-4"></a>    <span class="co">//・・・</span></span>
<span id="cb94-5"><a href="#cb94-5"></a>}</span></code></pre></div></li>
<li><p>文字列リテラルは<code>new</code> しない<br />
良い例：</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb95-1"><a href="#cb95-1"></a><span class="bu">String</span> s = <span class="st">&quot;&quot;</span>;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb96-1"><a href="#cb96-1"></a><span class="bu">String</span> s = <span class="kw">new</span> <span class="bu">String</span>();</span></code></pre></div></li>
<li><p>更新される文字列には<code>StringBuilder</code> クラスを利用する<br />
良い例：</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb97-1"><a href="#cb97-1"></a><span class="bu">StringBuilder</span> builder = <span class="kw">new</span> <span class="bu">StringBuilder</span>();</span>
<span id="cb97-2"><a href="#cb97-2"></a><span class="kw">for</span> (<span class="bu">String</span> s : array) {</span>
<span id="cb97-3"><a href="#cb97-3"></a>    builder.<span class="fu">append</span>(s);</span>
<span id="cb97-4"><a href="#cb97-4"></a>}</span>
<span id="cb97-5"><a href="#cb97-5"></a><span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(builder.<span class="fu">toString</span>());</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb98-1"><a href="#cb98-1"></a><span class="bu">String</span> string = <span class="st">&quot;&quot;</span>;</span>
<span id="cb98-2"><a href="#cb98-2"></a><span class="kw">for</span> (<span class="bu">String</span> s : array) {</span>
<span id="cb98-3"><a href="#cb98-3"></a>    string += s;</span>
<span id="cb98-4"><a href="#cb98-4"></a>}</span>
<span id="cb98-5"><a href="#cb98-5"></a><span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(string);</span></code></pre></div>
<p><br> スレッドセーフ性が保証されていない箇所では<code>StringBuffer</code>クラスを利用する</p>
<p><a href="#文字列連結">※パフォーマンスについても記載しているので参考にしてください</a></p></li>
<li><p>１ステートメントのみで行われる文字列の連結には<code>+</code>演算子を利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb99-1"><a href="#cb99-1"></a><span class="bu">String</span> s = s1 + s2;</span>
<span id="cb99-2"><a href="#cb99-2"></a></span>
<span id="cb99-3"><a href="#cb99-3"></a><span class="kw">return</span> s1 + s2 + s3 + s4 + s5;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb100-1"><a href="#cb100-1"></a><span class="bu">String</span> s = <span class="kw">new</span> <span class="bu">StringBuilder</span>(s1).<span class="fu">append</span>(s2).<span class="fu">toString</span>();</span>
<span id="cb100-2"><a href="#cb100-2"></a></span>
<span id="cb100-3"><a href="#cb100-3"></a><span class="kw">return</span> <span class="kw">new</span> <span class="bu">StringBuilder</span>(s1).<span class="fu">append</span>(s2).<span class="fu">append</span>(s3).<span class="fu">append</span>(s4).<span class="fu">append</span>(s5).<span class="fu">toString</span>();</span></code></pre></div></li>
<li><p>更新されない文字列には<code>String</code> クラスを利用する</p></li>
<li><p>文字列リテラルと定数を比較するときは、文字列リテラルの<code>equals()</code>メソッドを利用する<br />
良い例：</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb101-1"><a href="#cb101-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> PROTOCOL_HTTP = <span class="st">&quot;http&quot;</span>;</span>
<span id="cb101-2"><a href="#cb101-2"></a></span>
<span id="cb101-3"><a href="#cb101-3"></a><span class="kw">if</span> (PROTOCOL_HTTP.<span class="fu">equals</span>(url.<span class="fu">getProtocol</span>())) {</span>
<span id="cb101-4"><a href="#cb101-4"></a></span>
<span id="cb101-5"><a href="#cb101-5"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb102-1"><a href="#cb102-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> PROTOCOL_HTTP = <span class="st">&quot;http&quot;</span>;</span>
<span id="cb102-2"><a href="#cb102-2"></a></span>
<span id="cb102-3"><a href="#cb102-3"></a><span class="kw">if</span> (url.<span class="fu">getProtocol</span>().<span class="fu">equals</span>(PROTOCOL_HTTP)) {</span>
<span id="cb102-4"><a href="#cb102-4"></a></span>
<span id="cb102-5"><a href="#cb102-5"></a>}</span></code></pre></div></li>
<li><p>プリミティブ型と<code>String</code> オブジェクトの変換には、変換用のメソッドを利用する<br />
良い例：</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb103-1"><a href="#cb103-1"></a><span class="dt">int</span> i = <span class="dv">1000</span>;</span>
<span id="cb103-2"><a href="#cb103-2"></a><span class="bu">String</span> s = <span class="bu">String</span>.<span class="fu">valueOf</span>(i);<span class="co">// &quot;1000&quot;</span></span>
<span id="cb103-3"><a href="#cb103-3"></a>s = <span class="bu">NumberFormat</span>.<span class="fu">getNumberInstance</span>()<span class="fu">.format</span>(i);<span class="co">// 3桁区切り &quot;1,000&quot;</span></span>
<span id="cb103-4"><a href="#cb103-4"></a></span>
<span id="cb103-5"><a href="#cb103-5"></a><span class="dt">boolean</span> b = <span class="kw">true</span>;</span>
<span id="cb103-6"><a href="#cb103-6"></a>s = <span class="bu">String</span>.<span class="fu">valueOf</span>(b);<span class="co">// true/false</span></span>
<span id="cb103-7"><a href="#cb103-7"></a>s = BooleanUtils.<span class="fu">toStringOnOff</span>(b);<span class="co">// on/off</span></span></code></pre></div></li>
<li><p>文字列の中に、ある文字が含まれているか調べるには、<code>contains()</code>メソッドを利用する</p></li>
<li><p>システム依存記号（ <code>\n</code> 、 <code>\r</code> など）は使用しない。<br />
悪い例：</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb104-1"><a href="#cb104-1"></a><span class="bu">String</span> text = <span class="bu">Arrays</span>.<span class="fu">stream</span>(array)</span>
<span id="cb104-2"><a href="#cb104-2"></a>    .<span class="fu">collect</span>(Collectors.<span class="fu">joining</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>));</span></code></pre></div></li>
</ul>
</section>
<section id="数値" data-number="4.20">
<h2 data-number="4.20"><span class="header-section-number">4.20</span> 数値</h2>
<ul>
<li><p>誤差の無い計算をするときは、<code>BigDecimal</code> クラスを使う<br />
浮動小数点演算は科学技術計算に利用するもので、誤差が発生する。これに対して、クラス「<code>BigDecimal</code>」は、文字列で数値の計算を行うので、金額などの正確な計算に適している。<code>BigDecimal</code> ではインスタンス生成時に指定された桁数での精度が保証される。</p></li>
<li><p>数値の比較は精度に気をつける<br />
良い例：</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb105-1"><a href="#cb105-1"></a><span class="bu">BigDecimal</span> a = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;1&quot;</span>);</span>
<span id="cb105-2"><a href="#cb105-2"></a><span class="bu">BigDecimal</span> b = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;1.0&quot;</span>);</span>
<span id="cb105-3"><a href="#cb105-3"></a><span class="kw">if</span> (a.<span class="fu">compareTo</span>(b) == <span class="dv">0</span>) {</span>
<span id="cb105-4"><a href="#cb105-4"></a>    <span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;一致&quot;</span>);</span>
<span id="cb105-5"><a href="#cb105-5"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb106-1"><a href="#cb106-1"></a><span class="bu">BigDecimal</span> a = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;1&quot;</span>);</span>
<span id="cb106-2"><a href="#cb106-2"></a><span class="bu">BigDecimal</span> b = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;1.0&quot;</span>);</span>
<span id="cb106-3"><a href="#cb106-3"></a></span>
<span id="cb106-4"><a href="#cb106-4"></a><span class="kw">if</span> (a.<span class="fu">equals</span>(b)) {</span>
<span id="cb106-5"><a href="#cb106-5"></a>    <span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;精度が違うためこの分岐には入らない&quot;</span>);</span>
<span id="cb106-6"><a href="#cb106-6"></a>}</span></code></pre></div></li>
<li><p>低精度なプリミティブ型にキャストしない</p></li>
<li><p><code>BigDecimal</code>を<code>String</code>変換する際は<code>toString()</code>ではなく<code>toPlainString()</code>を利用すること<br />
<code>toString()</code>を利用した場合、指数表記になることがあります。</p></li>
</ul>
</section>
<section id="日付" data-number="4.21">
<h2 data-number="4.21"><span class="header-section-number">4.21</span> 日付</h2>
<ul>
<li><p>日付の文字列のフォーマットには、<code>SimpleDateFormat</code>または<code>DateTimeFormatter</code>を使う<br />
良い例：</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb107-1"><a href="#cb107-1"></a><span class="bu">Date</span> date = <span class="kw">new</span> <span class="bu">Date</span>();</span>
<span id="cb107-2"><a href="#cb107-2"></a><span class="bu">SimpleDateFormat</span> dateFormat = <span class="kw">new</span> <span class="bu">SimpleDateFormat</span>(<span class="st">&quot;yyyy/MM/dd&quot;</span>);</span>
<span id="cb107-3"><a href="#cb107-3"></a><span class="bu">String</span> s = dateFormat<span class="fu">.format</span>(date);</span></code></pre></div></li>
</ul>
</section>
<section id="三項演算子" data-number="4.22">
<h2 data-number="4.22"><span class="header-section-number">4.22</span> 三項演算子</h2>
<ul>
<li>入れ子の三項演算子の利用は禁止<br />
可読性が悪くなるので三項演算子を入れ子で行うのは禁止。</li>
</ul>
</section>
<section id="switch-式" data-number="4.23">
<h2 data-number="4.23"><span class="header-section-number">4.23</span> switch 式</h2>
<ul>
<li><p>一つの値を変数に代入するための if-else 文は代わりに switch 式の使用を推奨する<br />
switch 式の値を使用することで変数を不変（実質的 final）にでき、代入箇所が分散することによる可読性の低下を防げます。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb108-1"><a href="#cb108-1"></a>var value = <span class="kw">switch</span> (op) {</span>
<span id="cb108-2"><a href="#cb108-2"></a>    <span class="kw">case</span> <span class="st">&quot;add&quot;</span> -&gt; a + b;</span>
<span id="cb108-3"><a href="#cb108-3"></a>    <span class="kw">default</span> -&gt; a - b;</span>
<span id="cb108-4"><a href="#cb108-4"></a>};</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb109-1"><a href="#cb109-1"></a><span class="dt">int</span> value;</span>
<span id="cb109-2"><a href="#cb109-2"></a><span class="kw">if</span> (op.<span class="fu">equals</span>(<span class="st">&quot;add&quot;</span>)) {</span>
<span id="cb109-3"><a href="#cb109-3"></a>    value = a + b;</span>
<span id="cb109-4"><a href="#cb109-4"></a>} <span class="kw">else</span> {</span>
<span id="cb109-5"><a href="#cb109-5"></a>    value = a - b;</span>
<span id="cb109-6"><a href="#cb109-6"></a>}</span></code></pre></div></li>
<li><p>case 句はなるべく一つの式での記述を推奨する<br />
複雑な式や複雑なステートメントを記述しなければならない場合は、メソッドに分割することを検討してください。</p></li>
<li><p>switch 式は、コーディングミスによるフォールスルーを避けるため、常にアロー構文を使用する<br />
<a href="https://docs.oracle.com/javase/jp/16/language/switch-expressions.html">https://docs.oracle.com/javase/jp/16/language/switch-expressions.html</a>からの引用：</p>
<blockquote>
<p>ノート:<code>case L -&gt;</code>ラベルの使用をお薦めします。<code>case L:</code>ラベルの使用時は、<code>break</code>文または<code>yield</code>文の挿入を忘れがちです。これを忘れると、コード内で思いがけないフォール・スルーが発生する場合があります。 <code>case L -&gt;</code>ラベルで、複数の文または式でないコード、あるいは<code>throw</code>文を指定するには、それらをブロック内に囲みます。<code>case</code>ラベルが生成する値を<code>yield</code>文で指定します。</p>
</blockquote>
<p>良い例：</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb110-1"><a href="#cb110-1"></a>var date = LocalDate.<span class="fu">now</span>();</span>
<span id="cb110-2"><a href="#cb110-2"></a>var off = <span class="kw">switch</span> (date.<span class="fu">getDayOfWeek</span>()) {</span>
<span id="cb110-3"><a href="#cb110-3"></a>    <span class="kw">case</span> MONDAY -&gt; {</span>
<span id="cb110-4"><a href="#cb110-4"></a>        <span class="kw">if</span> (myCalendar.<span class="fu">isOff</span>(date) || localCalendar.<span class="fu">isHoliday</span>(date)) {</span>
<span id="cb110-5"><a href="#cb110-5"></a>            yield <span class="kw">true</span>;</span>
<span id="cb110-6"><a href="#cb110-6"></a>        }</span>
<span id="cb110-7"><a href="#cb110-7"></a>        yield localCalendar.<span class="fu">isHoliday</span>(date.<span class="fu">minusDays</span>(<span class="dv">1</span>));</span>
<span id="cb110-8"><a href="#cb110-8"></a>    }</span>
<span id="cb110-9"><a href="#cb110-9"></a>    <span class="kw">case</span> TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt;</span>
<span id="cb110-10"><a href="#cb110-10"></a>        myCalendar.<span class="fu">isOff</span>(date) || localCalendar.<span class="fu">isHoliday</span>(date);</span>
<span id="cb110-11"><a href="#cb110-11"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; <span class="kw">true</span>;</span>
<span id="cb110-12"><a href="#cb110-12"></a>};</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb111-1"><a href="#cb111-1"></a>var date = LocalDate.<span class="fu">now</span>();</span>
<span id="cb111-2"><a href="#cb111-2"></a>var off = <span class="kw">switch</span> (date.<span class="fu">getDayOfWeek</span>()) {</span>
<span id="cb111-3"><a href="#cb111-3"></a>    <span class="kw">case</span> MONDAY:</span>
<span id="cb111-4"><a href="#cb111-4"></a>        <span class="kw">if</span> (myCalendar.<span class="fu">isOff</span>(date) || localCalendar.<span class="fu">isHoliday</span>(date)) {</span>
<span id="cb111-5"><a href="#cb111-5"></a>            yield <span class="kw">true</span>;</span>
<span id="cb111-6"><a href="#cb111-6"></a>        }</span>
<span id="cb111-7"><a href="#cb111-7"></a>        yield localCalendar.<span class="fu">isHoliday</span>(date.<span class="fu">minusDays</span>(<span class="dv">1</span>));</span>
<span id="cb111-8"><a href="#cb111-8"></a>    <span class="kw">case</span> TUESDAY, WEDNESDAY, THURSDAY, FRIDAY:</span>
<span id="cb111-9"><a href="#cb111-9"></a>        yield myCalendar.<span class="fu">isOff</span>(date) || localCalendar.<span class="fu">isHoliday</span>(date);</span>
<span id="cb111-10"><a href="#cb111-10"></a>    <span class="kw">case</span> SUNDAY, SATURDAY:</span>
<span id="cb111-11"><a href="#cb111-11"></a>        yield <span class="kw">true</span>;</span>
<span id="cb111-12"><a href="#cb111-12"></a>};</span></code></pre></div></li>
<li><p>アロー構文の、中カッコ、<code>yield</code>を省略できる場合は必ず省略する<br />
良い例：</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb112-1"><a href="#cb112-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb112-2"><a href="#cb112-2"></a>var shortDay = <span class="kw">switch</span> (day) {</span>
<span id="cb112-3"><a href="#cb112-3"></a>    <span class="kw">case</span> MONDAY -&gt; <span class="st">&quot;M&quot;</span>;</span>
<span id="cb112-4"><a href="#cb112-4"></a>    <span class="kw">case</span> WEDNESDAY -&gt; <span class="st">&quot;W&quot;</span>;</span>
<span id="cb112-5"><a href="#cb112-5"></a>    <span class="kw">case</span> FRIDAY -&gt; <span class="st">&quot;F&quot;</span>;</span>
<span id="cb112-6"><a href="#cb112-6"></a>    <span class="kw">case</span> TUESDAY, THURSDAY -&gt; <span class="st">&quot;T&quot;</span>;</span>
<span id="cb112-7"><a href="#cb112-7"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; <span class="st">&quot;S&quot;</span>;</span>
<span id="cb112-8"><a href="#cb112-8"></a>};</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb113-1"><a href="#cb113-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb113-2"><a href="#cb113-2"></a>var shortDay = <span class="kw">switch</span> (day) {</span>
<span id="cb113-3"><a href="#cb113-3"></a>    <span class="kw">case</span> MONDAY -&gt; {</span>
<span id="cb113-4"><a href="#cb113-4"></a>        yield <span class="st">&quot;M&quot;</span>;</span>
<span id="cb113-5"><a href="#cb113-5"></a>    }</span>
<span id="cb113-6"><a href="#cb113-6"></a>    <span class="kw">case</span> WEDNESDAY -&gt; {</span>
<span id="cb113-7"><a href="#cb113-7"></a>        yield <span class="st">&quot;W&quot;</span>;</span>
<span id="cb113-8"><a href="#cb113-8"></a>    }</span>
<span id="cb113-9"><a href="#cb113-9"></a>    <span class="kw">case</span> FRIDAY -&gt; {</span>
<span id="cb113-10"><a href="#cb113-10"></a>        yield <span class="st">&quot;F&quot;</span>;</span>
<span id="cb113-11"><a href="#cb113-11"></a>    }</span>
<span id="cb113-12"><a href="#cb113-12"></a>    <span class="kw">case</span> TUESDAY, THURSDAY -&gt; {</span>
<span id="cb113-13"><a href="#cb113-13"></a>        yield <span class="st">&quot;T&quot;</span>;</span>
<span id="cb113-14"><a href="#cb113-14"></a>    }</span>
<span id="cb113-15"><a href="#cb113-15"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; {</span>
<span id="cb113-16"><a href="#cb113-16"></a>        yield <span class="st">&quot;S&quot;</span>;</span>
<span id="cb113-17"><a href="#cb113-17"></a>    }</span>
<span id="cb113-18"><a href="#cb113-18"></a>};</span></code></pre></div></li>
<li><p>Enum 値の switch 式で case 句が全ての Enum 値をカバーする場合は default 句はデッドコードとなるため記述しない<br />
良い例：</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb114-1"><a href="#cb114-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb114-2"><a href="#cb114-2"></a>var off = <span class="kw">switch</span> (day) {</span>
<span id="cb114-3"><a href="#cb114-3"></a>    <span class="kw">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; <span class="kw">false</span>;</span>
<span id="cb114-4"><a href="#cb114-4"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; <span class="kw">true</span>;</span>
<span id="cb114-5"><a href="#cb114-5"></a>};</span>
<span id="cb114-6"><a href="#cb114-6"></a></span>
<span id="cb114-7"><a href="#cb114-7"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb114-8"><a href="#cb114-8"></a>var off = <span class="kw">switch</span> (day) {</span>
<span id="cb114-9"><a href="#cb114-9"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; <span class="kw">true</span>;</span>
<span id="cb114-10"><a href="#cb114-10"></a>    <span class="kw">default</span> -&gt; <span class="kw">false</span>;</span>
<span id="cb114-11"><a href="#cb114-11"></a>};</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb115-1"><a href="#cb115-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb115-2"><a href="#cb115-2"></a>var off = <span class="kw">switch</span> (day) {</span>
<span id="cb115-3"><a href="#cb115-3"></a>    <span class="kw">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; <span class="kw">false</span>;</span>
<span id="cb115-4"><a href="#cb115-4"></a>    <span class="kw">case</span> SUNDAY, SATURDAY -&gt; <span class="kw">true</span>;</span>
<span id="cb115-5"><a href="#cb115-5"></a>    <span class="kw">default</span> -&gt; <span class="kw">false</span>;</span>
<span id="cb115-6"><a href="#cb115-6"></a>};</span></code></pre></div></li>
</ul>
</section>
<section id="switch-文" data-number="4.24">
<h2 data-number="4.24"><span class="header-section-number">4.24</span> switch 文</h2>
<ul>
<li><p>代わりに switch 式が使用できる箇所は switch 式を使用する</p>
<ul>
<li>case 句で<code>return</code>を記述する場合は switch 文を使用して良い</li>
</ul></li>
<li><p>case 句はなるべく 1 行のステートメントでの記述を推奨する<br />
複雑なステートメントを記述しなければならない場合は、メソッドに分割することを検討してください。</p></li>
<li><p>switch 文は、コーディングミスによるフォールスルーを避けるため、なるべくアロー構文を使用することを推奨する<br />
<a href="https://docs.oracle.com/javase/jp/16/language/switch-expressions.html">https://docs.oracle.com/javase/jp/16/language/switch-expressions.html</a>からの引用：</p>
<blockquote>
<p>ノート:<code>case L -&gt;</code>ラベルの使用をお薦めします。<code>case L:</code>ラベルの使用時は、<code>break</code>文または<code>yield</code>文の挿入を忘れがちです。これを忘れると、コード内で思いがけないフォール・スルーが発生する場合があります。 <code>case L -&gt;</code>ラベルで、複数の文または式でないコード、あるいは<code>throw</code>文を指定するには、それらをブロック内に囲みます。<code>case</code>ラベルが生成する値を<code>yield</code>文で指定します。</p>
</blockquote>
<p>良い例：</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb116-1"><a href="#cb116-1"></a>var date = LocalDate.<span class="fu">now</span>();</span>
<span id="cb116-2"><a href="#cb116-2"></a><span class="kw">switch</span> (date.<span class="fu">getDayOfWeek</span>()) {</span>
<span id="cb116-3"><a href="#cb116-3"></a>    <span class="kw">case</span> MONDAY -&gt; {</span>
<span id="cb116-4"><a href="#cb116-4"></a>        <span class="kw">if</span> (</span>
<span id="cb116-5"><a href="#cb116-5"></a>            !myCalendar.<span class="fu">isOff</span>(date) &amp;&amp; !localCalendar.<span class="fu">isHoliday</span>(date) &amp;&amp;</span>
<span id="cb116-6"><a href="#cb116-6"></a>            !localCalendar.<span class="fu">isHoliday</span>(date.<span class="fu">minusDays</span>(<span class="dv">1</span>))</span>
<span id="cb116-7"><a href="#cb116-7"></a>        ) {</span>
<span id="cb116-8"><a href="#cb116-8"></a>            <span class="fu">work</span>();</span>
<span id="cb116-9"><a href="#cb116-9"></a>        }</span>
<span id="cb116-10"><a href="#cb116-10"></a>    }</span>
<span id="cb116-11"><a href="#cb116-11"></a>    <span class="kw">case</span> TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {</span>
<span id="cb116-12"><a href="#cb116-12"></a>        <span class="kw">if</span> (!myCalendar.<span class="fu">isOff</span>(date) &amp;&amp; !localCalendar.<span class="fu">isHoliday</span>(date)) {</span>
<span id="cb116-13"><a href="#cb116-13"></a>            <span class="fu">work</span>();</span>
<span id="cb116-14"><a href="#cb116-14"></a>        }</span>
<span id="cb116-15"><a href="#cb116-15"></a>    }</span>
<span id="cb116-16"><a href="#cb116-16"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb117-1"><a href="#cb117-1"></a>var date = LocalDate.<span class="fu">now</span>();</span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="kw">switch</span> (date.<span class="fu">getDayOfWeek</span>()) {</span>
<span id="cb117-3"><a href="#cb117-3"></a>    <span class="kw">case</span> MONDAY:</span>
<span id="cb117-4"><a href="#cb117-4"></a>        <span class="kw">if</span> (</span>
<span id="cb117-5"><a href="#cb117-5"></a>            !myCalendar.<span class="fu">isOff</span>(date) &amp;&amp; !localCalendar.<span class="fu">isHoliday</span>(date) &amp;&amp;</span>
<span id="cb117-6"><a href="#cb117-6"></a>            !localCalendar.<span class="fu">isHoliday</span>(date.<span class="fu">minusDays</span>(<span class="dv">1</span>))</span>
<span id="cb117-7"><a href="#cb117-7"></a>        ) {</span>
<span id="cb117-8"><a href="#cb117-8"></a>            <span class="fu">work</span>();</span>
<span id="cb117-9"><a href="#cb117-9"></a>        }</span>
<span id="cb117-10"><a href="#cb117-10"></a>        <span class="kw">break</span>;</span>
<span id="cb117-11"><a href="#cb117-11"></a>    <span class="kw">case</span> TUESDAY, WEDNESDAY, THURSDAY, FRIDAY:</span>
<span id="cb117-12"><a href="#cb117-12"></a>        <span class="kw">if</span> (!myCalendar.<span class="fu">isOff</span>(date) &amp;&amp; !localCalendar.<span class="fu">isHoliday</span>(date)) {</span>
<span id="cb117-13"><a href="#cb117-13"></a>            <span class="fu">work</span>();</span>
<span id="cb117-14"><a href="#cb117-14"></a>        }</span>
<span id="cb117-15"><a href="#cb117-15"></a>        <span class="kw">break</span>;</span>
<span id="cb117-16"><a href="#cb117-16"></a>}</span></code></pre></div></li>
<li><p>アロー構文を使用しない（コロンを使用する）場合、複数の値をマッチさせるときの case 句はカンマを使用して列挙する<br />
良い例：</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb118-1"><a href="#cb118-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb118-2"><a href="#cb118-2"></a><span class="dt">boolean</span> off = <span class="kw">false</span>;</span>
<span id="cb118-3"><a href="#cb118-3"></a><span class="kw">switch</span> (day) {</span>
<span id="cb118-4"><a href="#cb118-4"></a>    <span class="kw">case</span> SUNDAY, SATURDAY:</span>
<span id="cb118-5"><a href="#cb118-5"></a>      off = <span class="kw">true</span>;</span>
<span id="cb118-6"><a href="#cb118-6"></a>      <span class="kw">break</span>;</span>
<span id="cb118-7"><a href="#cb118-7"></a>};</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb119-1"><a href="#cb119-1"></a>var day = DayOfWeek.<span class="fu">SUNDAY</span>;</span>
<span id="cb119-2"><a href="#cb119-2"></a><span class="dt">boolean</span> off = <span class="kw">false</span>;</span>
<span id="cb119-3"><a href="#cb119-3"></a><span class="kw">switch</span> (day) {</span>
<span id="cb119-4"><a href="#cb119-4"></a>    <span class="kw">case</span> SUNDAY:</span>
<span id="cb119-5"><a href="#cb119-5"></a>    <span class="kw">case</span> SATURDAY:</span>
<span id="cb119-6"><a href="#cb119-6"></a>      off = <span class="kw">true</span>;</span>
<span id="cb119-7"><a href="#cb119-7"></a>      <span class="kw">break</span>;</span>
<span id="cb119-8"><a href="#cb119-8"></a>};</span></code></pre></div></li>
</ul>
</section>
<section id="コレクション" data-number="4.25">
<h2 data-number="4.25"><span class="header-section-number">4.25</span> コレクション</h2>
<ul>
<li><p>Java2 以降のコレクションクラスを利用する<br />
<code>Vector</code> クラス、<code>Hashtable</code> クラス、<code>Enumeration</code> 等は、特にこれらを利用する理由がなければ、インターフェースを統一する目的で、これらの代わりに<code>List</code>(<code>ArrayList</code> クラス)、<code>Map</code>(<code>HashMap</code> クラス)、<code>Iterator</code> を使用すること。<code>List</code> などのインターフェースを利用することで JDK1.2 で整理されたわかりやすいメソッドを利用でき、また、インターフェースの特性から呼び出し元を変更せずに実装クラスを変更することができる。</p></li>
<li><p>特定の型のオブジェクトだけを受け入れるコレクションクラスを利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb120-1"><a href="#cb120-1"></a><span class="bu">List</span>&lt;<span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">String</span>&gt;&gt; list = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span></code></pre></div></li>
<li><p><code>List</code>のソートは<code>List.sort()</code>を利用する<br />
<code>List</code>クラスの要素をソートする際は Java8 で追加された<code>List.sort()</code>を利用すること。<br />
Java 7 以前で利用されていた<code>Collections.sort()</code>は利用しないこと。</p></li>
<li><p><code>Collection.forEach()</code>は利用しない。拡張 for 文の利用を検討する<br />
Java8 で追加されたメソッド。<br />
拡張 for 文を利用したほうが多くの場合でデバッグに有利であり、可読性においても<code>forEach</code>の優位性は少ないため、<code>forEach</code>は原則利用しない。拡張 for 文を利用する。<br />
具体的には下記のメソッドを利用しないこと。</p>
<ul>
<li><code>Collection#forEach</code></li>
<li><code>Set#forEach</code></li>
<li><code>List#forEach</code></li>
</ul>
<p>※ <code>Map#forEach</code>はこの限りではない</p>
<p>良い例：</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb121-1"><a href="#cb121-1"></a><span class="kw">for</span> (<span class="bu">String</span> s : <span class="bu">List</span>.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)) {</span>
<span id="cb121-2"><a href="#cb121-2"></a>    <span class="co">//処理</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb122-1"><a href="#cb122-1"></a><span class="bu">List</span>.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>).<span class="fu">forEach</span>(s -&gt; {</span>
<span id="cb122-2"><a href="#cb122-2"></a>    <span class="co">//処理</span></span>
<span id="cb122-3"><a href="#cb122-3"></a>});</span></code></pre></div>
<p>ただし、メソッド参照で処理できる場合は<code>forEach</code>を利用する。<br />
（デバッグのデメリットがほとんどなく、他と比較して処理効率が良いため）</p>
<p>良い例：</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb123-1"><a href="#cb123-1"></a><span class="bu">List</span>.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>).<span class="fu">forEach</span>(<span class="kw">this</span>::process);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb124-1"><a href="#cb124-1"></a><span class="kw">for</span> (<span class="bu">String</span> s : <span class="bu">List</span>.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)) {</span>
<span id="cb124-2"><a href="#cb124-2"></a>    <span class="kw">this</span>.<span class="fu">process</span>(s);</span>
<span id="cb124-3"><a href="#cb124-3"></a>}</span></code></pre></div></li>
<li><p><code>Arrays.asList()</code>は利用せず、<code>List.of()</code>を利用する<br />
Java9 で追加されたメソッド。<br />
配列を<code>List</code>に置き換える場合や、単純な固定の<code>List</code>を生成する際には<code>List.of()</code>を利用する。</p>
<ul>
<li><code>Arrays.asList()</code>と<code>List.of()</code>の違い<br />
<code>List.of()</code>で生成した<code>List</code>は、完全に不変（Immutable）な<code>List</code>で、<br />
<code>Arrays.asList()</code>で生成した<code>List</code>は、サイズのみ不変で、<code>set</code>等による値の操作が可能な<code>List</code>です。<br />
また、<code>set</code>を行った場合、<code>Arrays.asList()</code>に与えられた配列インスタンスにも影響します。</li>
</ul></li>
</ul>
</section>
<section id="ラムダ式メソッド参照コンストラクタ参照" data-number="4.26">
<h2 data-number="4.26"><span class="header-section-number">4.26</span> ラムダ式・メソッド参照・コンストラクタ参照</h2>
<ul>
<li><p>ラムダ式が利用できる箇所はラムダ式を利用してよい<br />
<a href="#ラムダ式・メソッド参照・コンストラクタ参照-2">※パフォーマンスについても記載しているので参考にしてください</a></p></li>
<li><p>ただし、メソッド参照・コンストラクタ参照が利用できる場合はメソッド参照・コンストラクタ参照を利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb125-1"><a href="#cb125-1"></a><span class="bu">String</span>::compareToIgnoreCase</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb126-1"><a href="#cb126-1"></a>(s1, s2) -&gt; s1.<span class="fu">compareToIgnoreCase</span>(s2)</span></code></pre></div>
<p>良い例：</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb127-1"><a href="#cb127-1"></a><span class="bu">BigDecimal</span>::add</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb128-1"><a href="#cb128-1"></a>(b1, b2) -&gt; b1.<span class="fu">add</span>(b2)</span></code></pre></div></li>
<li><p>ラムダ式記述の際、型宣言は省略記法で記述する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb129-1"><a href="#cb129-1"></a>(s1, s2) -&gt; s1 + <span class="st">&quot;=&quot;</span> + s2</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb130-1"><a href="#cb130-1"></a>(<span class="bu">String</span> s1, <span class="bu">String</span> s2) -&gt; s1 + <span class="st">&quot;=&quot;</span> + s2</span></code></pre></div></li>
<li><p>原則ラムダ式内の行数は 1 行とする<br />
複数行で利用したい場合は、<code>private</code>メソッドを作成しメソッド参照を利用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb131-1"><a href="#cb131-1"></a><span class="kw">this</span>::getMax</span>
<span id="cb131-2"><a href="#cb131-2"></a></span>
<span id="cb131-3"><a href="#cb131-3"></a><span class="kw">private</span> <span class="dt">int</span> <span class="fu">getMax</span>(<span class="dt">int</span> i1, <span class="dt">int</span> i2) {</span>
<span id="cb131-4"><a href="#cb131-4"></a>    <span class="kw">if</span> (i1 &gt; i2) {</span>
<span id="cb131-5"><a href="#cb131-5"></a>        <span class="kw">return</span> i1;</span>
<span id="cb131-6"><a href="#cb131-6"></a>    } <span class="kw">else</span> {</span>
<span id="cb131-7"><a href="#cb131-7"></a>        <span class="kw">return</span> i2;</span>
<span id="cb131-8"><a href="#cb131-8"></a>    }</span>
<span id="cb131-9"><a href="#cb131-9"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb132-1"><a href="#cb132-1"></a>(i1, i2) -&gt; {</span>
<span id="cb132-2"><a href="#cb132-2"></a>    <span class="kw">if</span> (i1 &gt; i2) {</span>
<span id="cb132-3"><a href="#cb132-3"></a>        <span class="kw">return</span> i1;</span>
<span id="cb132-4"><a href="#cb132-4"></a>    } <span class="kw">else</span> {</span>
<span id="cb132-5"><a href="#cb132-5"></a>        <span class="kw">return</span> i2;</span>
<span id="cb132-6"><a href="#cb132-6"></a>    }</span>
<span id="cb132-7"><a href="#cb132-7"></a>}</span></code></pre></div></li>
<li><p>原則ラムダ式は 1 行記述に限定するので、中カッコ、<code>return</code>は必ず省略する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb133-1"><a href="#cb133-1"></a>(s1, s2) -&gt; s1 + <span class="st">&quot;=&quot;</span> + s2</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb134-1"><a href="#cb134-1"></a>(s1, s2) -&gt; {</span>
<span id="cb134-2"><a href="#cb134-2"></a>    <span class="kw">return</span> s1 + <span class="st">&quot;=&quot;</span> + s2;</span>
<span id="cb134-3"><a href="#cb134-3"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="実質的-finaleffectively-final" data-number="4.27">
<h2 data-number="4.27"><span class="header-section-number">4.27</span> 実質的 final（effectively final）</h2>
<ul>
<li>実質的 final を利用する<br />
変数宣言に<code>final</code>を記載しなくてよい。</li>
</ul>
</section>
<section id="stream-api" data-number="4.28">
<h2 data-number="4.28"><span class="header-section-number">4.28</span> Stream API</h2>
<ul>
<li><p>利用してよい<br />
<a href="#stream-api-2">※パフォーマンスについても記載しているので参考にしてください</a></p></li>
<li><p>並列ストリームは利用しないこと<br />
悪い例：</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb135-1"><a href="#cb135-1"></a>Stream&lt;?&gt; s = list.<span class="fu">parallelStream</span>();</span>
<span id="cb135-2"><a href="#cb135-2"></a>Stream&lt;?&gt; s = list.<span class="fu">stream</span>().<span class="fu">parallel</span>();</span></code></pre></div></li>
<li><p>StreamAPI 記述の際の改行位置は、各中間処理・末端処理前のピリオドの前で改行する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb136-1"><a href="#cb136-1"></a><span class="bu">List</span>&lt;<span class="bu">Character</span>&gt; alphabetLower = list.<span class="fu">stream</span>()</span>
<span id="cb136-2"><a href="#cb136-2"></a>    .<span class="fu">filter</span>(<span class="bu">Character</span>::isAlphabetic)</span>
<span id="cb136-3"><a href="#cb136-3"></a>    .<span class="fu">map</span>(<span class="bu">Character</span>::toLowerCase)</span>
<span id="cb136-4"><a href="#cb136-4"></a>    .<span class="fu">toList</span>();</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb137-1"><a href="#cb137-1"></a><span class="bu">List</span>&lt;<span class="bu">Character</span>&gt; alphabetLower = list.<span class="fu">stream</span>().<span class="fu">filter</span>(<span class="bu">Character</span>::isAlphabetic)</span>
<span id="cb137-2"><a href="#cb137-2"></a>    .<span class="fu">map</span>(<span class="bu">Character</span>::toLowerCase).<span class="fu">toList</span>();</span>
<span id="cb137-3"><a href="#cb137-3"></a></span>
<span id="cb137-4"><a href="#cb137-4"></a><span class="bu">List</span>&lt;<span class="bu">Character</span>&gt; alphabetLower = list</span>
<span id="cb137-5"><a href="#cb137-5"></a>    .<span class="fu">stream</span>()</span>
<span id="cb137-6"><a href="#cb137-6"></a>    .<span class="fu">filter</span>(<span class="bu">Character</span>::isAlphabetic)</span>
<span id="cb137-7"><a href="#cb137-7"></a>    .<span class="fu">map</span>(<span class="bu">Character</span>::toLowerCase)</span>
<span id="cb137-8"><a href="#cb137-8"></a>    .<span class="fu">toList</span>();</span></code></pre></div></li>
<li><p>インデントは統合開発環境の提供するフォーマッタに合わせる</p></li>
<li><p>中間処理の数は 3 つ（3 行）程度までを推奨する<br />
中間処理の記述が多くなると可読性も悪くなり、デバッグも難しくなるため、3 行程度を目安にロジックを検討すること。</p></li>
<li><p>コメントは、原則として処理中には記載しない<br />
難解になってしまった場合のみ処理中の記載を認める</p>
<p>良い例：</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb138-1"><a href="#cb138-1"></a><span class="co">// クラスFooのフィールドStrの値で昇順にソートし、フィールドStrの要素を取得して処理する。</span></span>
<span id="cb138-2"><a href="#cb138-2"></a>fooList.<span class="fu">stream</span>()</span>
<span id="cb138-3"><a href="#cb138-3"></a>    .<span class="fu">sorted</span>(<span class="bu">Comparator</span>.<span class="fu">comparing</span>(Foo::getStr))</span>
<span id="cb138-4"><a href="#cb138-4"></a>    .<span class="fu">map</span>(Foo::getStr)</span>
<span id="cb138-5"><a href="#cb138-5"></a>    .<span class="fu">forEach</span>(<span class="kw">this</span>::proc);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb139-1"><a href="#cb139-1"></a>fooList.<span class="fu">stream</span>()</span>
<span id="cb139-2"><a href="#cb139-2"></a>    .<span class="fu">sorted</span>(<span class="bu">Comparator</span>.<span class="fu">comparing</span>(Foo::getStr)) <span class="co">//クラスFooのフィールドStrの値で昇順にソート</span></span>
<span id="cb139-3"><a href="#cb139-3"></a>    .<span class="fu">map</span> (Foo::getStr) <span class="co">//フィールドStrの要素を取得</span></span>
<span id="cb139-4"><a href="#cb139-4"></a>    .<span class="fu">forEach</span>(<span class="kw">this</span>::proc); <span class="co">//処理</span></span>
<span id="cb139-5"><a href="#cb139-5"></a></span>
<span id="cb139-6"><a href="#cb139-6"></a></span>
<span id="cb139-7"><a href="#cb139-7"></a>fooList.<span class="fu">stream</span>()</span>
<span id="cb139-8"><a href="#cb139-8"></a>    <span class="co">//クラスFooのフィールドStrの値で昇順にソート</span></span>
<span id="cb139-9"><a href="#cb139-9"></a>    .<span class="fu">sorted</span>(<span class="bu">Comparator</span>.<span class="fu">comparing</span>(Foo::getStr))</span>
<span id="cb139-10"><a href="#cb139-10"></a>    <span class="co">//フィールドStrの要素を取得</span></span>
<span id="cb139-11"><a href="#cb139-11"></a>    .<span class="fu">map</span> (Foo::getStr)</span>
<span id="cb139-12"><a href="#cb139-12"></a>    <span class="co">//処理</span></span>
<span id="cb139-13"><a href="#cb139-13"></a>    .<span class="fu">forEach</span>(<span class="kw">this</span>::proc);</span></code></pre></div></li>
<li><p>Stream は極力変数代入しないこと<br />
Stream は中間処理、末端処理を行うと使用済みとなり、以降同じインスタンスは利用できない。<br />
変数代入はほとんどの場合意味をなさず、むしろミスの元となるため極力変数代入はしないこと。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb140-1"><a href="#cb140-1"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list1 = Stream.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb140-2"><a href="#cb140-2"></a>        .<span class="fu">map</span>(<span class="bu">String</span>::toLowerCase)</span>
<span id="cb140-3"><a href="#cb140-3"></a>        .<span class="fu">toList</span>();</span>
<span id="cb140-4"><a href="#cb140-4"></a></span>
<span id="cb140-5"><a href="#cb140-5"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list2 = Stream.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb140-6"><a href="#cb140-6"></a>        .<span class="fu">map</span>(s -&gt; s + s)</span>
<span id="cb140-7"><a href="#cb140-7"></a>        .<span class="fu">toList</span>();</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb141-1"><a href="#cb141-1"></a>Stream&lt;<span class="bu">String</span>&gt; stream = Stream.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>);</span>
<span id="cb141-2"><a href="#cb141-2"></a>Stream&lt;<span class="bu">String</span>&gt; stream1 = stream.<span class="fu">map</span>(<span class="bu">String</span>::toLowerCase);</span>
<span id="cb141-3"><a href="#cb141-3"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list1 = stream1.<span class="fu">toList</span>();</span>
<span id="cb141-4"><a href="#cb141-4"></a></span>
<span id="cb141-5"><a href="#cb141-5"></a>Stream&lt;<span class="bu">String</span>&gt; stream2 = stream.<span class="fu">map</span>(s -&gt; s + s);<span class="co">//コーディングミス streamは使用済のためエラーになる</span></span>
<span id="cb141-6"><a href="#cb141-6"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list2 = stream2.<span class="fu">toList</span>();</span></code></pre></div></li>
</ul>
</section>
<section id="optional" data-number="4.29">
<h2 data-number="4.29"><span class="header-section-number">4.29</span> Optional</h2>
<ul>
<li><p>Optional は同メソッド内で値を取り出す場合は極力変数代入しないこと<br />
Optional とその値の変数は同じものを示す名前となり、同じ意味の変数名が複数現れることで可読性が下がるため、Optional の変数代入は行わないこととする。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb142-1"><a href="#cb142-1"></a>Employee employee = <span class="fu">findEmployee</span>(employeeId)</span>
<span id="cb142-2"><a href="#cb142-2"></a>        .<span class="fu">orElseThrow</span>(<span class="bu">IllegalArgumentException</span>::<span class="kw">new</span>);</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb143-1"><a href="#cb143-1"></a>Optional&lt;Employee&gt; employeeOpt = <span class="fu">findEmployee</span>(employeeId);</span>
<span id="cb143-2"><a href="#cb143-2"></a>Employee employee = employeeOpt.<span class="fu">orElseThrow</span>(<span class="bu">IllegalArgumentException</span>::<span class="kw">new</span>);</span></code></pre></div>
<p><br> 直接、値を取り出すことなくOptionalでのみ扱う場合はOptionalを変数代入してもよい。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb144-1"><a href="#cb144-1"></a>Optional&lt;Employee&gt; employee = <span class="fu">findEmployee</span>(employeeId);</span>
<span id="cb144-2"><a href="#cb144-2"></a></span>
<span id="cb144-3"><a href="#cb144-3"></a>Dept dept = employee.<span class="fu">map</span>(Employee::getDivision)</span>
<span id="cb144-4"><a href="#cb144-4"></a>        .<span class="fu">map</span>(Division::getDept)</span>
<span id="cb144-5"><a href="#cb144-5"></a>        .<span class="fu">orElse</span>(<span class="kw">null</span>);</span>
<span id="cb144-6"><a href="#cb144-6"></a></span>
<span id="cb144-7"><a href="#cb144-7"></a><span class="bu">Role</span> role = employee.<span class="fu">map</span>(Employee::getRole)</span>
<span id="cb144-8"><a href="#cb144-8"></a>        .<span class="fu">orElse</span>(<span class="kw">null</span>);</span>
<span id="cb144-9"><a href="#cb144-9"></a></span>
<span id="cb144-10"><a href="#cb144-10"></a><span class="co">//-----</span></span>
<span id="cb144-11"><a href="#cb144-11"></a></span>
<span id="cb144-12"><a href="#cb144-12"></a>Optional&lt;Employee&gt; employee = <span class="fu">findEmployee</span>(employeeId);</span>
<span id="cb144-13"><a href="#cb144-13"></a><span class="co">//・・・処理</span></span>
<span id="cb144-14"><a href="#cb144-14"></a><span class="kw">return</span> employee;</span></code></pre></div></li>
</ul>
</section>
<section id="var-local-variable-type-inference" data-number="4.30">
<h2 data-number="4.30"><span class="header-section-number">4.30</span> var (Local-Variable Type Inference)</h2>
<p>次のリンクも参考にしてください。<br />
<a href="https://openjdk.java.net/projects/amber/LVTIstyle.html">Style Guidelines for Local Variable Type Inference in Java</a></p>
<ul>
<li><p>明確な方針で、利用する・利用しないを統一すること<br />
方針無く、<code>var</code>を混在させるとソースコードの見通しと保守性が悪くなります。<br />
各プロジェクトで、例えば以下ののような方針で統一してください。</p>
<ol type="1">
<li><code>var</code>を利用しない</li>
<li>原則<code>var</code>を利用する</li>
<li>右辺で、明確に型がわかる場合は<code>var</code>を利用する</li>
</ol>
<p>以下で<code>2</code>、<code>3</code>について例を示します。</p>
<ul>
<li><p>原則<code>var</code>を利用する</p>
<p>利用できる箇所は全て<code>var</code>を利用します。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb145-1"><a href="#cb145-1"></a>var a = <span class="st">&quot;&quot;</span>;</span>
<span id="cb145-2"><a href="#cb145-2"></a>var b = <span class="dv">123</span>;</span>
<span id="cb145-3"><a href="#cb145-3"></a>var c = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;<span class="bu">String</span>&gt;();</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb146-1"><a href="#cb146-1"></a>var a = <span class="st">&quot;&quot;</span>;</span>
<span id="cb146-2"><a href="#cb146-2"></a><span class="dt">int</span> b = <span class="dv">123</span>;</span>
<span id="cb146-3"><a href="#cb146-3"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; c = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb147-1"><a href="#cb147-1"></a><span class="dt">void</span> <span class="fu">methodA</span>() {</span>
<span id="cb147-2"><a href="#cb147-2"></a>    var a = <span class="st">&quot;&quot;</span>;</span>
<span id="cb147-3"><a href="#cb147-3"></a>}</span>
<span id="cb147-4"><a href="#cb147-4"></a><span class="dt">void</span> <span class="fu">methodB</span>() {</span>
<span id="cb147-5"><a href="#cb147-5"></a>    <span class="bu">String</span> a = <span class="st">&quot;&quot;</span>;</span>
<span id="cb147-6"><a href="#cb147-6"></a>}</span></code></pre></div></li>
<li><p>右辺で、明確に型がわかる場合は<code>var</code>を利用する</p>
<p>右辺をみて型がわかる場合は、全て<code>var</code>を利用します。 それ以外は<code>var</code>を利用してはいけません。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb148-1"><a href="#cb148-1"></a>var s = <span class="st">&quot;&quot;</span>; <span class="co">// リテラルによって型が明確に判断できます</span></span>
<span id="cb148-2"><a href="#cb148-2"></a>var list1 = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;<span class="bu">String</span>&gt;(); <span class="co">// newによって型が明確に判断できます</span></span>
<span id="cb148-3"><a href="#cb148-3"></a>var list2 = (<span class="bu">List</span>&lt;<span class="bu">String</span>&gt;) map.<span class="fu">get</span>(<span class="st">&quot;p&quot;</span>); <span class="co">// キャストによって型が明確に判断できます</span></span>
<span id="cb148-4"><a href="#cb148-4"></a>var list3 = <span class="bu">List</span>.<span class="fu">of</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>); <span class="co">// ファクトリーによって型が明確に判断できます</span></span></code></pre></div>
<p>プロジェクトで観点を決めるべき例：</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb149-1"><a href="#cb149-1"></a>var b1 = s.<span class="fu">isEmpty</span>(); <span class="co">// `is`で始まるメソッドは通例としてbooleanを返します</span></span>
<span id="cb149-2"><a href="#cb149-2"></a>var b2 = Objects.<span class="fu">equals</span>(s1, s2); <span class="co">// `equals`メソッドは通例としてbooleanを返します</span></span>
<span id="cb149-3"><a href="#cb149-3"></a>var i1 = Objects.<span class="fu">hash</span>(s); <span class="co">// `hash`、`hashCode`メソッドは通例としてintを返します</span></span>
<span id="cb149-4"><a href="#cb149-4"></a>var i2 = Objects.<span class="fu">compare</span>(s1, s2); <span class="co">// `compare`、`compareTo`メソッドは通例としてintを返します</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb150-1"><a href="#cb150-1"></a>var a = e.<span class="fu">getData</span>(); <span class="co">// `e`の型と、メソッド定義がわからなければ型が判断できません</span></span></code></pre></div></li>
</ul></li>
</ul>
</section>
<section id="レコード" data-number="4.31">
<h2 data-number="4.31"><span class="header-section-number">4.31</span> レコード</h2>
<ul>
<li><p>明確な方針で、利用する・利用しないを統一すること<br />
方針無く、<code>record</code>とクラスと JavaBeans 形式のクラスや Lombok の <span class="citation" data-cites="Data">@Data</span> の使用を混在させるとソースコードの見通しと保守性が悪くなります。<br />
各プロジェクトで、<code>record</code>を利用しないか、<code>record</code>の使用しても良い箇所について方針を決めた上で使用するようにしてください。 また、<code>record</code>は JavaBeans とは互換性がないため使用している各種ライブラリの対応状況にも注意する必要があります。</p>
<p>方針例： クラス内で処理する一時的なデータを表現するためだけに<code>record</code>を使用しても良い。</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb151-1"><a href="#cb151-1"></a><span class="co">// parentId と id をキーとして、重複を排除した uniqueItems を作成します。</span></span>
<span id="cb151-2"><a href="#cb151-2"></a>record <span class="bu">Key</span>(<span class="dt">int</span> parentId, <span class="dt">int</span> id) {</span>
<span id="cb151-3"><a href="#cb151-3"></a>}</span>
<span id="cb151-4"><a href="#cb151-4"></a>var map = <span class="kw">new</span> <span class="bu">HashMap</span>&lt;<span class="bu">Key</span>, Item&gt;();</span>
<span id="cb151-5"><a href="#cb151-5"></a><span class="kw">for</span> (Item item : items) {</span>
<span id="cb151-6"><a href="#cb151-6"></a>  var key = <span class="kw">new</span> <span class="bu">Key</span>(item.<span class="fu">getParenId</span>(), item.<span class="fu">getId</span>());</span>
<span id="cb151-7"><a href="#cb151-7"></a>  map.<span class="fu">putIfAbsent</span>(key, item);</span>
<span id="cb151-8"><a href="#cb151-8"></a>}</span>
<span id="cb151-9"><a href="#cb151-9"></a>var uniqueItems = map.<span class="fu">values</span>();</span></code></pre></div></li>
<li><p>次の記述スタイルを標準とする<br />
ただし、フォーマッタを導入している場合はフォーマッタに合わせます。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb152-1"><a href="#cb152-1"></a><span class="co">/**</span></span>
<span id="cb152-2"><a href="#cb152-2"></a> <span class="co">*</span> 矩形を表すクラス</span>
<span id="cb152-3"><a href="#cb152-3"></a> <span class="co">*</span></span>
<span id="cb152-4"><a href="#cb152-4"></a> <span class="co">* </span><span class="an">@param x </span>     矩形の左上隅の x 座標</span>
<span id="cb152-5"><a href="#cb152-5"></a> <span class="co">*</span> <span class="an">@param y </span>     矩形の左上隅の y 座標</span>
<span id="cb152-6"><a href="#cb152-6"></a> <span class="co">*</span> <span class="an">@param width </span> 矩形の幅</span>
<span id="cb152-7"><a href="#cb152-7"></a> <span class="co">*</span> <span class="an">@param height </span>矩形の高さ</span>
<span id="cb152-8"><a href="#cb152-8"></a> <span class="co">*/</span></span>
<span id="cb152-9"><a href="#cb152-9"></a><span class="kw">public</span> record <span class="fu">Rect</span>(</span>
<span id="cb152-10"><a href="#cb152-10"></a>    <span class="co">/* 矩形の左上隅の x 座標 */</span></span>
<span id="cb152-11"><a href="#cb152-11"></a>    <span class="dt">double</span> x,</span>
<span id="cb152-12"><a href="#cb152-12"></a>    <span class="co">/* 矩形の左上隅の y 座標 */</span></span>
<span id="cb152-13"><a href="#cb152-13"></a>    <span class="dt">double</span> y,</span>
<span id="cb152-14"><a href="#cb152-14"></a>    <span class="co">/* 矩形の幅 */</span></span>
<span id="cb152-15"><a href="#cb152-15"></a>    <span class="dt">double</span> width,</span>
<span id="cb152-16"><a href="#cb152-16"></a>    <span class="co">/* 矩形の高さ */</span></span>
<span id="cb152-17"><a href="#cb152-17"></a>    <span class="dt">double</span> height) {</span>
<span id="cb152-18"><a href="#cb152-18"></a>}</span></code></pre></div>
<p>次にポイントを説明します。</p>
<ul>
<li><p><code>{</code>の後、<code>}</code>の前に改行する</p></li>
<li><p>レコードコンポーネント（パラメータ）のカンマの後に改行することを推奨する<br />
レコードコンポーネントが少なく、レコードコンポーネント名からでも意味が理解でき、改行がなくても可読性が低下しない場合は、改行を必要としません。<br />
改行を推奨する理由は以下です。</p>
<ul>
<li>アノテーションを付与したときでも比較的読みやすい（アノテーション引数との混在による可読性の低下の回避）</li>
<li>レコードコンポーネントが多い場合も比較的読みやすい</li>
</ul></li>
<li><p>レコードコンポーネントが多い場合、レコードコンポーネントへ直接コメントをつけることを検討する<br />
レコードコンポーネントの JavaDoc としては<code>@param</code>形式でレコード名の上部に記述しますが、このソースコードをテキストとしてみた場合、レコードコンポーネントの定義と<code>@param</code>の説明とで距離が空いてしまう場合があり、型と説明を読むのに時間がかかってしまう可能性があります。<br />
また、使用する IDE によっては、アクセサから宣言へのジャンプを使用すると、レコードコンポーネント（パラメータ）の定義へジャンプするものがあります。レコードコンポーネントにコメントがあればすぐに説明を読むことができますが、JavaDoc しか記述しない場合は、ファイル上部へ移動して対応するレコードコンポーネントの説明を探さなければなりません。</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb153-1"><a href="#cb153-1"></a><span class="kw">public</span> record <span class="fu">Rect</span>(</span>
<span id="cb153-2"><a href="#cb153-2"></a>    <span class="co">/* 矩形の左上隅の x 座標 */</span></span>
<span id="cb153-3"><a href="#cb153-3"></a>    <span class="dt">double</span> x,</span>
<span id="cb153-4"><a href="#cb153-4"></a>    <span class="co">/* 矩形の左上隅の y 座標 */</span></span>
<span id="cb153-5"><a href="#cb153-5"></a>    <span class="dt">double</span> y,</span>
<span id="cb153-6"><a href="#cb153-6"></a>    <span class="co">/* 矩形の幅 */</span></span>
<span id="cb153-7"><a href="#cb153-7"></a>    <span class="dt">double</span> width,</span>
<span id="cb153-8"><a href="#cb153-8"></a>    <span class="co">/* 矩形の高さ */</span></span>
<span id="cb153-9"><a href="#cb153-9"></a>    <span class="dt">double</span> height) {</span>
<span id="cb153-10"><a href="#cb153-10"></a>}</span></code></pre></div></li>
</ul></li>
<li><p>レコードのアクセサを上書きしない</p>
<p>悪い例：</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb154-1"><a href="#cb154-1"></a><span class="kw">public</span> record <span class="fu">Rect</span>(</span>
<span id="cb154-2"><a href="#cb154-2"></a>    <span class="dt">double</span> x,</span>
<span id="cb154-3"><a href="#cb154-3"></a>    <span class="dt">double</span> y,</span>
<span id="cb154-4"><a href="#cb154-4"></a>    <span class="dt">double</span> width,</span>
<span id="cb154-5"><a href="#cb154-5"></a>    <span class="dt">double</span> height) {</span>
<span id="cb154-6"><a href="#cb154-6"></a></span>
<span id="cb154-7"><a href="#cb154-7"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">x</span>() {</span>
<span id="cb154-8"><a href="#cb154-8"></a>        <span class="kw">return</span> x;</span>
<span id="cb154-9"><a href="#cb154-9"></a>    }</span>
<span id="cb154-10"><a href="#cb154-10"></a>}</span></code></pre></div></li>
</ul>
</section>
<section id="テキストブロック" data-number="4.32">
<h2 data-number="4.32"><span class="header-section-number">4.32</span> テキストブロック</h2>
<p>次のリンクも参考にしてください。<br />
<a href="https://docs.oracle.com/en/java/javase/17/text-blocks/index.html#style-guidelines-for-text-blocks">Programmer’s Guide To Text Blocks &gt; Style Guidelines For Text Blocks</a></p>
<ul>
<li><p>複数行の文字列を定義する際、文字列連結よりもテキストブロックを使用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb155-1"><a href="#cb155-1"></a><span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb155-2"><a href="#cb155-2"></a>        複数行の文字列はテキストブロックを使用しましょう。</span>
<span id="cb155-3"><a href="#cb155-3"></a>        文字列連結と違い、プラス記号や改行コードのエスケープシーケンスのような無駄を排除でき、</span>
<span id="cb155-4"><a href="#cb155-4"></a>        より読みやすいソースコードで書くことができます。</span>
<span id="cb155-5"><a href="#cb155-5"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb156-1"><a href="#cb156-1"></a><span class="bu">String</span> message =</span>
<span id="cb156-2"><a href="#cb156-2"></a>        <span class="st">&quot;複数行の文字列はテキストブロックを使用しましょう。</span><span class="sc">\n</span><span class="st">&quot;</span> +</span>
<span id="cb156-3"><a href="#cb156-3"></a>        <span class="st">&quot;文字列連結と違い、プラス記号や改行コードのエスケープシーケンスのような無駄を排除でき、</span><span class="sc">\n</span><span class="st">&quot;</span> +</span>
<span id="cb156-4"><a href="#cb156-4"></a>        <span class="st">&quot;より読みやすいソースコードで書くことができます。</span><span class="sc">\n</span><span class="st">&quot;</span>;</span></code></pre></div></li>
<li><p>単一行の文字列を定義する際、テキストブロックは使用せず文字列リテラルを使用する<br />
ただし、二重引用符(<code>&quot;</code>)のエスケープを避ける目的ではテキストブロックを使用しても良い。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb157-1"><a href="#cb157-1"></a><span class="bu">String</span> singleLine = <span class="st">&quot;単一行の文字列です。&quot;</span>;</span>
<span id="cb157-2"><a href="#cb157-2"></a></span>
<span id="cb157-3"><a href="#cb157-3"></a><span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb157-4"><a href="#cb157-4"></a>        テキストブロックでは単一の二重引用符「<span class="st">&quot;」にエスケープを使用する必要がありません。&quot;&quot;&quot;</span>;</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb158-1"><a href="#cb158-1"></a><span class="bu">String</span> singleLine = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb158-2"><a href="#cb158-2"></a>        単一行の文字列です。<span class="st">&quot;&quot;&quot;;</span></span></code></pre></div></li>
<li><p>テキストブロック内では基本的に改行コードのエスケープシーケンス(<code>\n</code>)を使用しないが、読みやすさ向上の目的で改行コードのエスケープシーケンス(<code>\n</code>)を使用しても良い</p>
<p>良い例：</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb159-1"><a href="#cb159-1"></a><span class="bu">String</span> multiLine = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb159-2"><a href="#cb159-2"></a>        複数行の、</span>
<span id="cb159-3"><a href="#cb159-3"></a>        文字列です。</span>
<span id="cb159-4"><a href="#cb159-4"></a>        <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb159-5"><a href="#cb159-5"></a></span>
<span id="cb159-6"><a href="#cb159-6"></a><span class="bu">String</span> csv = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb159-7"><a href="#cb159-7"></a>        名前,説明,MIMEタイプ</span>
<span id="cb159-8"><a href="#cb159-8"></a>        CSV,<span class="st">&quot;Comma-Separated Valuesの略</span><span class="sc">\n</span><span class="st">Character-Separated Valuesの意味で使用されることもある&quot;</span>,<span class="st">&quot;text/csv&quot;</span></span>
<span id="cb159-9"><a href="#cb159-9"></a>        TSV,<span class="st">&quot;Tab-Separated Valuesの略&quot;</span>,<span class="st">&quot;text/tab-separated-values&quot;</span></span>
<span id="cb159-10"><a href="#cb159-10"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb160-1"><a href="#cb160-1"></a><span class="bu">String</span> multiLine = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb160-2"><a href="#cb160-2"></a>        複数行の、\n文字列です。</span>
<span id="cb160-3"><a href="#cb160-3"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div></li>
<li><p>テキストブロックで定義した文字列を処理する場合は、テキストブロックをローカル変数やフィールドへ代入してから使用することを推奨する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb161-1"><a href="#cb161-1"></a><span class="bu">String</span> selectX = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb161-2"><a href="#cb161-2"></a>        SELECT</span>
<span id="cb161-3"><a href="#cb161-3"></a>            ID,</span>
<span id="cb161-4"><a href="#cb161-4"></a>            NAME</span>
<span id="cb161-5"><a href="#cb161-5"></a>        FROM</span>
<span id="cb161-6"><a href="#cb161-6"></a>            TABLE_X</span>
<span id="cb161-7"><a href="#cb161-7"></a>        <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb161-8"><a href="#cb161-8"></a><span class="bu">String</span> selectY = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb161-9"><a href="#cb161-9"></a>        SELECT</span>
<span id="cb161-10"><a href="#cb161-10"></a>            ID,</span>
<span id="cb161-11"><a href="#cb161-11"></a>            NAME</span>
<span id="cb161-12"><a href="#cb161-12"></a>        FROM</span>
<span id="cb161-13"><a href="#cb161-13"></a>            TABLE_Y</span>
<span id="cb161-14"><a href="#cb161-14"></a>        <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb161-15"><a href="#cb161-15"></a><span class="fu">processValues</span>(<span class="fu">fetch</span>(selectX, Entity1.<span class="fu">class</span>), <span class="fu">fetch</span>(selectY, Entity2.<span class="fu">class</span>));</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb162-1"><a href="#cb162-1"></a><span class="fu">processValues</span>(<span class="fu">fetch</span>(<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb162-2"><a href="#cb162-2"></a>        SELECT</span>
<span id="cb162-3"><a href="#cb162-3"></a>            ID,</span>
<span id="cb162-4"><a href="#cb162-4"></a>            NAME</span>
<span id="cb162-5"><a href="#cb162-5"></a>        FROM</span>
<span id="cb162-6"><a href="#cb162-6"></a>            TABLE_X</span>
<span id="cb162-7"><a href="#cb162-7"></a>        <span class="st">&quot;&quot;&quot;, Entity1.class), fetch(&quot;&quot;&quot;</span></span>
<span id="cb162-8"><a href="#cb162-8"></a>        SELECT</span>
<span id="cb162-9"><a href="#cb162-9"></a>            ID,</span>
<span id="cb162-10"><a href="#cb162-10"></a>            NAME</span>
<span id="cb162-11"><a href="#cb162-11"></a>        FROM</span>
<span id="cb162-12"><a href="#cb162-12"></a>            TABLE_Y</span>
<span id="cb162-13"><a href="#cb162-13"></a>        <span class="st">&quot;&quot;&quot;, Entity2.class));</span></span></code></pre></div>
<p>複雑な処理に直接テキストブロックを使用すると可読性を下げる可能性があります。</p></li>
<li><p>3 つ以上続く二重引用符(<code>&quot;</code>)をエスケープする際は、最初の二重引用符にエスケープシーケンスを使用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb163-1"><a href="#cb163-1"></a><span class="bu">String</span> javaCode = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb163-2"><a href="#cb163-2"></a>        <span class="bu">String</span> message = \<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb163-3"><a href="#cb163-3"></a>                テキストブロックです。</span>
<span id="cb163-4"><a href="#cb163-4"></a>                \<span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb163-5"><a href="#cb163-5"></a>        <span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(message);</span>
<span id="cb163-6"><a href="#cb163-6"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb164-1"><a href="#cb164-1"></a><span class="bu">String</span> javaCode = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb164-2"><a href="#cb164-2"></a>        <span class="bu">String</span> message = \<span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span></span>
<span id="cb164-3"><a href="#cb164-3"></a>                テキストブロックです。</span>
<span id="cb164-4"><a href="#cb164-4"></a>                \<span class="st">&quot;</span><span class="sc">\&quot;\&quot;</span><span class="st">;</span></span>
<span id="cb164-5"><a href="#cb164-5"></a>        <span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(message);</span>
<span id="cb164-6"><a href="#cb164-6"></a>        <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb164-7"><a href="#cb164-7"></a></span>
<span id="cb164-8"><a href="#cb164-8"></a><span class="bu">String</span> javaCode = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb164-9"><a href="#cb164-9"></a>        <span class="bu">String</span> message = <span class="st">&quot;&quot;</span>\<span class="st">&quot;</span></span>
<span id="cb164-10"><a href="#cb164-10"></a>                テキストブロックです。</span>
<span id="cb164-11"><a href="#cb164-11"></a>                <span class="st">&quot;&quot;</span>\<span class="st">&quot;;</span></span>
<span id="cb164-12"><a href="#cb164-12"></a>        <span class="bu">System</span>.<span class="fu">out</span>.<span class="fu">println</span>(message);</span>
<span id="cb164-13"><a href="#cb164-13"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div></li>
<li><p>テキストブロックの開始引用符(<code>&quot;&quot;&quot;</code>)は前の行の右端に記述する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb165-1"><a href="#cb165-1"></a><span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb165-2"><a href="#cb165-2"></a>        テキストブロックです。</span>
<span id="cb165-3"><a href="#cb165-3"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb166-1"><a href="#cb166-1"></a><span class="bu">String</span> message =</span>
<span id="cb166-2"><a href="#cb166-2"></a>        <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb166-3"><a href="#cb166-3"></a>        テキストブロックです。</span>
<span id="cb166-4"><a href="#cb166-4"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div></li>
<li><p>テキストブロックのインデントは開始引用符(<code>&quot;&quot;&quot;</code>)に合わせる必要はない</p>
<p>良い例：</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb167-1"><a href="#cb167-1"></a><span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb167-2"><a href="#cb167-2"></a>        テキストブロックです。</span>
<span id="cb167-3"><a href="#cb167-3"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb168-1"><a href="#cb168-1"></a><span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb168-2"><a href="#cb168-2"></a>                 テキストブロックです。</span>
<span id="cb168-3"><a href="#cb168-3"></a>                 <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>一見すると、読みやすく見えるかもしれませんが、変数名の変更によって簡単に崩れてしまい、修正するために多くの行の変更を強制することになるため、メンテナンス性が低下します。</p></li>
<li><p>テキストブロックで定義する文字列のインデントは基本的に周辺の Java コードに合わせてインデントする<br />
ただし、横に長い文字列などの可読性向上の目的で左端に揃えるのは良い。</p>
<p>良い例：</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb169-1"><a href="#cb169-1"></a><span class="kw">public</span> <span class="kw">class</span> Foo {</span>
<span id="cb169-2"><a href="#cb169-2"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb169-3"><a href="#cb169-3"></a>        <span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb169-4"><a href="#cb169-4"></a>                テキストブロックです。</span>
<span id="cb169-5"><a href="#cb169-5"></a>                <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb169-6"><a href="#cb169-6"></a>    }</span>
<span id="cb169-7"><a href="#cb169-7"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb170-1"><a href="#cb170-1"></a><span class="kw">public</span> <span class="kw">class</span> Foo {</span>
<span id="cb170-2"><a href="#cb170-2"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb170-3"><a href="#cb170-3"></a>        <span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb170-4"><a href="#cb170-4"></a>    テキストブロックです。</span>
<span id="cb170-5"><a href="#cb170-5"></a>    <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb170-6"><a href="#cb170-6"></a>    }</span>
<span id="cb170-7"><a href="#cb170-7"></a>}</span></code></pre></div>
<p>良い例：</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb171-1"><a href="#cb171-1"></a><span class="kw">public</span> <span class="kw">class</span> Foo {</span>
<span id="cb171-2"><a href="#cb171-2"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb171-3"><a href="#cb171-3"></a>        <span class="kw">if</span> (foo) {</span>
<span id="cb171-4"><a href="#cb171-4"></a>            <span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb171-5"><a href="#cb171-5"></a>それはもう長い長いテキストブロックのためインデントするとエディタ上でテキストを見るためには横スクロールが必要になるかもしれません。</span>
<span id="cb171-6"><a href="#cb171-6"></a><span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb171-7"><a href="#cb171-7"></a>        }</span>
<span id="cb171-8"><a href="#cb171-8"></a>    }</span>
<span id="cb171-9"><a href="#cb171-9"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb172-1"><a href="#cb172-1"></a><span class="kw">public</span> <span class="kw">class</span> Foo {</span>
<span id="cb172-2"><a href="#cb172-2"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">process</span>() {</span>
<span id="cb172-3"><a href="#cb172-3"></a>        <span class="kw">if</span> (foo) {</span>
<span id="cb172-4"><a href="#cb172-4"></a>            <span class="bu">String</span> message = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb172-5"><a href="#cb172-5"></a>                    それはもう長い長いテキストブロックのためインデントするとエディタ上でテキストを見るためには横スクロールが必要になるかもしれません。</span>
<span id="cb172-6"><a href="#cb172-6"></a>                    <span class="st">&quot;&quot;&quot;;</span></span>
<span id="cb172-7"><a href="#cb172-7"></a>        }</span>
<span id="cb172-8"><a href="#cb172-8"></a>    }</span>
<span id="cb172-9"><a href="#cb172-9"></a>}</span></code></pre></div></li>
<li><p>テキストブロックのインデントにスペース文字とタブ文字を混在させない</p></li>
<li><p>文字列の最後に改行コードを入れずに、意図的にインデントした文字列を定義するとき終了引用符(<code>&quot;&quot;&quot;</code>)の前の行の右端に<code>\</code>を使用する</p>
<p>良い例：</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb173-1"><a href="#cb173-1"></a><span class="bu">String</span> text = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb173-2"><a href="#cb173-2"></a>            ABC</span>
<span id="cb173-3"><a href="#cb173-3"></a>            DEF</span>
<span id="cb173-4"><a href="#cb173-4"></a>            GHI\</span>
<span id="cb173-5"><a href="#cb173-5"></a>        <span class="st">&quot;&quot;&quot;;</span></span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb174-1"><a href="#cb174-1"></a><span class="bu">String</span> text = <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb174-2"><a href="#cb174-2"></a>        ABC</span>
<span id="cb174-3"><a href="#cb174-3"></a>        DEF</span>
<span id="cb174-4"><a href="#cb174-4"></a>        GHI<span class="st">&quot;&quot;&quot;.indent(4);</span></span></code></pre></div></li>
</ul>
</section>
<section id="ストリームinputstream-outputstream" data-number="4.33">
<h2 data-number="4.33"><span class="header-section-number">4.33</span> ストリーム（InputStream OutputStream）</h2>
<ul>
<li><p>ストリームを扱う API を利用するときは、try-with-resources 文で後処理をする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb175-1"><a href="#cb175-1"></a><span class="kw">try</span> (<span class="bu">InputStream</span> inputStream = Files.<span class="fu">newInputStream</span>(Paths.<span class="fu">get</span>(<span class="st">&quot;foo.txt&quot;</span>)) {</span>
<span id="cb175-2"><a href="#cb175-2"></a>    <span class="co">//inputStreamに対する処理を記載</span></span>
<span id="cb175-3"><a href="#cb175-3"></a>}</span></code></pre></div></li>
<li><p><code>ObjectOutputStream</code> では<code>reset()</code>を利用する</p></li>
</ul>
</section>
<section id="リソースの解放" data-number="4.34">
<h2 data-number="4.34"><span class="header-section-number">4.34</span> リソースの解放</h2>
<ul>
<li><p>リソース解放を必要とするクラスを利用するときは、try-with-resources 文で後処理をする</p>
<p>良い例：</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb176-1"><a href="#cb176-1"></a><span class="kw">try</span> (<span class="bu">InputStream</span> inputStream = Files.<span class="fu">newInputStream</span>(Paths.<span class="fu">get</span>(<span class="st">&quot;foo.txt&quot;</span>)) {</span>
<span id="cb176-2"><a href="#cb176-2"></a>    <span class="co">//inputStreamに対する処理を記載</span></span>
<span id="cb176-3"><a href="#cb176-3"></a>}</span></code></pre></div></li>
<li><p>リソース解放を必要とするクラスを作成する場合は<code>AutoCloseable</code>を<code>implements</code>する<br />
<code>AutoCloseable</code>を<code>implements</code>することで try-with-resources 文が利用できるようになります。</p></li>
</ul>
</section>
<section id="例外" data-number="4.35">
<h2 data-number="4.35"><span class="header-section-number">4.35</span> 例外</h2>
<ul>
<li><p>catch 文で受け取る例外は、詳細な例外クラスで受け取る</p>
<p>良い例：</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb177-1"><a href="#cb177-1"></a><span class="kw">try</span> (<span class="bu">InputStream</span> inputStream = Files.<span class="fu">newInputStream</span>(Paths.<span class="fu">get</span>(<span class="st">&quot;foo.txt&quot;</span>)) {</span>
<span id="cb177-2"><a href="#cb177-2"></a>    <span class="co">//・・・</span></span>
<span id="cb177-3"><a href="#cb177-3"></a>} <span class="kw">catch</span> (<span class="bu">IOException</span> e) {</span>
<span id="cb177-4"><a href="#cb177-4"></a>    log.<span class="fu">error</span>(<span class="st">&quot;Error&quot;</span>, e);</span>
<span id="cb177-5"><a href="#cb177-5"></a>    <span class="kw">throw</span> e;</span>
<span id="cb177-6"><a href="#cb177-6"></a>}</span></code></pre></div>
<p>悪い例：</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb178-1"><a href="#cb178-1"></a><span class="kw">try</span> (<span class="bu">InputStream</span> inputStream = Files.<span class="fu">newInputStream</span>(Paths.<span class="fu">get</span>(<span class="st">&quot;foo.txt&quot;</span>)) {</span>
<span id="cb178-2"><a href="#cb178-2"></a>    <span class="co">//・・・</span></span>
<span id="cb178-3"><a href="#cb178-3"></a>} <span class="kw">catch</span> (<span class="bu">Exception</span> e) {<span class="co">//範囲が広すぎる例外クラスの利用はNG</span></span>
<span id="cb178-4"><a href="#cb178-4"></a>    log.<span class="fu">error</span>(<span class="st">&quot;Error&quot;</span>, e);</span>
<span id="cb178-5"><a href="#cb178-5"></a>    <span class="kw">throw</span> e;</span>
<span id="cb178-6"><a href="#cb178-6"></a>}</span></code></pre></div></li>
<li><p><code>Exception</code> クラスのオブジェクトを生成してスローしない</p></li>
<li><p><code>catch</code> ブロックでは基本、例外処理をする。ただし処理を書いてはいけない部分もあるので、その部分については、“<code>// ignore</code>” というコメントを記述すること。</p></li>
<li><p>例外クラスは無駄に定義しない</p></li>
</ul>
</section>
<section id="ガベージコレクション" data-number="4.36">
<h2 data-number="4.36"><span class="header-section-number">4.36</span> ガベージコレクション</h2>
<ul>
<li>原則<code>finalize()</code>のオーバーライド実装は禁止</li>
<li>もし<code>finalize()</code>をオーバーライドした場合は<code>super.finalize()</code> を呼び出す</li>
<li>アプリケーションから<code>finalize()</code>を呼び出さない</li>
</ul>
</section>
</section>
<section id="コメント規約" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> コメント規約</h1>
<section id="よいコメントの鉄則" data-number="5.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> よいコメントの鉄則</h2>
<ul>
<li><p>コードを明確化するコメントを書く<br />
コードにコメントを書く理由は、自分自身、一緒に仕事をしている人、後に関わる開発者にとってコードをより理解しやすいものにするためである。</p></li>
<li><p>コメント化する価値がないプログラムならば、実行するに値しない<br />
有用な格言。コメントは必須。</p></li>
<li><p>過剰な装飾は使わない （例：見出し状のコメント）<br />
1960 年代から 1970 年代の典型的な COBOL プログラマにはアスタリスク( <code>*</code> )でコメントを囲った箱を書く習慣があった。彼らの芸術的な主張を表わしているのかもしれないが、率直に言えばそれは製品に加わるちょっとした価値に比べれば大きな時間の無駄である。かわいいコードではなくきれいなコードを書くはずである。さらに、コードを表示するディスプレイや印刷するプリントに使われるフォントはプロポーショナルだったりそうでなかったりして、箱をきれいに整列させることは難しい。</p></li>
<li><p>コメントはシンプルに<br />
かつて見たもっとも最良のコメントは、シンプルな要点をまとめた注釈であった。なにも本を書く必要はなく、他の人がコードを理解するに十分な情報を提供するだけでよいのである。</p></li>
<li><p>コードを書く前に先にコメントを記述する<br />
コードをコメント化する最良の方法は、コードを書く前にコメントを書くことである。それが、コードを書く前にコードがどのように動作するかについて考えるよい機会となり、コメントの存在を保障することにもつながる。少なくともコードを書いた時にコメントすべきである。コメントによってコードが理解しやすくなることで、コードの開発中にアドバンテージを得ることができる。コードにコメントを書く時間を費やせば、それによって得られるものがある。</p></li>
<li><p>コメントには、なぜそうなのかを書く。コードを読めば分かることを書かない<br />
基本的に、コードの一部分を見ればそれが何かを理解することはできる。例えば、以下のコードを見て、$1000 以上の注文については 5%ディスカウントされることは理解できる。なぜそうなのか？大きな注文ではディスカウントがつきものだというビジネスルールがあるのだろうか？大きな注文に時間限定サービスがあるのか、それともずっとサービスがあるのか？これを書いたプログラマの気前がよかったのか？<br />
どこかソースコード中か別な文書にコメントされていない限り、それがなぜなのかを知ることはできない。</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb179-1"><a href="#cb179-1"></a><span class="kw">if</span> (grandTotal &gt;= <span class="fl">1000.</span><span class="bn">00</span>) {</span>
<span id="cb179-2"><a href="#cb179-2"></a>    grandTotal = grandTotal * <span class="fl">0.</span><span class="dv">95</span>;</span>
<span id="cb179-3"><a href="#cb179-3"></a>}</span></code></pre></div>
<p>なお、メソッドコメントには、適切な javadoc コメント（タグ）のほかに、以下の内容も可能な限り明記すること。</p>
<ul>
<li>副作用のある処理の場合は、その内容　（→ メソッドの引数オブジェクトがメソッド内で変更されるケースなど）</li>
<li>既知のバグ　（→ 判明しているが修正しないことにした場合など）</li>
<li>影響のある事前条件、事後条件　（→ メソッドが正しく動作するための前提について）</li>
<li>並行性　（→ 　マルチスレッドでアクセスされた場合の動作について）</li>
<li>該当メソッドの使用例やサンプルコード</li>
</ul></li>
<li><p>TODO コメント<br />
設計者確認待ち、共通処理の作成待ちなどの理由により、実装時に TODO がある場合、下記のようにコメントを記述する。<br />
（Eclipse の TODO コメント形式を採用）<br />
例）</p>
<pre><code>//TODO：ワークフローの仕様決定待ち　関連チケット#12345</code></pre></li>
</ul>
</section>
<section id="java-コメント3-種類の使い分け" data-number="5.2">
<h2 data-number="5.2"><span class="header-section-number">5.2</span> Java コメント（3 種類）の使い分け</h2>
<p>Java では 3 種類のコメントが使える。javadoc コメントは<code>/**</code>で開始され、<code>*/</code>で終わる。C 風コメントは<code>/*</code>で開始され<code>*/</code>で終わる。単一行コメントは<code>//</code>で開始され、そのソースコード行が終わるまで続く。以下の表ではコメントの使い方とその例を示す。（コメントのスタイルに関しては、前述の「標準規約に準拠したコーディング例」を参照）</p>
<table>
<colgroup>
<col style="width: 8%"></col>
<col style="width: 46%"></col>
<col style="width: 45%"></col>
</colgroup>
<thead>
<tr class="header">
<th>コメント種類</th>
<th>使用方法</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>javadoc コメント<br><code>/** comment */</code></td>
<td>interface、class、メソッド、フィールドの直前に書く。コメントは javadoc によって処理され、外部ドキュメント(HTML)として生成される。（この形式以外のコメントはドキュメントとして出力されないことに注意）</td>
<td><code class="comment-code">/*<em><br> </em> 顧客（Customer）-<br> _ 顧客はわれわれがサービスまたは製品を売った人物<br> _ もしくは組織のいずれかである。<br> _ <span class="citation" data-cites="author">@author</span> 開発太郎<br> _/</code></td>
</tr>
<tr class="even">
<td>C 風コメント<br><code>/* comment */</code></td>
<td>特定のコードを無効化したいが、後で使用するかもしれないので残しておくためにコメント化する時や、デバッグ時に一時的に無効化するときに使用する。</td>
<td><code class="comment-code">/_ <br> このコードは J.T.Kirk によって 1997.12.9 に前述のコードと置き換えたためコメント化した。2 年間不要であるならば削除せよ。<br> … (ソースコード) <br> _/</code></td>
</tr>
<tr class="odd">
<td>単一行コメント<br><code>// comment</code></td>
<td>メソッド内にて、ビジネスロジック、コードの概要、一時変数の定義内容などを記述する。</td>
<td><code class="comment-code">// 1995 年 2 月に開始された X 氏の寛大なキャンペーンで<br>// 定められた通り 1000$を超える請求には、全て 5%割引を<br>// 適用する。</code></td>
</tr>
</tbody>
</table>
<p>※ ロジック中に、頻繁に C 風コメントでコメントを書くとまとめてコメントアウトする場合に不便なため、基本的にロジック中では単一行コメントを利用すること。</p>
</section>
</section>
<section id="パフォーマンス" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> パフォーマンス</h1>
<p>パフォーマンスを考慮した Java のコーディングについて以下に示す。</p>
<p>※ パフォーマンスは jre のバージョンやスペックによって変化します。本内容は jre1.8.0_74 での検証結果を元にした内容です。</p>
<p>※ 性能計測結果についての記載がありますが、あくまでも参考値です。性能を保証するものではありません。</p>
<p><a id="stream-api-2"></a></p>
<section id="stream-api-1" data-number="6.1">
<h2 data-number="6.1"><span class="header-section-number">6.1</span> Stream API</h2>
<p>Java8 で追加された Stream API での記述は、可読性も高く、簡潔に書けますが、パフォーマンス・性能面で注意が必要な場合があります。</p>
<p>List の処理を行う際、拡張 for 文で処理する場合は Iterator インスタンスが 1 つだけ生成されますが、Stream API で処理する場合、最初の Stream インスタンスに加え、各中間処理ごとにも Stream インスタンスが生成され、その分の性能劣化が懸念されます。<br />
以下に処理例と計測結果を記載します。</p>
<ul>
<li><p>拡張 for 文</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb181-1"><a href="#cb181-1"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list = <span class="co">//数値文字列のList</span></span>
<span id="cb181-2"><a href="#cb181-2"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; resultList = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb181-3"><a href="#cb181-3"></a><span class="kw">for</span> (<span class="bu">String</span> string : list) {</span>
<span id="cb181-4"><a href="#cb181-4"></a>    <span class="kw">if</span> (string.<span class="fu">endsWith</span>(<span class="st">&quot;0&quot;</span>)) {</span>
<span id="cb181-5"><a href="#cb181-5"></a>        resultList.<span class="fu">add</span>(string);</span>
<span id="cb181-6"><a href="#cb181-6"></a>    }</span>
<span id="cb181-7"><a href="#cb181-7"></a>}</span>
<span id="cb181-8"><a href="#cb181-8"></a><span class="kw">return</span> resultList;</span></code></pre></div></li>
<li><p>Stream API</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb182-1"><a href="#cb182-1"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; list = <span class="co">//数値文字列のList</span></span>
<span id="cb182-2"><a href="#cb182-2"></a><span class="bu">List</span>&lt;<span class="bu">String</span>&gt; resultList = list.<span class="fu">stream</span>()</span>
<span id="cb182-3"><a href="#cb182-3"></a>    .<span class="fu">filter</span>(s -&gt; s.<span class="fu">endsWith</span>(<span class="st">&quot;0&quot;</span>))</span>
<span id="cb182-4"><a href="#cb182-4"></a>    .<span class="fu">toList</span>();</span>
<span id="cb182-5"><a href="#cb182-5"></a><span class="kw">return</span> resultList;</span></code></pre></div></li>
<li><p>計測結果</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">処理する List の件数</th>
<th style="text-align: right;">拡張 for 文 (ms)</th>
<th style="text-align: right;">StreamAPI (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">100 万件</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: right;">1,000 万件</td>
<td style="text-align: right;">88</td>
<td style="text-align: right;">114</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1 億件</td>
<td style="text-align: right;">949</td>
<td style="text-align: right;">1,026</td>
</tr>
<tr class="even">
<td style="text-align: right;">2 億件</td>
<td style="text-align: right;">1,822</td>
<td style="text-align: right;">2,081</td>
</tr>
</tbody>
</table></li>
</ul>
<p>小中規模の処理量であれば考慮するほどの性能差はありませんが、大量の処理が見込まれる場合は考慮が必要です。<br />
また、Stream API は並列処理（スレッド処理）の機能をサポートしていますので、利用できる場合は並列処理も含めての検証が必要です。</p>
<p><a id="ラムダ式・メソッド参照・コンストラクタ参照-2"></a></p>
</section>
<section id="ラムダ式メソッド参照コンストラクタ参照-1" data-number="6.2">
<h2 data-number="6.2"><span class="header-section-number">6.2</span> ラムダ式・メソッド参照・コンストラクタ参照</h2>
<p>Java8 で追加されたラムダ式・メソッド参照・コンストラクタ参照は、匿名クラスを利用するよりも効率的です。<br />
積極的な利用を推奨します。</p>
<p>以下に Comparator を生成した場合の計測結果を記載します。</p>
<ul>
<li><p>匿名クラス</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb183-1"><a href="#cb183-1"></a><span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt; c = <span class="kw">new</span> <span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt;() {</span>
<span id="cb183-2"><a href="#cb183-2"></a>    <span class="at">@Override</span></span>
<span id="cb183-3"><a href="#cb183-3"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">compare</span>(<span class="bu">String</span> o1, <span class="bu">String</span> o2) {</span>
<span id="cb183-4"><a href="#cb183-4"></a>        <span class="kw">return</span> o1.<span class="fu">compareToIgnoreCase</span>(o2);</span>
<span id="cb183-5"><a href="#cb183-5"></a>    }</span>
<span id="cb183-6"><a href="#cb183-6"></a>};</span></code></pre></div></li>
<li><p>ラムダ式</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb184-1"><a href="#cb184-1"></a><span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt; c = (o1, o2) -&gt; o1.<span class="fu">compareToIgnoreCase</span>(o2);</span></code></pre></div></li>
<li><p>メソッド参照</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb185-1"><a href="#cb185-1"></a><span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt; c = <span class="bu">String</span>::compareToIgnoreCase;</span></code></pre></div></li>
<li><p>計測結果</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">処理件数</th>
<th style="text-align: right;">匿名クラス (ms)</th>
<th style="text-align: right;">ラムダ式 (ms)</th>
<th style="text-align: right;">メソッド参照 (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10 億回</td>
<td style="text-align: right;">380</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="even">
<td style="text-align: right;">100 億回</td>
<td style="text-align: right;">6,374</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1 京回</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">10</td>
</tr>
</tbody>
</table></li>
</ul>
<p>ラムダ式は外部の変数を利用する場合、匿名クラスとほぼ同じ動作をします。</p>
<ul>
<li><p>匿名クラス</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb186-1"><a href="#cb186-1"></a><span class="kw">new</span> <span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt;() {</span>
<span id="cb186-2"><a href="#cb186-2"></a>        <span class="at">@Override</span></span>
<span id="cb186-3"><a href="#cb186-3"></a>        <span class="kw">public</span> <span class="dt">int</span> <span class="fu">compare</span>(<span class="bu">String</span> o1, <span class="bu">String</span> o2) {</span>
<span id="cb186-4"><a href="#cb186-4"></a>            <span class="kw">return</span> arg.<span class="fu">equals</span>(<span class="st">&quot;DESC&quot;</span>) ? o2.<span class="fu">compareToIgnoreCase</span>(o1)</span>
<span id="cb186-5"><a href="#cb186-5"></a>                                            : o1.<span class="fu">compareToIgnoreCase</span>(o2);</span>
<span id="cb186-6"><a href="#cb186-6"></a>        }</span>
<span id="cb186-7"><a href="#cb186-7"></a>    }</span></code></pre></div></li>
<li><p>ラムダ式</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb187-1"><a href="#cb187-1"></a><span class="bu">Comparator</span>&lt;<span class="bu">String</span>&gt; c = (o1, o2) -&gt; arg.<span class="fu">equals</span>(<span class="st">&quot;DESC&quot;</span>) ? o2.<span class="fu">compareToIgnoreCase</span>(o1)</span>
<span id="cb187-2"><a href="#cb187-2"></a>                                    : o1.<span class="fu">compareToIgnoreCase</span>(o2);</span></code></pre></div></li>
<li><p>計測結果</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">処理件数</th>
<th style="text-align: right;">匿名クラス (ms)</th>
<th style="text-align: right;">ラムダ式 (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10 億回（パラメータあり）</td>
<td style="text-align: right;">571</td>
<td style="text-align: right;">572</td>
</tr>
<tr class="even">
<td style="text-align: right;">100 億回（パラメータあり）</td>
<td style="text-align: right;">9,900</td>
<td style="text-align: right;">9,864</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
<section id="文字列連結" data-number="6.3">
<h2 data-number="6.3"><span class="header-section-number">6.3</span> 文字列連結</h2>
<section id="文字列連結繰り返し" data-number="6.3.1">
<h3 data-number="6.3.1"><span class="header-section-number">6.3.1</span> 文字列連結（繰り返し）</h3>
<p>文字列連結を繰り返し処理中で行う際、<code>+</code>演算子で処理することはアンチパターンとして知られています。<br />
繰り返し処理中の文字列連結は、 <code>StringBuilder</code>、 <code>StringJoiner</code>、 <code>StringBuffer</code> を利用します。<br />
また、コレクション要素の結合であれば<code>String#join</code>が利用できます。</p>
<p>以下に処理例と計測結果を記載します。</p>
<ul>
<li><p><code>+</code>演算子</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb188-1"><a href="#cb188-1"></a><span class="bu">String</span> s = <span class="st">&quot;&quot;</span>;</span>
<span id="cb188-2"><a href="#cb188-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; list.<span class="fu">size</span>(); i++) {</span>
<span id="cb188-3"><a href="#cb188-3"></a>    <span class="bu">String</span> string = list.<span class="fu">get</span>(i);</span>
<span id="cb188-4"><a href="#cb188-4"></a>    <span class="kw">if</span> (i &gt; <span class="dv">0</span>) {</span>
<span id="cb188-5"><a href="#cb188-5"></a>        s += <span class="st">&quot;,&quot;</span>;</span>
<span id="cb188-6"><a href="#cb188-6"></a>    }</span>
<span id="cb188-7"><a href="#cb188-7"></a>    s += string;</span>
<span id="cb188-8"><a href="#cb188-8"></a>}</span>
<span id="cb188-9"><a href="#cb188-9"></a><span class="kw">return</span> s;</span></code></pre></div></li>
<li><p>StringBuilder</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb189-1"><a href="#cb189-1"></a><span class="bu">StringBuilder</span> sb = <span class="kw">new</span> <span class="bu">StringBuilder</span>();</span>
<span id="cb189-2"><a href="#cb189-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; list.<span class="fu">size</span>(); i++) {</span>
<span id="cb189-3"><a href="#cb189-3"></a>    <span class="bu">String</span> string = list.<span class="fu">get</span>(i);</span>
<span id="cb189-4"><a href="#cb189-4"></a>    <span class="kw">if</span> (i &gt; <span class="dv">0</span>) {</span>
<span id="cb189-5"><a href="#cb189-5"></a>        sb.<span class="fu">append</span>(<span class="st">&quot;,&quot;</span>);</span>
<span id="cb189-6"><a href="#cb189-6"></a>    }</span>
<span id="cb189-7"><a href="#cb189-7"></a>    sb.<span class="fu">append</span>(string);</span>
<span id="cb189-8"><a href="#cb189-8"></a>}</span>
<span id="cb189-9"><a href="#cb189-9"></a><span class="kw">return</span> sb.<span class="fu">toString</span>();</span></code></pre></div></li>
<li><p>StringBuffer</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb190-1"><a href="#cb190-1"></a><span class="bu">StringBuffer</span> sb = <span class="kw">new</span> <span class="bu">StringBuffer</span>();</span>
<span id="cb190-2"><a href="#cb190-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; list.<span class="fu">size</span>(); i++) {</span>
<span id="cb190-3"><a href="#cb190-3"></a>    <span class="bu">String</span> string = list.<span class="fu">get</span>(i);</span>
<span id="cb190-4"><a href="#cb190-4"></a>    <span class="kw">if</span> (i &gt; <span class="dv">0</span>) {</span>
<span id="cb190-5"><a href="#cb190-5"></a>        sb.<span class="fu">append</span>(<span class="st">&quot;,&quot;</span>);</span>
<span id="cb190-6"><a href="#cb190-6"></a>    }</span>
<span id="cb190-7"><a href="#cb190-7"></a>    sb.<span class="fu">append</span>(string);</span>
<span id="cb190-8"><a href="#cb190-8"></a>}</span>
<span id="cb190-9"><a href="#cb190-9"></a><span class="kw">return</span> sb.<span class="fu">toString</span>();</span></code></pre></div></li>
<li><p>String#join</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb191-1"><a href="#cb191-1"></a><span class="kw">return</span> <span class="bu">String</span>.<span class="fu">join</span>(<span class="st">&quot;,&quot;</span>, list);</span></code></pre></div></li>
<li><p>計測結果</p>
<table>
<colgroup>
<col style="width: 23%"></col>
<col style="width: 16%"></col>
<col style="width: 21%"></col>
<col style="width: 20%"></col>
<col style="width: 18%"></col>
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">処理する List の件数</th>
<th style="text-align: right;"><code>+</code>演算子 (ms)</th>
<th style="text-align: right;">StringBuilder (ms)</th>
<th style="text-align: right;">StringBuffer (ms)</th>
<th style="text-align: right;">String#join (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1,000 件</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="even">
<td style="text-align: right;">1 万件</td>
<td style="text-align: right;">1,016</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10 万件</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">100 万件</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">51</td>
</tr>
</tbody>
</table></li>
</ul>
</section>
<section id="文字列連結定数" data-number="6.3.2">
<h3 data-number="6.3.2"><span class="header-section-number">6.3.2</span> 文字列連結（定数）</h3>
<p>基本的に処理中の文字列連結では<code>+</code>演算子は使わないで処理するほうがパフォーマンスが高くなりますが、定数の場合は<code>+</code>演算子で定義するほうがパフォーマンスが高いです。</p>
<p>たとえば以下のように、処理したい場合、</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb192-1"><a href="#cb192-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> CONST_A = <span class="st">&quot;A&quot;</span>;</span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> CONST_B = <span class="st">&quot;B&quot;</span>;</span>
<span id="cb192-3"><a href="#cb192-3"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> CONST_AB = CONST_A + CONST_B;</span></code></pre></div>
<p>StringBuilder で処理しようとすると以下のようになります。</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb193-1"><a href="#cb193-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="bu">String</span> CONST_AB = <span class="kw">new</span> <span class="bu">StringBuilder</span>(CONST_A).<span class="fu">append</span>(CONST_B).<span class="fu">toString</span>();</span></code></pre></div>
<p>しかし、これらをバイトコード上で確認するとそれぞれ以下のようになります。</p>
<ul>
<li><p><code>+</code>演算子</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb194-1"><a href="#cb194-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> java.<span class="fu">lang</span>.<span class="fu">String</span> CONST_AB = <span class="st">&quot;AB&quot;</span>;</span></code></pre></div></li>
<li><p>StringBuilder</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb195-1"><a href="#cb195-1"></a><span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> java.<span class="fu">lang</span>.<span class="fu">String</span> CONST_AB;</span>
<span id="cb195-2"><a href="#cb195-2"></a></span>
<span id="cb195-3"><a href="#cb195-3"></a><span class="dt">static</span> {};</span>
<span id="cb195-4"><a href="#cb195-4"></a>   <span class="dv">0</span>  <span class="kw">new</span> java.<span class="fu">lang</span>.<span class="fu">StringBuilder</span> [<span class="dv">20</span>]</span>
<span id="cb195-5"><a href="#cb195-5"></a>   <span class="dv">3</span>  dup</span>
<span id="cb195-6"><a href="#cb195-6"></a>   <span class="dv">4</span>  ldc &lt;<span class="bu">String</span> <span class="st">&quot;A&quot;</span>&gt; [<span class="dv">8</span>]</span>
<span id="cb195-7"><a href="#cb195-7"></a>   <span class="dv">6</span>  invokespecial java.<span class="fu">lang</span>.<span class="fu">StringBuilder</span>(java.<span class="fu">lang</span>.<span class="fu">String</span>) [<span class="dv">22</span>]</span>
<span id="cb195-8"><a href="#cb195-8"></a>   <span class="dv">9</span>  ldc &lt;<span class="bu">String</span> <span class="st">&quot;B&quot;</span>&gt; [<span class="dv">11</span>]</span>
<span id="cb195-9"><a href="#cb195-9"></a>  <span class="dv">11</span>  invokevirtual java.<span class="fu">lang</span>.<span class="fu">StringBuilder</span>.<span class="fu">append</span>(java.<span class="fu">lang</span>.<span class="fu">String</span>) : java.<span class="fu">lang</span>.<span class="fu">StringBuilder</span> [<span class="dv">26</span>]</span>
<span id="cb195-10"><a href="#cb195-10"></a>  <span class="dv">14</span>  invokevirtual java.<span class="fu">lang</span>.<span class="fu">StringBuilder</span>.<span class="fu">toString</span>() : java.<span class="fu">lang</span>.<span class="fu">String</span> [<span class="dv">30</span>]</span>
<span id="cb195-11"><a href="#cb195-11"></a>  <span class="dv">17</span>  putstatic jp.<span class="fu">co</span>.<span class="fu">packagename</span>.<span class="fu">ClassName</span>.<span class="fu">CONST_AB</span> : java.<span class="fu">lang</span>.<span class="fu">String</span> [<span class="dv">34</span>]</span>
<span id="cb195-12"><a href="#cb195-12"></a>  <span class="dv">20</span>  <span class="kw">return</span></span></code></pre></div></li>
</ul>
<p><code>+</code>演算子を利用した場合コンパイル時に最適化され、文字列<code>&quot;A&quot;</code>と<code>&quot;B&quot;</code>をあらかじめ結合して class が作成されます。<br />
<code>StringBuilder</code>を利用した場合は最適化はされず、記述した通りの処理が行われます。</p>
<p>計測した場合、下記のようになります。</p>
<ul>
<li><p>計測結果</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">処理回数</th>
<th style="text-align: right;">StringBuilder (ms)</th>
<th style="text-align: right;"><code>+</code>演算子 (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5,000 万回</td>
<td style="text-align: right;">559</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="even">
<td style="text-align: right;">1 億回</td>
<td style="text-align: right;">1,059</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
</tbody>
</table></li>
</ul>
<p>通常、定数処理を大量に処理することは考えられないので性能問題になることはありませんが、<code>+</code>演算子を利用したほうがパフォーマンスが高いこともあるということを理解してください。</p>
</section>
</section>
<section id="list-の種類" data-number="6.4">
<h2 data-number="6.4"><span class="header-section-number">6.4</span> List の種類</h2>
<p><code>List</code>には<code>ArrayList</code>のような<code>RandomAccess</code>を implements した、ランダムアクセスをサポートしているクラスと、<br />
<code>LinkedList</code>のようなランダムアクセスをサポートしていない（シーケンシャルアクセス）クラスが存在します。<br />
<code>RandomAccess</code>ではない<code>List</code>は、<code>List#get</code>などインデックスを利用するような操作のパフォーマンスが低いので注意してください。</p>
<p>以下に処理例と計測結果を記載します。</p>
<ul>
<li><p>for 文(List#get(int)によるループ)</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb196-1"><a href="#cb196-1"></a><span class="dt">int</span> size = list.<span class="fu">size</span>();</span>
<span id="cb196-2"><a href="#cb196-2"></a><span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; size; i++) {</span>
<span id="cb196-3"><a href="#cb196-3"></a>    <span class="bu">String</span> s = list.<span class="fu">get</span>(i);</span>
<span id="cb196-4"><a href="#cb196-4"></a>    <span class="co">//処理</span></span>
<span id="cb196-5"><a href="#cb196-5"></a>}</span></code></pre></div></li>
<li><p>拡張 for 文</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb197-1"><a href="#cb197-1"></a><span class="kw">for</span> (<span class="bu">String</span> s : list) {</span>
<span id="cb197-2"><a href="#cb197-2"></a>    <span class="co">//処理</span></span>
<span id="cb197-3"><a href="#cb197-3"></a>}</span></code></pre></div></li>
<li><p>forEach</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb198-1"><a href="#cb198-1"></a>list.<span class="fu">forEach</span>(<span class="kw">this</span>::処理);</span></code></pre></div></li>
<li><p>計測結果</p>
<table>
<colgroup>
<col style="width: 8%"></col>
<col style="width: 21%"></col>
<col style="width: 22%"></col>
<col style="width: 12%"></col>
<col style="width: 13%"></col>
<col style="width: 11%"></col>
<col style="width: 11%"></col>
</colgroup>
<thead>
<tr class="header">
<th>処理する List の件数</th>
<th style="text-align: right;"><code>ArrayList</code><br>for 文(List#get(int)によるループ) (ms)</th>
<th style="text-align: right;"><code>LinkedList</code><br>for 文(List#get(int)によるループ) (ms)</th>
<th style="text-align: right;"><code>ArrayList</code><br>拡張 for 文 (ms)</th>
<th style="text-align: right;"><code>LinkedList</code><br>拡張 for 文 (ms)</th>
<th style="text-align: right;"><code>ArrayList</code><br>forEach (ms)</th>
<th style="text-align: right;"><code>LinkedList</code><br>forEach (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1 万件</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="even">
<td>10 万件</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">7,576</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td>20 万件</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">17,740</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">0(計測不能)</td>
</tr>
<tr class="even">
<td>50 万件</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td>100 万件</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0(計測不能)</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td>1,000 万件</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">(30 秒以上)</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">44</td>
</tr>
</tbody>
</table></li>
</ul>
<p>ランダムアクセスをサポートしている<code>List</code>がシーケンシャルアクセス（iterator を利用した処理など）で遅いということはないので、<br />
ループの処理は拡張 for 文等、Iterator によるループで記述するのが無難です。<br />
<code>List#get</code>での処理をすべて禁止することはできませんが、高いパフォーマンスが求められる場合は<code>List</code>の種類にも注目してみてください。</p>
</section>
<section id="bigdecimal-の-zero-との比較" data-number="6.5">
<h2 data-number="6.5"><span class="header-section-number">6.5</span> BigDecimal の ZERO との比較</h2>
<p>BigDecimal の正・負・ZERO の判定は<code>BigDecimal#signum</code>を利用します。<br />
<code>compareTo</code>を利用して<code>BigDecimal.ZERO</code>と比較しても同じことができますが、<code>signum</code>を利用したほうが効率的です。</p>
<p>以下に処理例と計測結果を記載します。</p>
<ul>
<li><p>compareTo 利用</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb199-1"><a href="#cb199-1"></a><span class="bu">BigDecimal</span> value = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;0.0&quot;</span>);</span>
<span id="cb199-2"><a href="#cb199-2"></a><span class="kw">if</span> (value.<span class="fu">compareTo</span>(<span class="bu">BigDecimal</span>.<span class="fu">ZERO</span>) == <span class="dv">0</span>) {</span></code></pre></div></li>
<li><p>signum 利用</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb200-1"><a href="#cb200-1"></a><span class="bu">BigDecimal</span> value = <span class="kw">new</span> <span class="bu">BigDecimal</span>(<span class="st">&quot;0.0&quot;</span>);</span>
<span id="cb200-2"><a href="#cb200-2"></a><span class="kw">if</span> (value.<span class="fu">signum</span>() == <span class="dv">0</span>) {</span></code></pre></div></li>
<li><p>計測結果</p>
<p>（単位：マイクロ秒）</p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">処理回数</th>
<th style="text-align: right;">compareTo 利用 (マイクロ秒)</th>
<th style="text-align: right;">signum 利用 (マイクロ秒)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1 京回</td>
<td style="text-align: right;">527<br>max:26,367<br>min:0</td>
<td style="text-align: right;">424<br>max:21,213<br>min:0</td>
</tr>
</tbody>
</table></li>
</ul>
<p>性能差が少ないので、必ずしも signum を利用する必要はありませんが、大量に処理する場合など、高いパフォーマンスが求められる場合は意識してください。</p>
<hr />
</section>
</section>
<section id="license" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> License</h1>
<p><a href="https://creativecommons.org/licenses/by/4.0/deed.ja"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IB2cksfwAAAW5QTFRF////////////////7+/v39/f1tXV09bS0tXS0tXR0dTR0dTQ0NTQ0NPPz9PPztLOztHNzdHNzdHMz8/PzdDMzNDMzNDLzM/Ly8/Ly8/Ky87Kys3Jyc3Jyc3IyMzIyMzHx8vHxsrGxsrFxcnFxcnExMnExMjDw8jDxMfDw8fCwsfCwcXAwMXAwMW/wMS/v8S+v8O+vsO+vsK9vcK9vcK8v7+/vMG8vMG7vMC8u8C7u8C6ur+6ur+5ub65ub64uL23t7y2tru1tbq0tLqztLmzs7iysrixsrexsbewsbawsLavsLWvr7Wur7SusLOvrrStrrOtr7KvrbOsrLKrr6+vq7Gqn6OenqCdn5+flpmWk5iTkZSRkZORj4+PiYyJhIaEhIWEgoWCgICAfX98fH98eXx5cHJvcHBwYGBgXV5dUFFQUFBQQ0RDQEBAPj8+NTY1MjMxMDAwKSkpKCkoICAgGxsbEBAQDg4ODQ4NAAAAlzoSDQAAAAN0Uk5TAAoO5yEBUwAAAvhJREFUeNq1lutX2kAQxWmXFDVGYy1EIjQ2VZDiu1CsRQQURYvV+qSKj6II8rANYOT+9z0JqIASo9Y5ydkP2f2d2Ts7d2N4jRcJgwEIBwO+SbdTFGw8ZzZz1n5BdLgnfLPBcCT6fW1jY3P78QEYEA76PWMu0W5lGbrNZGrrYNg+u+ga9fgVcmxtY/NJZAOCfs+IY4Bn6eN8RdlEJX9Ed1uFIfdnfzC8uBJbv5tyqqhMLKa0wQHPiEOwMInLW4Eu9xmzfdDtmQ0uLK3cSXmvBBTS6QJQ2tMC+8YcgpnOApAzSa83mZEBZIff2odGfYFQJNqc8s4VchQhhFA5XO1pgCddAxaFKyeNpBpxGSgNmwXXxMxcWE25fkkJGUIIoExESQPsFnkmC0gUuQmjBGQZq+j2BEKR5dUGLVLIvbkGkxxSrcHO92wCkIyENJL3u+2O8Zng/FJsvR5cRF0GFIqtwaKVvoTcSxrCKOOS7hPdXwLhxUYtUFC+Z6AKQgpoDRZ6joEkaYo4cMQKril/KLLcCE4TVYmqFmkNsK0rD9lIiDdXKCSrwwEhREae6Ve0WIiuPg3M0xVlW171BBe21CGjbLbSYR0c/To3H409TQquHTggREKZ8pbjEiRqqxxXtWjjRLdvLrzUAK4Vr5qwZvEsJsCrzExWF9Tk9gIm84e74BRyRN9xeyS4vkHSmg1yK4Wxt5yUIClDayn0t3SteLWq3RQvjQrN31O87e2dEiBl0tJDJmTrykImN8dtq6AOpIw8Y3OMf2s+bvptU+hJqFrc1yCfpmZDkWYX0mv0H9WWpvS2tH6w8z27e58JJVi7c2ImuNBkQvrBOOWZc0CqsyFKtU3+97OuaQBnXGe90RuTMvCHtpziuWCcmDvPm64m+t2vlmuq/YHqqwnGCcfs1l+mCcbSmgtSe8iDGQNnPEsnrq//fZrltXS4tk3oAOPvT2tPF91uMrXTDNv340JrjQ4hbsHAxeE0z1ksHD99eKFdl0dl/P//Cl+9EPcfS+yBAoqk3eUAAAAASUVORK5CYII=" alt="CC-By-4.0" /></a></p>
</section>
</body>
</html>
